import{j as Tt,e as jt,r as Lt}from"./index-tSnjGKHW.js";import{u as we,a as ke,D as Te,H as je}from"./index-haNoslfC.js";import{M as me}from"./index-liRUTb_w.js";import"./index-ihpOjWSX.js";const Oe="_content_zhr8n_1",Me="_menus_zhr8n_10",Ie="_container_zhr8n_22",Le="_item_zhr8n_30",Fe="_deletes_zhr8n_41",ee={content:Oe,"source-box":"_source-box_zhr8n_6",menus:Me,"target-box":"_target-box_zhr8n_17",container:Ie,item:Le,deletes:Fe,"right-menu":"_right-menu_zhr8n_59"},ye=function(z){const{dropName:f,dropType:X}=z,[{isDragging:Q,handlerId:Z},tt]=we(()=>({type:"box",item:{dropName:f,dropType:X},collect:h=>({isDragging:h.isDragging(),handlerId:h.getHandlerId()}),end:(h,O)=>{O.getDropResult()}}));return Tt.jsx("div",{ref:tt,className:ee.menus,children:f})};var xe={};(function(ot){(function(){typeof Math.sgn>"u"&&(Math.sgn=function(d){return d==0?0:d>0?1:-1});var z={subtract:function(d,S){return{x:d.x-S.x,y:d.y-S.y}},dotProduct:function(d,S){return d.x*S.x+d.y*S.y},square:function(d){return Math.sqrt(d.x*d.x+d.y*d.y)},scale:function(d,S){return{x:d.x*S,y:d.y*S}}},f=64,X=Math.pow(2,-f-1),Q=function(d,S){for(var R=[],B=tt(d,S),Y=S.length-1,i=2*Y-1,o=h(B,i,R,0),t=z.subtract(d,S[0]),p=z.square(t),v=0,F=0;F<o;F++){t=z.subtract(d,y(S,Y,R[F],null,null));var L=z.square(t);L<p&&(p=L,v=R[F])}return t=z.subtract(d,S[Y]),L=z.square(t),L<p&&(p=L,v=1),{location:v,distance:p}},Z=function(d,S){var R=Q(d,S);return{point:y(S,S.length-1,R.location,null,null),location:R.location}},tt=function(d,S){for(var R=S.length-1,B=2*R-1,Y=[],i=[],o=[],t=[],p=[[1,.6,.3,.1],[.4,.6,.6,.4],[.1,.3,.6,1]],v=0;v<=R;v++)Y[v]=z.subtract(S[v],d);for(var v=0;v<=R-1;v++)i[v]=z.subtract(S[v+1],S[v]),i[v]=z.scale(i[v],3);for(var F=0;F<=R-1;F++)for(var L=0;L<=R;L++)o[F]||(o[F]=[]),o[F][L]=z.dotProduct(i[F],Y[L]);for(v=0;v<=B;v++)t[v]||(t[v]=[]),t[v].y=0,t[v].x=parseFloat(v)/B;for(var V=R,G=R-1,W=0;W<=V+G;W++){var lt=Math.max(0,W-G),st=Math.min(W,V);for(v=lt;v<=st;v++){var it=W-v;t[v+it].y+=o[it][v]*p[it][v]}}return t},h=function(d,S,R,B){var Y=[],i=[],o,t,p=[],v=[];switch(O(d,S)){case 0:return 0;case 1:{if(B>=f)return R[0]=(d[0].x+d[S].x)/2,1;if(l(d,S))return R[0]=s(d,S),1;break}}y(d,S,.5,Y,i),o=h(Y,S,p,B+1),t=h(i,S,v,B+1);for(var F=0;F<o;F++)R[F]=p[F];for(var F=0;F<t;F++)R[F+o]=v[F];return o+t},O=function(d,S){var R=0,B,Y;B=Y=Math.sgn(d[0].y);for(var i=1;i<=S;i++)B=Math.sgn(d[i].y),B!=Y&&R++,Y=B;return R},l=function(d,S){var R,B,Y,i,o,t,p,v,F,L,V,G,W,lt,st,it;t=d[0].y-d[S].y,p=d[S].x-d[0].x,v=d[0].x*d[S].y-d[S].x*d[0].y;var rt,pt;rt=pt=0;for(var gt=1;gt<S;gt++){var ut=t*d[gt].x+p*d[gt].y+v;ut>rt?rt=ut:ut<pt&&(pt=ut)}return V=0,G=1,W=0,lt=t,st=p,it=v-rt,F=V*st-lt*G,L=1/F,B=(G*it-st*W)*L,lt=t,st=p,it=v-pt,F=V*st-lt*G,L=1/F,Y=(G*it-st*W)*L,i=Math.min(B,Y),o=Math.max(B,Y),R=o-i,R<X?1:0},s=function(d,S){var R=1,B=0,Y=d[S].x-d[0].x,i=d[S].y-d[0].y,o=d[0].x-0,t=d[0].y-0,p=Y*B-i*R,v=1/p,F=(Y*t-i*o)*v;return 0+R*F},y=function(d,S,R,B,Y){for(var i=[[]],o=0;o<=S;o++)i[0][o]=d[o];for(var t=1;t<=S;t++)for(var o=0;o<=S-t;o++)i[t]||(i[t]=[]),i[t][o]||(i[t][o]={}),i[t][o].x=(1-R)*i[t-1][o].x+R*i[t-1][o+1].x,i[t][o].y=(1-R)*i[t-1][o].y+R*i[t-1][o+1].y;if(B!=null)for(o=0;o<=S;o++)B[o]=i[o][0];if(Y!=null)for(o=0;o<=S;o++)Y[o]=i[S-o][o];return i[S][0]},D={},M=function(d){var S=D[d];if(!S){S=[];var R=function(){return function(L){return Math.pow(L,d)}},B=function(){return function(L){return Math.pow(1-L,d)}},Y=function(L){return function(V){return L}},i=function(){return function(L){return L}},o=function(){return function(L){return 1-L}},t=function(L){return function(V){for(var G=1,W=0;W<L.length;W++)G=G*L[W](V);return G}};S.push(new R);for(var p=1;p<d;p++){for(var v=[new Y(d)],F=0;F<d-p;F++)v.push(new i);for(var F=0;F<p;F++)v.push(new o);S.push(new t(v))}S.push(new B),D[d]=S}return S},E=function(d,S){for(var R=M(d.length-1),B=0,Y=0,i=0;i<d.length;i++)B=B+d[i].x*R[i](S),Y=Y+d[i].y*R[i](S);return{x:B,y:Y}},g=function(d,S){return Math.sqrt(Math.pow(d.x-S.x,2)+Math.pow(d.y-S.y,2))},e=function(d){return d[0].x===d[1].x&&d[0].y===d[1].y},j=function(d,S,R){if(e(d))return{point:d[0],location:S};for(var B=E(d,S),Y=0,i=S,o=R>0?1:-1,t=null;Y<Math.abs(R);)i+=.005*o,t=E(d,i),Y+=g(t,B),B=t;return{point:t,location:i}},I=function(d){var S=new Date().getTime();if(e(d))return 0;for(var R=E(d,0),B=0,Y=0,i=1,o=null;Y<1;)Y+=.005*i,o=E(d,Y),B+=g(o,R),R=o;return console.log("length",new Date().getTime()-S),B},U=function(d,S,R){return j(d,S,R).point},N=function(d,S,R){return j(d,S,R).location},P=function(d,S){var R=E(d,S),B=E(d.slice(0,d.length-1),S),Y=B.y-R.y,i=B.x-R.x;return Y===0?1/0:Math.atan(Y/i)},w=function(d,S,R){var B=j(d,S,R);return B.location>1&&(B.location=1),B.location<0&&(B.location=0),P(d,B.location)},n=function(d,S,R,B){B=B??0;var Y=j(d,S,B),i=P(d,Y.location),o=Math.atan(-1/i),t=R/2*Math.sin(o),p=R/2*Math.cos(o);return[{x:Y.point.x+p,y:Y.point.y+t},{x:Y.point.x-p,y:Y.point.y-t}]},c=function(d,S,R,B,Y){var i=B-S,o=d-R,t=d*(S-B)+S*(R-d),p=u(Y),v=[i*p[0][0]+o*p[1][0],i*p[0][1]+o*p[1][1],i*p[0][2]+o*p[1][2],i*p[0][3]+o*p[1][3]+t],F=_.apply(null,v),L=[];if(F!=null)for(var V=0;V<3;V++){var G=F[V],W=Math.pow(G,2),lt=Math.pow(G,3),st=[p[0][0]*lt+p[0][1]*W+p[0][2]*G+p[0][3],p[1][0]*lt+p[1][1]*W+p[1][2]*G+p[1][3]],it;R-d!==0?it=(st[0]-d)/(R-d):it=(st[1]-S)/(B-S),G>=0&&G<=1&&it>=0&&it<=1&&L.push(st)}return L},a=function(d,S,R,B,Y){var i=[];return i.push.apply(i,c(d,S,d+R,S,Y)),i.push.apply(i,c(d+R,S,d+R,S+B,Y)),i.push.apply(i,c(d+R,S+B,d,S+B,Y)),i.push.apply(i,c(d,S+B,d,S,Y)),i},b=function(d,S){var R=[];return R.push.apply(R,c(d.x,d.y,d.x+d.w,d.y,S)),R.push.apply(R,c(d.x+d.w,d.y,d.x+d.w,d.y+d.h,S)),R.push.apply(R,c(d.x+d.w,d.y+d.h,d.x,d.y+d.h,S)),R.push.apply(R,c(d.x,d.y+d.h,d.x,d.y,S)),R};function C(d,S){return[-d[0][S]+3*d[1][S]+-3*d[2][S]+d[3][S],3*d[0][S]-6*d[1][S]+3*d[2][S],-3*d[0][S]+3*d[1][S],d[0][S]]}function u(d){return[C(d,"x"),C(d,"y")]}function A(d){return d<0?-1:d>0?1:0}function _(d,S,R,B){var Y=S/d,i=R/d,o=B/d,t=(3*i-Math.pow(Y,2))/9,p=(9*Y*i-27*o-2*Math.pow(Y,3))/54,v=Math.pow(t,3)+Math.pow(p,2),F,L,V=[];if(v>=0)F=A(p+Math.sqrt(v))*Math.pow(Math.abs(p+Math.sqrt(v)),1/3),L=A(p-Math.sqrt(v))*Math.pow(Math.abs(p-Math.sqrt(v)),1/3),V[0]=-Y/3+(F+L),V[1]=-Y/3-(F+L)/2,V[2]=-Y/3-(F+L)/2,Math.abs(Math.sqrt(3)*(F-L)/2)!==0&&(V[1]=-1,V[2]=-1);else{var G=Math.acos(p/Math.sqrt(-Math.pow(t,3)));V[0]=2*Math.sqrt(-t)*Math.cos(G/3)-Y/3,V[1]=2*Math.sqrt(-t)*Math.cos((G+2*Math.PI)/3)-Y/3,V[2]=2*Math.sqrt(-t)*Math.cos((G+4*Math.PI)/3)-Y/3}for(var W=0;W<3;W++)(V[W]<0||V[W]>1)&&(V[W]=-1);return V}var k=this.jsBezier={distanceFromCurve:Q,gradientAtPoint:P,gradientAtPointAlongCurveFrom:w,nearestPointOnCurve:Z,pointOnCurve:E,pointAlongCurveFrom:U,perpendicularToCurveAt:n,locationAlongCurveFrom:N,getLength:I,lineIntersection:c,boxIntersection:a,boundingBoxIntersection:b,version:"0.9.0"};ot.jsBezier=k}).call(typeof window<"u"?window:jt),(function(){var z=this,f=z.Biltong={version:"0.4.0"};ot.Biltong=f;var X=function(l){return Object.prototype.toString.call(l)==="[object Array]"},Q=function(l,s,y){return l=X(l)?l:[l.x,l.y],s=X(s)?s:[s.x,s.y],y(l,s)},Z=f.gradient=function(l,s){return Q(l,s,function(y,D){return D[0]==y[0]?D[1]>y[1]?1/0:-1/0:D[1]==y[1]?D[0]>y[0]?0:-0:(D[1]-y[1])/(D[0]-y[0])})};f.normal=function(l,s){return-1/Z(l,s)},f.lineLength=function(l,s){return Q(l,s,function(y,D){return Math.sqrt(Math.pow(D[1]-y[1],2)+Math.pow(D[0]-y[0],2))})};var tt=f.quadrant=function(l,s){return Q(l,s,function(y,D){return D[0]>y[0]||D[0]==y[0]?D[1]>y[1]?2:1:D[1]>y[1]?3:4})};f.theta=function(l,s){return Q(l,s,function(y,D){var M=Z(y,D),E=Math.atan(M),g=tt(y,D);return(g==4||g==3)&&(E+=Math.PI),E<0&&(E+=2*Math.PI),E})},f.intersects=function(l,s){var y=l.x,D=l.x+l.w,M=l.y,E=l.y+l.h,g=s.x,e=s.x+s.w,j=s.y,I=s.y+s.h;return y<=g&&g<=D&&M<=j&&j<=E||y<=e&&e<=D&&M<=j&&j<=E||y<=g&&g<=D&&M<=I&&I<=E||y<=e&&g<=D&&M<=I&&I<=E||g<=y&&y<=e&&j<=M&&M<=I||g<=D&&D<=e&&j<=M&&M<=I||g<=y&&y<=e&&j<=E&&E<=I||g<=D&&y<=e&&j<=E&&E<=I},f.encloses=function(l,s,y){var D=l.x,M=l.x+l.w,E=l.y,g=l.y+l.h,e=s.x,j=s.x+s.w,I=s.y,U=s.y+s.h,N=function(P,w,n,c){return y?P<=w&&n>=c:P<w&&n>c};return N(D,e,M,j)&&N(E,I,g,U)};var h=[null,[1,-1],[1,1],[-1,1],[-1,-1]],O=[null,[-1,-1],[-1,1],[1,1],[1,-1]];f.pointOnLine=function(l,s,y){var D=Z(l,s),M=tt(l,s),E=y>0?h[M]:O[M],g=Math.atan(D),e=Math.abs(y*Math.sin(g))*E[1],j=Math.abs(y*Math.cos(g))*E[0];return{x:l.x+j,y:l.y+e}},f.perpendicularLineTo=function(l,s,y){var D=Z(l,s),M=Math.atan(-1/D),E=y/2*Math.sin(M),g=y/2*Math.cos(M);return[{x:s.x+g,y:s.y+E},{x:s.x-g,y:s.y-E}]}}).call(typeof window<"u"?window:jt),(function(){function z(i,o,t,p,v,F,L,V){return new Touch({target:o,identifier:Y(),pageX:t,pageY:p,screenX:v,screenY:F,clientX:L||v,clientY:V||F})}function f(){var i=[];return Array.prototype.push.apply(i,arguments),i.item=function(o){return this[o]},i}function X(i,o,t,p,v,F,L,V){return f(z.apply(null,arguments))}var Q=this,Z=function(i,o,t){t=t||i.parentNode;for(var p=t.querySelectorAll(o),v=0;v<p.length;v++)if(p[v]===i)return!0;return!1},tt=function(i){return typeof i=="string"||i.constructor===String?document.getElementById(i):i},h=function(i){return i.srcElement||i.target},O=function(i,o,t,p){if(p){if(typeof i.path<"u"&&i.path.indexOf)return{path:i.path,end:i.path.indexOf(t)};var v={path:[],end:-1},F=function(L){v.path.push(L),L===t?v.end=v.path.length-1:L.parentNode!=null&&F(L.parentNode)};return F(o),v}else return{path:[o],end:1}},l=function(i,o){for(var t=0,p=i.length;t<p&&i[t]!=o;t++);t<i.length&&i.splice(t,1)},s=1,y=function(i,o,t){var p=s++;return i.__ta=i.__ta||{},i.__ta[o]=i.__ta[o]||{},i.__ta[o][p]=t,t.__tauid=p,p},D=function(i,o,t){if(i.__ta&&i.__ta[o]&&delete i.__ta[o][t.__tauid],t.__taExtra){for(var p=0;p<t.__taExtra.length;p++)R(i,t.__taExtra[p][0],t.__taExtra[p][1]);t.__taExtra.length=0}t.__taUnstore&&t.__taUnstore()},M=function(i,o,t,p){if(i==null)return t;var v=i.split(","),F=function(L){F.__tauid=t.__tauid;var V=h(L),G=V,W=O(L,V,o,i!=null);if(W.end!=-1)for(var lt=0;lt<W.end;lt++){G=W.path[lt];for(var st=0;st<v.length;st++)Z(G,v[st],o)&&t.apply(G,arguments)}};return E(t,p,F),F},E=function(i,o,t){i.__taExtra=i.__taExtra||[],i.__taExtra.push([o,t])},g=function(i,o,t,p){if(P&&n[o]){var v=M(p,i,t,n[o]);S(i,n[o],v,t)}o==="focus"&&i.getAttribute("tabindex")==null&&i.setAttribute("tabindex","1"),S(i,o,M(p,i,t,o),t)},e=function(i,o,t,p){if(i.__taSmartClicks==null){var v=function(V){i.__tad=C(V)},F=function(V){i.__tau=C(V)},L=function(V){if(i.__tad&&i.__tau&&i.__tad[0]===i.__tau[0]&&i.__tad[1]===i.__tau[1])for(var G=0;G<i.__taSmartClicks.length;G++)i.__taSmartClicks[G].apply(h(V),[V])};g(i,"mousedown",v,p),g(i,"mouseup",F,p),g(i,"click",L,p),i.__taSmartClicks=[]}i.__taSmartClicks.push(t),t.__taUnstore=function(){l(i.__taSmartClicks,t)}},j={tap:{touches:1,taps:1},dbltap:{touches:1,taps:2},contextmenu:{touches:2,taps:1}},I=function(i,o){return function(t,p,v,F){if(p=="contextmenu"&&w)g(t,p,v,F);else{if(t.__taTapHandler==null){var L=t.__taTapHandler={tap:[],dbltap:[],contextmenu:[],down:!1,taps:0,downSelectors:[]},V=function(st){for(var it=h(st),rt=O(st,it,t,F!=null),pt=!1,gt=0;gt<rt.end;gt++){if(pt)return;it=rt.path[gt];for(var ut=0;ut<L.downSelectors.length;ut++)if(L.downSelectors[ut]==null||Z(it,L.downSelectors[ut],t)){L.down=!0,setTimeout(W,i),setTimeout(lt,o),pt=!0;break}}},G=function(st){if(L.down){var it=h(st),rt,pt;L.taps++;var gt=d(st);for(var ut in j)if(j.hasOwnProperty(ut)){var bt=j[ut];if(bt.touches===gt&&(bt.taps===1||bt.taps===L.taps))for(var vt=0;vt<L[ut].length;vt++){pt=O(st,it,t,L[ut][vt][1]!=null);for(var J=0;J<pt.end;J++)if(rt=pt.path[J],L[ut][vt][1]==null||Z(rt,L[ut][vt][1],t)){L[ut][vt][0].apply(rt,[st]);break}}}}},W=function(){L.down=!1},lt=function(){L.taps=0};g(t,"mousedown",V),g(t,"mouseup",G)}t.__taTapHandler.downSelectors.push(F),t.__taTapHandler[p].push([v,F]),v.__taUnstore=function(){l(t.__taTapHandler[p],v)}}}},U=function(i,o,t,p){for(var v in t.__tamee[i])t.__tamee[i].hasOwnProperty(v)&&t.__tamee[i][v].apply(p,[o])},N=function(){var i=[];return function(o,t,p,v){if(!o.__tamee){o.__tamee={over:!1,mouseenter:[],mouseexit:[]};var F=function(V){var G=h(V);(v==null&&G==o&&!o.__tamee.over||Z(G,v,o)&&(G.__tamee==null||!G.__tamee.over))&&(U("mouseenter",V,o,G),G.__tamee=G.__tamee||{},G.__tamee.over=!0,i.push(G))},L=function(V){for(var G=h(V),W=0;W<i.length;W++)G==i[W]&&!Z(V.relatedTarget||V.toElement,"*",G)&&(G.__tamee.over=!1,i.splice(W,1),U("mouseexit",V,o,G))};S(o,"mouseover",M(v,o,F,"mouseover"),F),S(o,"mouseout",M(v,o,L,"mouseout"),L)}p.__taUnstore=function(){delete o.__tamee[t][p.__tauid]},y(o,t,p),o.__tamee[t][p.__tauid]=p}},P="ontouchstart"in document.documentElement||navigator.maxTouchPoints,w="onmousedown"in document.documentElement,n={mousedown:"touchstart",mouseup:"touchend",mousemove:"touchmove"},c=function(){var i=-1;if(navigator.appName=="Microsoft Internet Explorer"){var o=navigator.userAgent,t=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");t.exec(o)!=null&&(i=parseFloat(RegExp.$1))}return i}(),a=c>-1&&c<9,b=function(i,o){if(i==null)return[0,0];var t=k(i),p=_(t,0);return[p[o+"X"],p[o+"Y"]]},C=function(i){return i==null?[0,0]:a?[i.clientX+document.documentElement.scrollLeft,i.clientY+document.documentElement.scrollTop]:b(i,"page")},u=function(i){return b(i,"screen")},A=function(i){return b(i,"client")},_=function(i,o){return i.item?i.item(o):i[o]},k=function(i){return i.touches&&i.touches.length>0?i.touches:i.changedTouches&&i.changedTouches.length>0?i.changedTouches:i.targetTouches&&i.targetTouches.length>0?i.targetTouches:[i]},d=function(i){return k(i).length},S=function(i,o,t,p){if(y(i,o,t),p.__tauid=t.__tauid,i.addEventListener)i.addEventListener(o,t,!1);else if(i.attachEvent){var v=o+t.__tauid;i["e"+v]=t,i[v]=function(){i["e"+v]&&i["e"+v](window.event)},i.attachEvent("on"+o,i[v])}},R=function(i,o,t){t!=null&&B(i,function(){var p=tt(this);if(D(p,o,t),t.__tauid!=null){if(p.removeEventListener)p.removeEventListener(o,t,!1),P&&n[o]&&p.removeEventListener(n[o],t,!1);else if(this.detachEvent){var v=o+t.__tauid;p[v]&&p.detachEvent("on"+o,p[v]),p[v]=null,p["e"+v]=null}}t.__taTouchProxy&&R(i,t.__taTouchProxy[1],t.__taTouchProxy[0])})},B=function(i,o){if(i!=null){i=typeof Window<"u"&&typeof i.top!="unknown"&&i==i.top?[i]:typeof i!="string"&&i.tagName==null&&i.length!=null?i:typeof i=="string"?document.querySelectorAll(i):[i];for(var t=0;t<i.length;t++)o.apply(i[t])}},Y=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(i){var o=Math.random()*16|0,t=i=="x"?o:o&3|8;return t.toString(16)})};Q.Mottle=function(i){i=i||{};var o=i.clickThreshold||250,t=i.dblClickThreshold||450,p=new N,v=new I(o,t),F=i.smartClicks,L=function(V,G,W,lt){W!=null&&B(V,function(){var st=tt(this);F&&G==="click"?e(st,G,W,lt):G==="tap"||G==="dbltap"||G==="contextmenu"?v(st,G,W,lt):G==="mouseenter"||G=="mouseexit"?p(st,G,W,lt):g(st,G,W,lt)})};this.remove=function(V){return B(V,function(){var G=tt(this);if(G.__ta){for(var W in G.__ta)if(G.__ta.hasOwnProperty(W))for(var lt in G.__ta[W])G.__ta[W].hasOwnProperty(lt)&&R(G,W,G.__ta[W][lt])}G.parentNode&&G.parentNode.removeChild(G)}),this},this.on=function(V,G,W,lt){var st=arguments[0],it=arguments.length==4?arguments[2]:null,rt=arguments[1],pt=arguments[arguments.length-1];return L(st,rt,pt,it),this},this.off=function(V,G,W){return R(V,G,W),this},this.trigger=function(V,G,W,lt){var st=w&&(typeof MouseEvent>"u"||W==null||W.constructor===MouseEvent),it=P&&!w&&n[G]?n[G]:G,rt=!(P&&!w&&n[G]),pt=C(W),gt=u(W),ut=A(W);return B(V,function(){var bt=tt(this),vt;W=W||{screenX:gt[0],screenY:gt[1],clientX:ut[0],clientY:ut[1]};var J=function(mt){lt&&(mt.payload=lt)},K={TouchEvent:function(mt){var xt=X(window,bt,0,pt[0],pt[1],gt[0],gt[1],ut[0],ut[1]),Ot=mt.initTouchEvent||mt.initEvent;Ot(it,!0,!0,window,null,gt[0],gt[1],ut[0],ut[1],!1,!1,!1,!1,xt,xt,xt,1,0)},MouseEvents:function(mt){mt.initMouseEvent(it,!0,!0,window,0,gt[0],gt[1],ut[0],ut[1],!1,!1,!1,!1,1,bt)}};if(document.createEvent){var $=!rt&&!st&&P&&n[G],ht=$?"TouchEvent":"MouseEvents";vt=document.createEvent(ht),K[ht](vt),J(vt),bt.dispatchEvent(vt)}else document.createEventObject&&(vt=document.createEventObject(),vt.eventType=vt.eventName=it,vt.screenX=gt[0],vt.screenY=gt[1],vt.clientX=ut[0],vt.clientY=ut[1],J(vt),bt.fireEvent("on"+it,vt))}),this}},Q.Mottle.consume=function(i,o){i.stopPropagation?i.stopPropagation():i.returnValue=!1,!o&&i.preventDefault&&i.preventDefault()},Q.Mottle.pageLocation=C,Q.Mottle.setForceTouchEvents=function(i){P=i},Q.Mottle.setForceMouseEvents=function(i){w=i},Q.Mottle.version="0.8.0",ot.Mottle=Q.Mottle}).call(typeof window>"u"?jt:window),(function(){var z=this,f=function(i,o,t){return i.indexOf(o)===-1?(t?i.unshift(o):i.push(o),!0):!1},X=function(i,o){var t=i.indexOf(o);t!==-1&&i.splice(t,1)},Q=function(i,o){for(var t=[],p=0;p<i.length;p++)o.indexOf(i[p])===-1&&t.push(i[p]);return t},Z=function(i){return i==null?!1:typeof i=="string"||i.constructor===String},tt=function(i){var o=i.getBoundingClientRect(),t=document.body,p=document.documentElement,v=window.pageYOffset||p.scrollTop||t.scrollTop,F=window.pageXOffset||p.scrollLeft||t.scrollLeft,L=p.clientTop||t.clientTop||0,V=p.clientLeft||t.clientLeft||0,G=o.top+v-L,W=o.left+F-V;return{top:Math.round(G),left:Math.round(W)}},h=function(i,o,t){t=t||i.parentNode;for(var p=t.querySelectorAll(o),v=0;v<p.length;v++)if(p[v]===i)return!0;return!1},O=function(i,o,t){if(h(o,t,i))return o;for(var p=o.parentNode;p!=null&&p!==i;){if(h(p,t,i))return p;p=p.parentNode}},l=function(i,o,t){for(var p=null,v=o.getAttribute("katavorio-draggable"),F=v!=null?"[katavorio-draggable='"+v+"'] ":"",L=0;L<i.length;L++)if(p=O(o,t,F+i[L].selector),p!=null){if(i[L].filter){var V=h(t,i[L].filter,p),G=i[L].filterExclude===!0;if(G&&!V||V)return null}return[i[L],p]}return null},s=function(){var i=-1;if(navigator.appName==="Microsoft Internet Explorer"){var o=navigator.userAgent,t=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");t.exec(o)!=null&&(i=parseFloat(RegExp.$1))}return i}(),y=10,D=10,M=s>-1&&s<9,E=s===9,g=function(i){if(M)return[i.clientX+document.documentElement.scrollLeft,i.clientY+document.documentElement.scrollTop];var o=j(i),t=e(o,0);return E?[t.pageX||t.clientX,t.pageY||t.clientY]:[t.pageX,t.pageY]},e=function(i,o){return i.item?i.item(o):i[o]},j=function(i){return i.touches&&i.touches.length>0?i.touches:i.changedTouches&&i.changedTouches.length>0?i.changedTouches:i.targetTouches&&i.targetTouches.length>0?i.targetTouches:[i]},I={delegatedDraggable:"katavorio-delegated-draggable",draggable:"katavorio-draggable",droppable:"katavorio-droppable",drag:"katavorio-drag",selected:"katavorio-drag-selected",active:"katavorio-drag-active",hover:"katavorio-drag-hover",noSelect:"katavorio-drag-no-select",ghostProxy:"katavorio-ghost-proxy",clonedDrag:"katavorio-clone-drag"},U="katavorio-drag-scope",N=["stop","start","drag","drop","over","out","beforeStart"],P=function(){},w=function(){return!0},n=function(i,o,t){for(var p=0;p<i.length;p++)i[p]!=t&&o(i[p])},c=function(i,o,t,p){n(i,function(v){v.setActive(o),o&&v.updatePosition(),t&&v.setHover(p,o)})},a=function(i,o){if(i!=null){i=!Z(i)&&i.tagName==null&&i.length!=null?i:[i];for(var t=0;t<i.length;t++)o.apply(i[t],[i[t]])}},b=function(i){i.stopPropagation?(i.stopPropagation(),i.preventDefault()):i.returnValue=!1},C="input,textarea,select,button,option",u=function(i,o,t){var p=i.srcElement||i.target;return!h(p,t.getInputFilterSelector(),o)},A=function(i,o,t,p){this.params=o||{},this.el=i,this.params.addClass(this.el,this._class),this.uuid=R();var v=!0;return this.setEnabled=function(F){v=F},this.isEnabled=function(){return v},this.toggleEnabled=function(){v=!v},this.setScope=function(F){this.scopes=F?F.split(/\s+/):[p]},this.addScope=function(F){var L={};a(this.scopes,function(G){L[G]=!0}),a(F?F.split(/\s+/):[],function(G){L[G]=!0}),this.scopes=[];for(var V in L)this.scopes.push(V)},this.removeScope=function(F){var L={};a(this.scopes,function(G){L[G]=!0}),a(F?F.split(/\s+/):[],function(G){delete L[G]}),this.scopes=[];for(var V in L)this.scopes.push(V)},this.toggleScope=function(F){var L={};a(this.scopes,function(G){L[G]=!0}),a(F?F.split(/\s+/):[],function(G){L[G]?delete L[G]:L[G]=!0}),this.scopes=[];for(var V in L)this.scopes.push(V)},this.setScope(o.scope),this.k=o.katavorio,o.katavorio},_=function(){return!0},k=function(){return!1},d=function(i,o,t,p){this._class=t.draggable;var v=A.apply(this,arguments);this.rightButtonCanDrag=this.params.rightButtonCanDrag;var F=[0,0],L=null,V=null,G=[0,0],W=!1,lt=[0,0],st=this.params.consumeStartEvent!==!1,it=this.el,rt=this.params.clone;this.params.scroll;var pt=o.multipleDrop!==!1,gt=!1,ut,bt,vt=null,J=[],K=null,$=o.ghostProxyParent,ht,mt,xt,Ot;if(o.ghostProxy===!0?ut=_:o.ghostProxy&&typeof o.ghostProxy=="function"?ut=o.ghostProxy:ut=function(et,Pt){return K&&K.useGhostProxy?K.useGhostProxy(et,Pt):!1},o.makeGhostProxy?bt=o.makeGhostProxy:bt=function(et){return K&&K.makeGhostProxy?K.makeGhostProxy(et):et.cloneNode(!0)},o.selector){var Rt=i.getAttribute("katavorio-draggable");Rt==null&&(Rt=""+new Date().getTime(),i.setAttribute("katavorio-draggable",Rt)),J.push(o)}var Ht=o.snapThreshold,Bt=function(et,Pt,Ct,_t,St){var At=Math.floor(et[0]/Pt),r=Pt*At,x=r+Pt,m=Math.abs(et[0]-r)<=_t?r:Math.abs(x-et[0])<=_t?x:et[0],T=Math.floor(et[1]/Ct),H=Ct*T,q=H+Ct,nt=Math.abs(et[1]-H)<=St?H:Math.abs(q-et[1])<=St?q:et[1];return[m,nt]};this.posses=[],this.posseRoles={},this.toGrid=function(et){if(this.params.grid==null)return et;var Pt=this.params.grid?this.params.grid[0]/2:Ht||y/2,Ct=this.params.grid?this.params.grid[1]/2:Ht||D/2;return Bt(et,this.params.grid[0],this.params.grid[1],Pt,Ct)},this.snap=function(et,Pt){if(it!=null){et=et||(this.params.grid?this.params.grid[0]:y),Pt=Pt||(this.params.grid?this.params.grid[1]:D);var Ct=this.params.getPosition(it),_t=this.params.grid?this.params.grid[0]/2:Ht,St=this.params.grid?this.params.grid[1]/2:Ht,At=Bt(Ct,et,Pt,_t,St);return this.params.setPosition(it,At),At}},this.setUseGhostProxy=function(et){ut=et?_:k};var Yt,le=function(et){return o.allowNegative===!1?[Math.max(0,et[0]),Math.max(0,et[1])]:et},ue=(function(et){Yt=typeof et=="function"?et:et?(function(Pt,Ct,_t,St){return le([Math.max(0,Math.min(_t.w-St[0],Pt[0])),Math.max(0,Math.min(_t.h-St[1],Pt[1]))])}).bind(this):function(Pt){return le(Pt)}}).bind(this);ue(typeof this.params.constrain=="function"?this.params.constrain:this.params.constrain||this.params.containment),this.setConstrain=function(et){ue(et)};var he=function(et,Pt,Ct,_t){return K!=null&&K.constrain&&typeof K.constrain=="function"?K.constrain(et,Pt,Ct,_t):Yt(et,Pt,Ct,_t)},Xt;this.setRevert=function(et){Xt=et},this.params.revert&&(Xt=this.params.revert);var ne=function(et){return typeof et=="function"?(et._katavorioId=R(),et._katavorioId):et},Vt={},ie=function(et){for(var Pt in Vt){var Ct=Vt[Pt],_t=Ct[0](et);if(Ct[1]&&(_t=!_t),!_t)return!1}return!0},se=this.setFilter=function(et,Pt){if(et){var Ct=ne(et);Vt[Ct]=[function(_t){var St=_t.srcElement||_t.target,At;return Z(et)?At=h(St,et,i):typeof et=="function"&&(At=et(_t,i)),At},Pt!==!1]}};this.addFilter=se,this.removeFilter=function(et){var Pt=typeof et=="function"?et._katavorioId:et;delete Vt[Pt]},this.clearAllFilters=function(){Vt={}},this.canDrag=this.params.canDrag||w;var re,kt=[],Wt=[];this.addSelector=function(et){et.selector&&J.push(et)},this.downListener=(function(et){if(!et.defaultPrevented){var Pt=this.rightButtonCanDrag||et.which!==3&&et.button!==2;if(Pt&&this.isEnabled()&&this.canDrag()){var Ct=ie(et)&&u(et,this.el,this.k);if(Ct){if(K=null,vt=null,J.length>0){var _t=l(J,this.el,et.target||et.srcElement);if(_t!=null&&(K=_t[0],vt=_t[1]),vt==null)return}else vt=this.el;if(rt)if(it=vt.cloneNode(!0),this.params.addClass(it,I.clonedDrag),it.setAttribute("id",null),it.style.position="absolute",this.params.parent!=null){var St=this.params.getPosition(this.el);it.style.left=St[0]+"px",it.style.top=St[1]+"px",this.params.parent.appendChild(it)}else{var At=tt(vt);it.style.left=At.left+"px",it.style.top=At.top+"px",document.body.appendChild(it)}else it=vt;st&&b(et),F=g(et),it&&it.parentNode&&(lt=[it.parentNode.scrollLeft,it.parentNode.scrollTop]),this.params.bind(document,"mousemove",this.moveListener),this.params.bind(document,"mouseup",this.upListener),v.markSelection(this),v.markPosses(this),this.params.addClass(document.body,t.noSelect),zt("beforeStart",{el:this.el,pos:L,e:et,drag:this})}else this.params.consumeFilteredEvents&&b(et)}}}).bind(this),this.moveListener=(function(et){if(F){if(!W){var Pt=zt("start",{el:this.el,pos:L,e:et,drag:this});if(Pt!==!1){if(!F)return;this.mark(!0),W=!0}else this.abort()}if(F){Wt.length=0;var Ct=g(et),_t=Ct[0]-F[0],St=Ct[1]-F[1],At=this.params.ignoreZoom?1:v.getZoom();it&&it.parentNode&&(_t+=it.parentNode.scrollLeft-lt[0],St+=it.parentNode.scrollTop-lt[1]),_t/=At,St/=At,this.moveBy(_t,St,et),v.updateSelection(_t,St,this),v.updatePosses(_t,St,this)}}}).bind(this),this.upListener=(function(et){F&&(F=null,this.params.unbind(document,"mousemove",this.moveListener),this.params.unbind(document,"mouseup",this.upListener),this.params.removeClass(document.body,t.noSelect),this.unmark(et),v.unmarkSelection(this,et),v.unmarkPosses(this,et),this.stop(et),v.notifyPosseDragStop(this,et),W=!1,Wt.length=0,rt?(it&&it.parentNode&&it.parentNode.removeChild(it),it=null):Xt&&Xt(it,this.params.getPosition(it))===!0&&(this.params.setPosition(it,L),zt("revert",it)))}).bind(this),this.getFilters=function(){return Vt},this.abort=function(){F!=null&&this.upListener()},this.getDragElement=function(et){return et?vt||this.el:it||this.el};var It={start:[],drag:[],stop:[],over:[],out:[],beforeStart:[],revert:[]};o.events.start&&It.start.push(o.events.start),o.events.beforeStart&&It.beforeStart.push(o.events.beforeStart),o.events.stop&&It.stop.push(o.events.stop),o.events.drag&&It.drag.push(o.events.drag),o.events.revert&&It.revert.push(o.events.revert),this.on=function(et,Pt){It[et]&&It[et].push(Pt)},this.off=function(et,Pt){if(It[et]){for(var Ct=[],_t=0;_t<It[et].length;_t++)It[et][_t]!==Pt&&Ct.push(It[et][_t]);It[et]=Ct}};var zt=function(et,Pt){var Ct=null;if(K&&K[et])Ct=K[et](Pt);else if(It[et])for(var _t=0;_t<It[et].length;_t++)try{var St=It[et][_t](Pt);St!=null&&(Ct=St)}catch{}return Ct};this.notifyStart=function(et){zt("start",{el:this.el,pos:this.params.getPosition(it),e:et,drag:this})},this.stop=function(et,Pt){if(Pt||W){var Ct=[],_t=v.getSelection(),St=this.params.getPosition(it);if(_t.length>0)for(var At=0;At<_t.length;At++){var r=this.params.getPosition(_t[At].el);Ct.push([_t[At].el,{left:r[0],top:r[1]},_t[At]])}else Ct.push([it,{left:St[0],top:St[1]},this]);zt("stop",{el:it,pos:$t||St,finalPos:St,e:et,drag:this,selection:Ct})}},this.mark=function(et){L=this.params.getPosition(it),V=this.params.getPosition(it,!0),G=[V[0]-L[0],V[1]-L[1]],this.size=this.params.getSize(it),kt=v.getMatchingDroppables(this),c(kt,!0,!1,this),this.params.addClass(it,this.params.dragClass||t.drag);var Pt;this.params.getConstrainingRectangle?Pt=this.params.getConstrainingRectangle(it):Pt=this.params.getSize(it.parentNode),re={w:Pt[0],h:Pt[1]},xt=0,Ot=0,et&&v.notifySelectionDragStart(this)};var $t;this.unmark=function(et,Pt){if(c(kt,!1,!0,this),gt&&ut(vt,it)?($t=[it.offsetLeft-xt,it.offsetTop-Ot],it.parentNode.removeChild(it),it=vt):$t=null,this.params.removeClass(it,this.params.dragClass||t.drag),kt.length=0,gt=!1,!Pt){Wt.length>0&&$t&&o.setPosition(vt,$t),Wt.sort(B);for(var Ct=0;Ct<Wt.length;Ct++){var _t=Wt[Ct].drop(this,et);if(_t===!0)break}}},this.moveBy=function(et,Pt,Ct){Wt.length=0;var _t=this.toGrid([L[0]+et,L[1]+Pt]),St=he(_t,it,re,this.size);if(ut(this.el,it))if(_t[0]!==St[0]||_t[1]!==St[1]){if(!gt){var At=bt(vt);o.addClass(At,I.ghostProxy),$?($.appendChild(At),ht=o.getPosition(vt.parentNode,!0),mt=o.getPosition(o.ghostProxyParent,!0),xt=ht[0]-mt[0],Ot=ht[1]-mt[1]):vt.parentNode.appendChild(At),it=At,gt=!0}St=_t}else gt&&(it.parentNode.removeChild(it),it=vt,gt=!1,ht=null,mt=null,xt=0,Ot=0);var r={x:St[0],y:St[1],w:this.size[0],h:this.size[1]},x={x:r.x+G[0],y:r.y+G[1],w:r.w,h:r.h},m=null;this.params.setPosition(it,[St[0]+xt,St[1]+Ot]);for(var T=0;T<kt.length;T++){var H={x:kt[T].pagePosition[0],y:kt[T].pagePosition[1],w:kt[T].size[0],h:kt[T].size[1]};this.params.intersects(x,H)&&(pt||m==null||m===kt[T].el)&&kt[T].canDrop(this)?(m||(m=kt[T].el),Wt.push(kt[T]),kt[T].setHover(this,!0,Ct)):kt[T].isHover()&&kt[T].setHover(this,!1,Ct)}zt("drag",{el:this.el,pos:St,e:Ct,drag:this})},this.destroy=function(){this.params.unbind(this.el,"mousedown",this.downListener),this.params.unbind(document,"mousemove",this.moveListener),this.params.unbind(document,"mouseup",this.upListener),this.downListener=null,this.upListener=null,this.moveListener=null},this.params.bind(this.el,"mousedown",this.downListener),this.params.handle?se(this.params.handle,!1):se(this.params.filter,this.params.filterExclude)},S=function(i,o,t,p){this._class=t.droppable,this.params=o||{},this.rank=o.rank||0,this._activeClass=this.params.activeClass||t.active,this._hoverClass=this.params.hoverClass||t.hover,A.apply(this,arguments);var v=!1;this.allowLoopback=this.params.allowLoopback!==!1,this.setActive=function(F){this.params[F?"addClass":"removeClass"](this.el,this._activeClass)},this.updatePosition=function(){this.position=this.params.getPosition(this.el),this.pagePosition=this.params.getPosition(this.el,!0),this.size=this.params.getSize(this.el)},this.canDrop=this.params.canDrop||function(F){return!0},this.isHover=function(){return v},this.setHover=function(F,L,V){(L||this.el._katavorioDragHover==null||this.el._katavorioDragHover===F.el._katavorio)&&(this.params[L?"addClass":"removeClass"](this.el,this._hoverClass),this.el._katavorioDragHover=L?F.el._katavorio:null,v!==L&&this.params.events[L?"over":"out"]({el:this.el,e:V,drag:F,drop:this}),v=L)},this.drop=function(F,L){return this.params.events.drop({drag:F,e:L,drop:this})},this.destroy=function(){this._class=null,this._activeClass=null,this._hoverClass=null,v=null}},R=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(i){var o=Math.random()*16|0,t=i==="x"?o:o&3|8;return t.toString(16)})},B=function(i,o){return i.rank<o.rank?1:i.rank>o.rank?-1:0},Y=function(i){return i==null||(i=typeof i=="string"||i.constructor===String?document.getElementById(i):i,i==null)?null:(i._katavorio=i._katavorio||R(),i)};z.Katavorio=function(i){var o=[],t={};this._dragsByScope={},this._dropsByScope={};var p=1,v=function(J,K){a(J,function($){for(var ht=0;ht<$.scopes.length;ht++)K[$.scopes[ht]]=K[$.scopes[ht]]||[],K[$.scopes[ht]].push($)})},F=function(J,K){var $=0;return a(J,function(ht){for(var mt=0;mt<ht.scopes.length;mt++)if(K[ht.scopes[mt]]){var xt=i.indexOf(K[ht.scopes[mt]],ht);xt!==-1&&(K[ht.scopes[mt]].splice(xt,1),$++)}}),$>0};this.getMatchingDroppables=function(J){for(var K=[],$={},ht=0;ht<J.scopes.length;ht++){var mt=this._dropsByScope[J.scopes[ht]];if(mt)for(var xt=0;xt<mt.length;xt++)mt[xt].canDrop(J)&&!$[mt[xt].uuid]&&(mt[xt].allowLoopback||mt[xt].el!==J.el)&&($[mt[xt].uuid]=!0,K.push(mt[xt]))}return K.sort(B),K};var L=(function(J){J=J||{};var K={events:{}},$;for($ in i)K[$]=i[$];for($ in J)K[$]=J[$];for($=0;$<N.length;$++)K.events[N[$]]=J[N[$]]||P;return K.katavorio=this,K}).bind(this),V=(function(J,K){for(var $=0;$<N.length;$++)K[N[$]]&&J.on(N[$],K[N[$]])}).bind(this),G={},W=i.css||{},lt=i.scope||U;for(var st in I)G[st]=I[st];for(var st in W)G[st]=W[st];var it=i.inputFilterSelector||C;this.getInputFilterSelector=function(){return it},this.setInputFilterSelector=function(J){return it=J,this},this.draggable=function(J,K){var $=[];return a(J,(function(ht){if(ht=Y(ht),ht!=null)if(ht._katavorioDrag==null){var mt=L(K);ht._katavorioDrag=new d(ht,mt,G,lt),v(ht._katavorioDrag,this._dragsByScope),$.push(ht._katavorioDrag),i.addClass(ht,mt.selector?G.delegatedDraggable:G.draggable)}else V(ht._katavorioDrag,K)}).bind(this)),$},this.droppable=function(J,K){var $=[];return a(J,(function(ht){if(ht=Y(ht),ht!=null){var mt=new S(ht,L(K),G,lt);ht._katavorioDrop=ht._katavorioDrop||[],ht._katavorioDrop.push(mt),v(mt,this._dropsByScope),$.push(mt),i.addClass(ht,G.droppable)}}).bind(this)),$},this.select=function(J){return a(J,function(){var K=Y(this);K&&K._katavorioDrag&&(t[K._katavorio]||(o.push(K._katavorioDrag),t[K._katavorio]=[K,o.length-1],i.addClass(K,G.selected)))}),this},this.deselect=function(J){return a(J,function(){var K=Y(this);if(K&&K._katavorio){var $=t[K._katavorio];if($){for(var ht=[],mt=0;mt<o.length;mt++)o[mt].el!==K&&ht.push(o[mt]);o=ht,delete t[K._katavorio],i.removeClass(K,G.selected)}}}),this},this.deselectAll=function(){for(var J in t){var K=t[J];i.removeClass(K[0],G.selected)}o.length=0,t={}},this.markSelection=function(J){n(o,function(K){K.mark()},J)},this.markPosses=function(J){J.posses&&a(J.posses,function(K){J.posseRoles[K]&&bt[K]&&n(bt[K].members,function($){$.mark()},J)})},this.unmarkSelection=function(J,K){n(o,function($){$.unmark(K)},J)},this.unmarkPosses=function(J,K){J.posses&&a(J.posses,function($){J.posseRoles[$]&&bt[$]&&n(bt[$].members,function(ht){ht.unmark(K,!0)},J)})},this.getSelection=function(){return o.slice(0)},this.updateSelection=function(J,K,$){n(o,function(ht){ht.moveBy(J,K)},$)};var rt=function(J,K){K.posses&&a(K.posses,function($){K.posseRoles[$]&&bt[$]&&n(bt[$].members,function(ht){J(ht)},K)})};this.updatePosses=function(J,K,$){rt(function(ht){ht.moveBy(J,K)},$)},this.notifyPosseDragStop=function(J,K){rt(function($){$.stop(K,!0)},J)},this.notifySelectionDragStop=function(J,K){n(o,function($){$.stop(K,!0)},J)},this.notifySelectionDragStart=function(J,K){n(o,function($){$.notifyStart(K)},J)},this.setZoom=function(J){p=J},this.getZoom=function(){return p};var pt=function(J,K,$,ht){a(J,function(mt){F(mt,$),mt[ht](K),v(mt,$)})};a(["set","add","remove","toggle"],(function(J){this[J+"Scope"]=(function(K,$){pt(K._katavorioDrag,$,this._dragsByScope,J+"Scope"),pt(K._katavorioDrop,$,this._dropsByScope,J+"Scope")}).bind(this),this[J+"DragScope"]=(function(K,$){pt(K.constructor===d?K:K._katavorioDrag,$,this._dragsByScope,J+"Scope")}).bind(this),this[J+"DropScope"]=(function(K,$){pt(K.constructor===S?K:K._katavorioDrop,$,this._dropsByScope,J+"Scope")}).bind(this)}).bind(this)),this.snapToGrid=function(J,K){for(var $ in this._dragsByScope)n(this._dragsByScope[$],function(ht){ht.snap(J,K)})},this.getDragsForScope=function(J){return this._dragsByScope[J]},this.getDropsForScope=function(J){return this._dropsByScope[J]};var gt=function(J,K,$){if(J=Y(J),J[K]){var ht=o.indexOf(J[K]);ht>=0&&o.splice(ht,1),F(J[K],$)&&a(J[K],function(mt){mt.destroy()}),delete J[K]}},ut=function(J,K,$,ht){J=Y(J),J[K]&&J[K].off($,ht)};this.elementRemoved=function(J){J._katavorioDrag&&this.destroyDraggable(J),J._katavorioDrop&&this.destroyDroppable(J)},this.destroyDraggable=function(J,K,$){arguments.length===1?gt(J,"_katavorioDrag",this._dragsByScope):ut(J,"_katavorioDrag",K,$)},this.destroyDroppable=function(J,K,$){arguments.length===1?gt(J,"_katavorioDrop",this._dropsByScope):ut(J,"_katavorioDrop",K,$)},this.reset=function(){this._dragsByScope={},this._dropsByScope={},o=[],t={},bt={}};var bt={},vt=function(J,K,$){var ht=Z(K)?K:K.id,mt=Z(K)?!0:K.active!==!1,xt=bt[ht]||function(){var Ot={name:ht,members:[]};return bt[ht]=Ot,Ot}();return a(J,function(Ot){if(Ot._katavorioDrag){if($&&Ot._katavorioDrag.posseRoles[xt.name]!=null)return;f(xt.members,Ot._katavorioDrag),f(Ot._katavorioDrag.posses,xt.name),Ot._katavorioDrag.posseRoles[xt.name]=mt}}),xt};this.addToPosse=function(J,K){for(var $=[],ht=1;ht<arguments.length;ht++)$.push(vt(J,arguments[ht]));return $.length===1?$[0]:$},this.setPosse=function(J,K){for(var $=[],ht=1;ht<arguments.length;ht++)$.push(vt(J,arguments[ht],!0).name);return a(J,(function(mt){if(mt._katavorioDrag){var xt=Q(mt._katavorioDrag.posses,$),Ot=[];Array.prototype.push.apply(Ot,mt._katavorioDrag.posses);for(var Rt=0;Rt<xt.length;Rt++)this.removeFromPosse(mt,xt[Rt])}}).bind(this)),$.length===1?$[0]:$},this.removeFromPosse=function(J,K){if(arguments.length<2)throw new TypeError("No posse id provided for remove operation");for(var $=1;$<arguments.length;$++)K=arguments[$],a(J,function(ht){if(ht._katavorioDrag&&ht._katavorioDrag.posses){var mt=ht._katavorioDrag;a(K,function(xt){X(bt[xt].members,mt),X(mt.posses,xt),delete mt.posseRoles[xt]})}})},this.removeFromAllPosses=function(J){a(J,function(K){if(K._katavorioDrag&&K._katavorioDrag.posses){var $=K._katavorioDrag;a($.posses,function(ht){X(bt[ht].members,$)}),$.posses.length=0,$.posseRoles={}}})},this.setPosseState=function(J,K,$){var ht=bt[K];ht&&a(J,function(mt){mt._katavorioDrag&&mt._katavorioDrag.posses&&(mt._katavorioDrag.posseRoles[ht.name]=$)})}},z.Katavorio.version="1.0.0",ot.Katavorio=z.Katavorio}).call(typeof window<"u"?window:jt),(function(){var z=this;z.jsPlumbUtil=z.jsPlumbUtil||{};var f=z.jsPlumbUtil;ot.jsPlumbUtil=f;function X(i){return Object.prototype.toString.call(i)==="[object Array]"}f.isArray=X;function Q(i){return Object.prototype.toString.call(i)==="[object Number]"}f.isNumber=Q;function Z(i){return typeof i=="string"}f.isString=Z;function tt(i){return typeof i=="boolean"}f.isBoolean=tt;function h(i){return i==null}f.isNull=h;function O(i){return i==null?!1:Object.prototype.toString.call(i)==="[object Object]"}f.isObject=O;function l(i){return Object.prototype.toString.call(i)==="[object Date]"}f.isDate=l;function s(i){return Object.prototype.toString.call(i)==="[object Function]"}f.isFunction=s;function y(i){return s(i)&&i.name!=null&&i.name.length>0}f.isNamedFunction=y;function D(i){for(var o in i)if(i.hasOwnProperty(o))return!1;return!0}f.isEmpty=D;function M(i){if(Z(i))return""+i;if(tt(i))return!!i;if(l(i))return new Date(i.getTime());if(s(i))return i;if(X(i)){for(var o=[],t=0;t<i.length;t++)o.push(M(i[t]));return o}else if(O(i)){var p={};for(var v in i)p[v]=M(i[v]);return p}else return i}f.clone=M;function E(i,o,t,p){var v={},F,L,V={};for(t=t||[],p=p||[],L=0;L<t.length;L++)v[t[L]]=!0;for(L=0;L<p.length;L++)V[p[L]]=!0;var G=M(i);for(L in o)if(G[L]==null||V[L])G[L]=o[L];else if(Z(o[L])||tt(o[L]))v[L]?(F=[],F.push.apply(F,X(G[L])?G[L]:[G[L]]),F.push.apply(F,tt(o[L])?o[L]:[o[L]]),G[L]=F):G[L]=o[L];else if(X(o[L]))F=[],X(G[L])&&F.push.apply(F,G[L]),F.push.apply(F,o[L]),G[L]=F;else if(O(o[L])){O(G[L])||(G[L]={});for(var W in o[L])G[L][W]=o[L][W]}return G}f.merge=E;function g(i,o,t){if(i!=null){var p=i,v=p;return o.replace(/([^\.])+/g,function(F,L,V,G){var W=F.match(/([^\[0-9]+){1}(\[)([0-9+])/),lt=V+F.length>=G.length,st=function(){return v[W[1]]||function(){return v[W[1]]=[],v[W[1]]}()};if(lt)W?st()[W[3]]=t:v[F]=t;else if(W){var it=st();v=it[W[3]]||function(){return it[W[3]]={},it[W[3]]}()}else v=v[F]||function(){return v[F]={},v[F]}();return""}),i}}f.replace=g;function e(i,o,t){for(var p=0;p<t.length;p++){var v=t[p][0][t[p][1]].apply(t[p][0],t[p][2]);if(v===o)return v}return i}f.functionChain=e;function j(i,o,t,p){var v=function(L){var V=L.match(/(\${.*?})/g);if(V!=null)for(var G=0;G<V.length;G++){var W=o[V[G].substring(2,V[G].length-1)]||"";W!=null&&(L=L.replace(V[G],W))}return L},F=function(L){if(L!=null){if(Z(L))return v(L);if(s(L)&&!p&&(t==null||(L.name||"").indexOf(t)===0))return L(o);if(X(L)){for(var V=[],G=0;G<L.length;G++)V.push(F(L[G]));return V}else if(O(L)){var W={};for(var lt in L)W[lt]=F(L[lt]);return W}else return L}};return F(i)}f.populate=j;function I(i,o){if(i){for(var t=0;t<i.length;t++)if(o(i[t]))return t}return-1}f.findWithFunction=I;function U(i,o){var t=I(i,o);return t>-1&&i.splice(t,1),t!==-1}f.removeWithFunction=U;function N(i,o){var t=i.indexOf(o);return t>-1&&i.splice(t,1),t!==-1}f.remove=N;function P(i,o,t){I(i,t)===-1&&i.push(o)}f.addWithFunction=P;function w(i,o,t,p){var v=i[o];return v==null&&(v=[],i[o]=v),v[p?"unshift":"push"](t),v}f.addToList=w;function n(i,o,t){return i.indexOf(o)===-1?(t?i.unshift(o):i.push(o),!0):!1}f.suggest=n;function c(i,o,t){var p;o=X(o)?o:[o];var v=function(G){for(var W=G.__proto__;W!=null;)if(W.prototype!=null){for(var lt in W.prototype)W.prototype.hasOwnProperty(lt)&&!i.prototype.hasOwnProperty(lt)&&(i.prototype[lt]=W.prototype[lt]);W=W.prototype.__proto__}else W=null};for(p=0;p<o.length;p++){for(var F in o[p].prototype)o[p].prototype.hasOwnProperty(F)&&!i.prototype.hasOwnProperty(F)&&(i.prototype[F]=o[p].prototype[F]);v(o[p])}var L=function(G,W){return function(){for(p=0;p<o.length;p++)o[p].prototype[G]&&o[p].prototype[G].apply(this,arguments);return W.apply(this,arguments)}},V=function(G){for(var W in G)i.prototype[W]=L(W,G[W])};if(arguments.length>2)for(p=2;p<arguments.length;p++)V(arguments[p]);return i}f.extend=c;for(var a=[],b=0;b<256;b++)a[b]=(b<16?"0":"")+b.toString(16);function C(){var i=Math.random()*4294967295|0,o=Math.random()*4294967295|0,t=Math.random()*4294967295|0,p=Math.random()*4294967295|0;return a[i&255]+a[i>>8&255]+a[i>>16&255]+a[i>>24&255]+"-"+a[o&255]+a[o>>8&255]+"-"+a[o>>16&15|64]+a[o>>24&255]+"-"+a[t&63|128]+a[t>>8&255]+"-"+a[t>>16&255]+a[t>>24&255]+a[p&255]+a[p>>8&255]+a[p>>16&255]+a[p>>24&255]}f.uuid=C;function u(i){if(i==null)return null;for(var o=i.replace(/^\s\s*/,""),t=/\s/,p=o.length;t.test(o.charAt(--p)););return o.slice(0,p+1)}f.fastTrim=u;function A(i,o){i=i.length==null||typeof i=="string"?[i]:i;for(var t=0;t<i.length;t++)o(i[t])}f.each=A;function _(i,o){for(var t=[],p=0;p<i.length;p++)t.push(o(i[p]));return t}f.map=_;function k(i,o,t){t=t||"parent";var p=function(G){return G?o[G]:null},v=function(G){return G?p(G[t]):null},F=function(G,W){if(G==null)return W;var lt=["anchor","anchors","cssClass","connector","paintStyle","hoverPaintStyle","endpoint","endpoints"];W.mergeStrategy==="override"&&Array.prototype.push.apply(lt,["events","overlays"]);var st=E(G,W,[],lt);return F(v(G),st)},L=function(G){if(G==null)return{};if(typeof G=="string")return p(G);if(G.length){for(var W=!1,lt=0,st=void 0;!W&&lt<G.length;)st=L(G[lt]),st?W=!0:lt++;return st}},V=L(i);return V?F(v(V),V):{}}f.mergeWithParents=k,f.logEnabled=!0;function d(){if(f.logEnabled&&typeof console<"u")try{var i=arguments[arguments.length-1];console.log(i)}catch{}}f.log=d;function S(i,o,t){return function(){var p=null;try{o!=null&&(p=o.apply(this,arguments))}catch(v){d("jsPlumb function failed : "+v)}if(i!=null&&(t==null||p!==t))try{p=i.apply(this,arguments)}catch(v){d("wrapped function failed : "+v)}return p}}f.wrap=S;var R=function(){function i(){var o=this;this._listeners={},this.eventsSuspended=!1,this.tick=!1,this.eventsToDieOn={ready:!0},this.queue=[],this.bind=function(t,p,v){var F=function(V){w(o._listeners,V,p,v),p.__jsPlumb=p.__jsPlumb||{},p.__jsPlumb[C()]=V};if(typeof t=="string")F(t);else if(t.length!=null)for(var L=0;L<t.length;L++)F(t[L]);return o},this.fire=function(t,p,v){if(this.tick)this.queue.unshift(arguments);else{if(this.tick=!0,!this.eventsSuspended&&this._listeners[t]){var F=this._listeners[t].length,L=0,V=!1,G=null;if(!this.shouldFireEvent||this.shouldFireEvent(t,p,v))for(;!V&&L<F&&G!==!1;){if(this.eventsToDieOn[t])this._listeners[t][L].apply(this,[p,v]);else try{G=this._listeners[t][L].apply(this,[p,v])}catch(W){d("jsPlumb: fire failed for event "+t+" : "+W)}L++,(this._listeners==null||this._listeners[t]==null)&&(V=!0)}}this.tick=!1,this._drain()}return this},this._drain=function(){var t=o.queue.pop();t&&o.fire.apply(o,t)},this.unbind=function(t,p){if(arguments.length===0)this._listeners={};else if(arguments.length===1){if(typeof t=="string")delete this._listeners[t];else if(t.__jsPlumb){var v=void 0;for(var F in t.__jsPlumb)v=t.__jsPlumb[F],N(this._listeners[v]||[],t)}}else arguments.length===2&&N(this._listeners[t]||[],p);return this},this.getListener=function(t){return o._listeners[t]},this.setSuspendEvents=function(t){o.eventsSuspended=t},this.isSuspendEvents=function(){return o.eventsSuspended},this.silently=function(t){o.setSuspendEvents(!0);try{t()}catch(p){d("Cannot execute silent function "+p)}o.setSuspendEvents(!1)},this.cleanupListeners=function(){for(var t in o._listeners)o._listeners[t]=null}}return i}();f.EventGenerator=R;function B(i,o,t){var p=[i[0]-o[0],i[1]-o[1]],v=Math.cos(t/360*Math.PI*2),F=Math.sin(t/360*Math.PI*2);return[p[0]*v-p[1]*F+o[0],p[1]*v+p[0]*F+o[1],v,F]}f.rotatePoint=B;function Y(i,o){var t=B(i,[0,0],o);return[Math.round(t[0]),Math.round(t[1])]}f.rotateAnchorOrientation=Y}).call(typeof window<"u"?window:jt),(function(){var z=this;z.jsPlumbUtil.matchesSelector=function(f,X,Q){Q=Q||f.parentNode;for(var Z=Q.querySelectorAll(X),tt=0;tt<Z.length;tt++)if(Z[tt]===f)return!0;return!1},z.jsPlumbUtil.consume=function(f,X){f.stopPropagation?f.stopPropagation():f.returnValue=!1,!X&&f.preventDefault&&f.preventDefault()},z.jsPlumbUtil.sizeElement=function(f,X,Q,Z,tt){f&&(f.style.height=tt+"px",f.height=tt,f.style.width=Z+"px",f.width=Z,f.style.left=X+"px",f.style.top=Q+"px")}}).call(typeof window<"u"?window:jt),(function(){var z={deriveAnchor:function(Z,tt,h,O){return{top:["TopRight","TopLeft"],bottom:["BottomRight","BottomLeft"]}[Z][tt]}},f=this,X=function(Z,tt){this.count=0,this.instance=Z,this.lists={},this.options=tt||{},this.instance.addList=function(h,O){return this.listManager.addList(h,O)},this.instance.removeList=function(h){this.listManager.removeList(h)},this.instance.bind("manageElement",(function(h){for(var O=this.instance.getSelector(h.el,"[jtk-scrollable-list]"),l=0;l<O.length;l++)this.addList(O[l])}).bind(this)),this.instance.bind("unmanageElement",function(h){this.removeList(h.el)}),this.instance.bind("connection",(function(h,O){O==null&&(this._maybeUpdateParentList(h.source),this._maybeUpdateParentList(h.target))}).bind(this))};f.jsPlumbListManager=X,X.prototype={addList:function(Z,tt){var h=this.instance.extend({},z);this.instance.extend(h,this.options),tt=this.instance.extend(h,tt||{});var O=[this.instance.getInstanceIndex(),this.count++].join("_");this.lists[O]=new Q(this.instance,Z,tt,O)},removeList:function(Z){var tt=this.lists[Z._jsPlumbList];tt&&(tt.destroy(),delete this.lists[Z._jsPlumbList])},_maybeUpdateParentList:function(Z){for(var tt=Z.parentNode,h=this.instance.getContainer();tt!=null&&tt!==h;){if(tt._jsPlumbList!=null&&this.lists[tt._jsPlumbList]!=null){tt._jsPlumbScrollHandler();return}tt=tt.parentNode}}};var Q=function(Z,tt,h,O){tt._jsPlumbList=O;function l(M,E,g,e){return h.anchor?h.anchor:h.deriveAnchor(M,E,g,e)}function s(M,E,g,e){return h.deriveEndpoint?h.deriveEndpoint(M,E,g,e):h.endpoint?h.endpoint:g.type}function y(M){for(var E=M.parentNode,g=Z.getContainer();E!=null&&E!==g;){if(Z.hasClass(E,"jtk-managed")){Z.recalculateOffsets(E);return}E=E.parentNode}}var D=function(M){for(var E=Z.getSelector(tt,".jtk-managed"),g=Z.getId(tt),e=0;e<E.length;e++){if(E[e].offsetTop<tt.scrollTop)E[e]._jsPlumbProxies||(E[e]._jsPlumbProxies=E[e]._jsPlumbProxies||[],Z.select({source:E[e]}).each(function(I){Z.proxyConnection(I,0,tt,g,function(){return s("top",0,I.endpoints[0],I)},function(){return l("top",0,I.endpoints[0],I)}),E[e]._jsPlumbProxies.push([I,0])}),Z.select({target:E[e]}).each(function(I){Z.proxyConnection(I,1,tt,g,function(){return s("top",1,I.endpoints[1],I)},function(){return l("top",1,I.endpoints[1],I)}),E[e]._jsPlumbProxies.push([I,1])}));else if(E[e].offsetTop+E[e].offsetHeight>tt.scrollTop+tt.offsetHeight)E[e]._jsPlumbProxies||(E[e]._jsPlumbProxies=E[e]._jsPlumbProxies||[],Z.select({source:E[e]}).each(function(I){Z.proxyConnection(I,0,tt,g,function(){return s("bottom",0,I.endpoints[0],I)},function(){return l("bottom",0,I.endpoints[0],I)}),E[e]._jsPlumbProxies.push([I,0])}),Z.select({target:E[e]}).each(function(I){Z.proxyConnection(I,1,tt,g,function(){return s("bottom",1,I.endpoints[1],I)},function(){return l("bottom",1,I.endpoints[1],I)}),E[e]._jsPlumbProxies.push([I,1])}));else if(E[e]._jsPlumbProxies){for(var j=0;j<E[e]._jsPlumbProxies.length;j++)Z.unproxyConnection(E[e]._jsPlumbProxies[j][0],E[e]._jsPlumbProxies[j][1],g);delete E[e]._jsPlumbProxies}Z.revalidate(E[e])}y(tt)};Z.setAttribute(tt,"jtk-scrollable-list","true"),tt._jsPlumbScrollHandler=D,Z.on(tt,"scroll",D),D(),this.destroy=function(){Z.off(tt,"scroll",D),delete tt._jsPlumbScrollHandler;for(var M=Z.getSelector(tt,".jtk-managed"),E=Z.getId(tt),g=0;g<M.length;g++)if(M[g]._jsPlumbProxies){for(var e=0;e<M[g]._jsPlumbProxies.length;e++)Z.unproxyConnection(M[g]._jsPlumbProxies[e][0],M[g]._jsPlumbProxies[e][1],E);delete M[g]._jsPlumbProxies}}}}).call(typeof window<"u"?window:jt),(function(){var z=this,f=z.jsPlumbUtil,X=function(g){if(g._jsPlumb.paintStyle&&g._jsPlumb.hoverPaintStyle){var e={};E.extend(e,g._jsPlumb.paintStyle),E.extend(e,g._jsPlumb.hoverPaintStyle),delete g._jsPlumb.hoverPaintStyle,e.gradient&&g._jsPlumb.paintStyle.fill&&delete e.gradient,g._jsPlumb.hoverPaintStyle=e}},Q=["tap","dbltap","click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","contextmenu"],Z=function(g,e,j,I){var U=g.getAttachedElements();if(U)for(var N=0,P=U.length;N<P;N++)(!I||I!==U[N])&&U[N].setHover(e,!0,j)},tt=function(g){return g==null?null:g.split(" ")},h=function(g,e,j){for(var I in e)g[I]=j},O=function(g,e,j){if(g.getDefaultType){var I=g.getTypeDescriptor(),U={},N=g.getDefaultType(),P=f.merge({},N);h(U,N,"__default");for(var w=0,n=g._jsPlumb.types.length;w<n;w++){var c=g._jsPlumb.types[w];if(c!=="__default"){var a=g._jsPlumb.instance.getType(c,I);if(a!=null){var b=["anchor","anchors","connector","paintStyle","hoverPaintStyle","endpoint","endpoints","connectorOverlays","connectorStyle","connectorHoverStyle","endpointStyle","endpointHoverStyle"],C=[];a.mergeStrategy==="override"?Array.prototype.push.apply(b,["events","overlays","cssClass"]):C.push("cssClass"),P=f.merge(P,a,C,b),h(U,a,c)}}}e&&(P=f.populate(P,e,"_")),g.applyType(P,j,U),j||g.repaint()}},l=z.jsPlumbUIComponent=function(g){f.EventGenerator.apply(this,arguments);var e=this,j=arguments,I=e.idPrefix,U=I+new Date().getTime();this._jsPlumb={instance:g._jsPlumb,parameters:g.parameters||{},paintStyle:null,hoverPaintStyle:null,paintStyleInUse:null,hover:!1,beforeDetach:g.beforeDetach,beforeDrop:g.beforeDrop,overlayPlacements:[],hoverClass:g.hoverClass||g._jsPlumb.Defaults.HoverClass,types:[],typeCache:{}},this.cacheTypeItem=function(C,u,A){this._jsPlumb.typeCache[A]=this._jsPlumb.typeCache[A]||{},this._jsPlumb.typeCache[A][C]=u},this.getCachedTypeItem=function(C,u){return this._jsPlumb.typeCache[u]?this._jsPlumb.typeCache[u][C]:null},this.getId=function(){return U};var N=g.overlays||[],P={};if(this.defaultOverlayKeys){for(var w=0;w<this.defaultOverlayKeys.length;w++)Array.prototype.push.apply(N,this._jsPlumb.instance.Defaults[this.defaultOverlayKeys[w]]||[]);for(w=0;w<N.length;w++){var n=E.convertToFullOverlaySpec(N[w]);P[n[1].id]=n}}var c={overlays:P,parameters:g.parameters||{},scope:g.scope||this._jsPlumb.instance.getDefaultScope()};if(this.getDefaultType=function(){return c},this.appendToDefaultType=function(C){for(var u in C)c[u]=C[u]},g.events)for(var a in g.events)e.bind(a,g.events[a]);this.clone=(function(){var C=Object.create(this.constructor.prototype);return this.constructor.apply(C,j),C}).bind(this),this.isDetachAllowed=function(C){var u=!0;if(this._jsPlumb.beforeDetach)try{u=this._jsPlumb.beforeDetach(C)}catch(A){f.log("jsPlumb: beforeDetach callback failed",A)}return u},this.isDropAllowed=function(C,u,A,_,k,d,S){var R=this._jsPlumb.instance.checkCondition("beforeDrop",{sourceId:C,targetId:u,scope:A,connection:_,dropEndpoint:k,source:d,target:S});if(this._jsPlumb.beforeDrop)try{R=this._jsPlumb.beforeDrop({sourceId:C,targetId:u,scope:A,connection:_,dropEndpoint:k,source:d,target:S})}catch(B){f.log("jsPlumb: beforeDrop callback failed",B)}return R};var b=[];this.setListenerComponent=function(C){for(var u=0;u<b.length;u++)b[u][3]=C}},s=function(g,e){var j=g._jsPlumb.types[e],I=g._jsPlumb.instance.getType(j,g.getTypeDescriptor());I!=null&&I.cssClass&&g.canvas&&g._jsPlumb.instance.removeClass(g.canvas,I.cssClass)};f.extend(z.jsPlumbUIComponent,f.EventGenerator,{getParameter:function(g){return this._jsPlumb.parameters[g]},setParameter:function(g,e){this._jsPlumb.parameters[g]=e},getParameters:function(){return this._jsPlumb.parameters},setParameters:function(g){this._jsPlumb.parameters=g},getClass:function(){return E.getClass(this.canvas)},hasClass:function(g){return E.hasClass(this.canvas,g)},addClass:function(g){E.addClass(this.canvas,g)},removeClass:function(g){E.removeClass(this.canvas,g)},updateClasses:function(g,e){E.updateClasses(this.canvas,g,e)},setType:function(g,e,j){this.clearTypes(),this._jsPlumb.types=tt(g)||[],O(this,e,j)},getType:function(){return this._jsPlumb.types},reapplyTypes:function(g,e){O(this,g,e)},hasType:function(g){return this._jsPlumb.types.indexOf(g)!==-1},addType:function(g,e,j){var I=tt(g),U=!1;if(I!=null){for(var N=0,P=I.length;N<P;N++)this.hasType(I[N])||(this._jsPlumb.types.push(I[N]),U=!0);U&&O(this,e,j)}},removeType:function(g,e,j){var I=tt(g),U=!1,N=(function(n){var c=this._jsPlumb.types.indexOf(n);return c!==-1?(s(this,c),this._jsPlumb.types.splice(c,1),!0):!1}).bind(this);if(I!=null){for(var P=0,w=I.length;P<w;P++)U=N(I[P])||U;U&&O(this,e,j)}},clearTypes:function(g,e){for(var j=this._jsPlumb.types.length,I=0;I<j;I++)s(this,0),this._jsPlumb.types.splice(0,1);O(this,g,e)},toggleType:function(g,e,j){var I=tt(g);if(I!=null){for(var U=0,N=I.length;U<N;U++){var P=this._jsPlumb.types.indexOf(I[U]);P!==-1?(s(this,P),this._jsPlumb.types.splice(P,1)):this._jsPlumb.types.push(I[U])}O(this,e,j)}},applyType:function(g,e){if(this.setPaintStyle(g.paintStyle,e),this.setHoverPaintStyle(g.hoverPaintStyle,e),g.parameters)for(var j in g.parameters)this.setParameter(j,g.parameters[j]);this._jsPlumb.paintStyleInUse=this.getPaintStyle()},setPaintStyle:function(g,e){this._jsPlumb.paintStyle=g,this._jsPlumb.paintStyleInUse=this._jsPlumb.paintStyle,X(this),e||this.repaint()},getPaintStyle:function(){return this._jsPlumb.paintStyle},setHoverPaintStyle:function(g,e){this._jsPlumb.hoverPaintStyle=g,X(this),e||this.repaint()},getHoverPaintStyle:function(){return this._jsPlumb.hoverPaintStyle},destroy:function(g){(g||this.typeId==null)&&(this.cleanupListeners(),this.clone=null,this._jsPlumb=null)},isHover:function(){return this._jsPlumb.hover},setHover:function(g,e,j){if(this._jsPlumb&&!this._jsPlumb.instance.currentlyDragging&&!this._jsPlumb.instance.isHoverSuspended()){this._jsPlumb.hover=g;var I=g?"addClass":"removeClass";this.canvas!=null&&(this._jsPlumb.instance.hoverClass!=null&&this._jsPlumb.instance[I](this.canvas,this._jsPlumb.instance.hoverClass),this._jsPlumb.hoverClass!=null&&this._jsPlumb.instance[I](this.canvas,this._jsPlumb.hoverClass)),this._jsPlumb.hoverPaintStyle!=null&&(this._jsPlumb.paintStyleInUse=g?this._jsPlumb.hoverPaintStyle:this._jsPlumb.paintStyle,this._jsPlumb.instance.isSuspendDrawing()||(j=j||jsPlumbUtil.uuid(),this.repaint({timestamp:j,recalc:!1}))),this.getAttachedElements&&!e&&Z(this,g,jsPlumbUtil.uuid(),this)}}});var y=0,D=function(){var g=y+1;return y++,g},M=z.jsPlumbInstance=function(g){this.version="2.15.6",this.Defaults={Anchor:"Bottom",Anchors:[null,null],ConnectionsDetachable:!0,ConnectionOverlays:[],Connector:"Bezier",Container:null,DoNotThrowErrors:!1,DragOptions:{},DropOptions:{},Endpoint:"Dot",EndpointOverlays:[],Endpoints:[null,null],EndpointStyle:{fill:"#456"},EndpointStyles:[null,null],EndpointHoverStyle:null,EndpointHoverStyles:[null,null],HoverPaintStyle:null,LabelStyle:{color:"black"},ListStyle:{},LogEnabled:!1,Overlays:[],MaxConnections:1,PaintStyle:{"stroke-width":4,stroke:"#456"},ReattachConnections:!1,RenderMode:"svg",Scope:"jsPlumb_DefaultScope"},g&&E.extend(this.Defaults,g),this.logEnabled=this.Defaults.LogEnabled,this._connectionTypes={},this._endpointTypes={},f.EventGenerator.apply(this);var e=this,j=D(),I=e.bind,U={},N=1,P=function(r){if(r==null)return null;if(r.nodeType===3||r.nodeType===8)return{el:r,text:!0};var x=e.getElement(r);return{el:x,id:f.isString(r)&&x==null?r:ut(x)}};this.getInstanceIndex=function(){return j},this.setZoom=function(r,x){return N=r,e.fire("zoom",N),x&&e.repaintEverything(),!0},this.getZoom=function(){return N};for(var w in this.Defaults)U[w]=this.Defaults[w];var n,c=[];this.unbindContainer=function(){if(n!=null&&c.length>0)for(var r=0;r<c.length;r++)e.off(n,c[r][0],c[r][1])},this.setContainer=function(r){this.unbindContainer(),r=this.getElement(r),this.select().each(function(ft){ft.moveParent(r)}),this.selectEndpoints().each(function(ft){ft.moveParent(r)});var x=n;n=r,c.length=0;for(var m={endpointclick:"endpointClick",endpointdblclick:"endpointDblClick"},T=function(ft,ct,Et){var yt=ct.srcElement||ct.target,Dt=(yt&&yt.parentNode?yt.parentNode._jsPlumb:null)||(yt?yt._jsPlumb:null)||(yt&&yt.parentNode&&yt.parentNode.parentNode?yt.parentNode.parentNode._jsPlumb:null);if(Dt){Dt.fire(ft,Dt,ct);var wt=Et&&m[Et+ft]||ft;e.fire(wt,Dt.component||Dt,ct)}},H=function(ft,ct,Et){c.push([ft,Et]),e.on(n,ft,ct,Et)},q=function(ft){H(ft,".jtk-connector",function(ct){T(ft,ct)}),H(ft,".jtk-endpoint",function(ct){T(ft,ct,"endpoint")}),H(ft,".jtk-overlay",function(ct){T(ft,ct)})},nt=0;nt<Q.length;nt++)q(Q[nt]);for(var dt in _){var at=_[dt].el;at.parentNode===x&&(x.removeChild(at),n.appendChild(at))}},this.getContainer=function(){return n},this.bind=function(r,x){r==="ready"&&b?x():I.apply(e,[r,x])},e.importDefaults=function(r){for(var x in r)e.Defaults[x]=r[x];return r.Container&&e.setContainer(r.Container),e},e.restoreDefaults=function(){return e.Defaults=E.extend({},U),e};var a=null,b=!1,C=[],u={},A={},_={},k={},d={},S=!1,R=[],B=!1,Y=null,i=this.Defaults.Scope,o=1,t=function(){return""+o++},p=(function(r,x){n?n.appendChild(r):x?this.getElement(x).appendChild(r):this.appendToRoot(r)}).bind(this),v=function(r,x,m,T){var H={c:[],e:[]};if(!B&&(r=e.getElement(r),r!=null)){var q=ut(r),nt=r.querySelectorAll(".jtk-managed");m==null&&(m=jsPlumbUtil.uuid()),kt({elId:q,offset:x,recalc:!1,timestamp:m});for(var dt=0;dt<nt.length;dt++)kt({elId:nt[dt].getAttribute("id"),recalc:!0,timestamp:m});var at=e.router.redraw(q,x,m,null,T);if(Array.prototype.push.apply(H.c,at.c),Array.prototype.push.apply(H.e,at.e),nt)for(var ft=0;ft<nt.length;ft++)at=e.router.redraw(nt[ft].getAttribute("id"),null,m,null,T,!0),Array.prototype.push.apply(H.c,at.c),Array.prototype.push.apply(H.e,at.e)}return H},F=function(r){return A[r]},L=function(r,x){for(var m=r.scope.split(/\s/),T=x.scope.split(/\s/),H=0;H<m.length;H++)for(var q=0;q<T.length;q++)if(T[q]===m[H])return!0;return!1},V=function(r,x){var m=E.extend({},r);for(var T in x)x[T]&&(m[T]=x[T]);return m},G=(function(r,x){var m=E.extend({},r);if(x&&E.extend(m,x),m.source&&(m.source.endpoint?m.sourceEndpoint=m.source:m.source=e.getElement(m.source)),m.target&&(m.target.endpoint?m.targetEndpoint=m.target:m.target=e.getElement(m.target)),r.uuids&&(m.sourceEndpoint=F(r.uuids[0]),m.targetEndpoint=F(r.uuids[1])),m.sourceEndpoint&&m.sourceEndpoint.isFull()){f.log(e,"could not add connection; source endpoint is full");return}if(m.targetEndpoint&&m.targetEndpoint.isFull()){f.log(e,"could not add connection; target endpoint is full");return}if(!m.type&&m.sourceEndpoint&&(m.type=m.sourceEndpoint.connectionType),m.sourceEndpoint&&m.sourceEndpoint.connectorOverlays){m.overlays=m.overlays||[];for(var T=0,H=m.sourceEndpoint.connectorOverlays.length;T<H;T++)m.overlays.push(m.sourceEndpoint.connectorOverlays[T])}m.sourceEndpoint&&m.sourceEndpoint.scope&&(m.scope=m.sourceEndpoint.scope),!m["pointer-events"]&&m.sourceEndpoint&&m.sourceEndpoint.connectorPointerEvents&&(m["pointer-events"]=m.sourceEndpoint.connectorPointerEvents);var q=function(dt,at,ft){var ct=V(at,{anchor:m.anchors?m.anchors[ft]:m.anchor,endpoint:m.endpoints?m.endpoints[ft]:m.endpoint,paintStyle:m.endpointStyles?m.endpointStyles[ft]:m.endpointStyle,hoverPaintStyle:m.endpointHoverStyles?m.endpointHoverStyles[ft]:m.endpointHoverStyle});return e.addEndpoint(dt,ct)},nt=function(dt,at,ft,ct){if(m[dt]&&!m[dt].endpoint&&!m[dt+"Endpoint"]&&!m.newConnection){var Et=ut(m[dt]),yt=ft[Et];if(yt=yt?yt[ct]:null,yt){if(!yt.enabled)return!1;var Dt=E.extend({},yt.def);delete Dt.label;var wt=yt.endpoint!=null&&yt.endpoint._jsPlumb?yt.endpoint:q(m[dt],Dt,at);if(wt.isFull())return!1;m[dt+"Endpoint"]=wt,!m.scope&&Dt.scope&&(m.scope=Dt.scope),yt.uniqueEndpoint?yt.endpoint?wt.finalEndpoint=yt.endpoint:(yt.endpoint=wt,wt.setDeleteOnEmpty(!1)):wt.setDeleteOnEmpty(!0),at===0&&yt.def.connectorOverlays&&(m.overlays=m.overlays||[],Array.prototype.push.apply(m.overlays,yt.def.connectorOverlays))}}};if(nt("source",0,this.sourceEndpointDefinitions,m.type||"default")!==!1&&nt("target",1,this.targetEndpointDefinitions,m.type||"default")!==!1)return m.sourceEndpoint&&m.targetEndpoint&&(L(m.sourceEndpoint,m.targetEndpoint)||(m=null)),m}).bind(e),W=function(r){var x=e.Defaults.ConnectionType||e.getDefaultConnectionType();r._jsPlumb=e,r.newConnection=W,r.newEndpoint=st,r.endpointsByUUID=A,r.endpointsByElement=u,r.finaliseConnection=lt,r.id="con_"+t();var m=new x(r);return m.isDetachable()&&(m.endpoints[0].initDraggable("_jsPlumbSource"),m.endpoints[1].initDraggable("_jsPlumbTarget")),m},lt=e.finaliseConnection=function(r,x,m,T){if(x=x||{},r.suspendedEndpoint||C.push(r),r.pending=null,r.endpoints[0].isTemporarySource=!1,T!==!1&&e.router.newConnection(r),v(r.source),!x.doNotFireConnectionEvent&&x.fireEvent!==!1){var H={connection:r,source:r.source,target:r.target,sourceId:r.sourceId,targetId:r.targetId,sourceEndpoint:r.endpoints[0],targetEndpoint:r.endpoints[1]};e.fire("connection",H,m)}},st=function(r,x){var m=e.Defaults.EndpointType||E.Endpoint,T=E.extend({},r);T._jsPlumb=e,T.newConnection=W,T.newEndpoint=st,T.endpointsByUUID=A,T.endpointsByElement=u,T.fireDetachEvent=J,T.elementId=x||ut(T.source);var H=new m(T);return H.id="ep_"+t(),re(T.elementId,T.source),E.headless||e.getDragManager().endpointAdded(T.source,x),H},it=function(r,x,m){var T=u[r];if(T&&T.length)for(var H=0,q=T.length;H<q;H++){for(var nt=0,dt=T[H].connections.length;nt<dt;nt++){var at=x(T[H].connections[nt]);if(at)return}m&&m(T[H])}},rt=function(r,x,m){x=x==="block";var T=null;m&&(T=function(q){q.setVisible(x,!0,!0)});var H=P(r);it(H.id,function(q){if(x&&m){var nt=q.sourceId===H.id?1:0;q.endpoints[nt].isVisible()&&q.setVisible(!0)}else q.setVisible(x)},T)},pt=function(r,x){var m=null;x&&(m=function(T){var H=T.isVisible();T.setVisible(!H)}),it(r,function(T){var H=T.isVisible();T.setVisible(!H)},m)},gt=function(r){var x=k[r];return x?{o:x,s:R[r]}:kt({elId:r})},ut=function(r,x,m){if(f.isString(r))return r;if(r==null)return null;var T=e.getAttribute(r,"id");return(!T||T==="undefined")&&(arguments.length===2&&arguments[1]!==void 0?T=x:(arguments.length===1||arguments.length===3&&!arguments[2])&&(T="jsPlumb_"+j+"_"+t()),m||e.setAttribute(r,"id",T)),T};this.setConnectionBeingDragged=function(r){S=r},this.isConnectionBeingDragged=function(){return S},this.getManagedElements=function(){return _},this.connectorClass="jtk-connector",this.connectorOutlineClass="jtk-connector-outline",this.connectedClass="jtk-connected",this.hoverClass="jtk-hover",this.endpointClass="jtk-endpoint",this.endpointConnectedClass="jtk-endpoint-connected",this.endpointFullClass="jtk-endpoint-full",this.endpointDropAllowedClass="jtk-endpoint-drop-allowed",this.endpointDropForbiddenClass="jtk-endpoint-drop-forbidden",this.overlayClass="jtk-overlay",this.draggingClass="jtk-dragging",this.elementDraggingClass="jtk-element-dragging",this.sourceElementDraggingClass="jtk-source-element-dragging",this.targetElementDraggingClass="jtk-target-element-dragging",this.endpointAnchorClassPrefix="jtk-endpoint-anchor",this.hoverSourceClass="jtk-source-hover",this.hoverTargetClass="jtk-target-hover",this.dragSelectClass="jtk-drag-select",this.Anchors={},this.Connectors={svg:{}},this.Endpoints={svg:{}},this.Overlays={svg:{}},this.ConnectorRenderers={},this.SVG="svg",this.addEndpoint=function(r,x,m){m=m||{};var T=E.extend({},m);E.extend(T,x),T.endpoint=T.endpoint||e.Defaults.Endpoint,T.paintStyle=T.paintStyle||e.Defaults.EndpointStyle;for(var H=[],q=f.isArray(r)||r.length!=null&&!f.isString(r)?r:[r],nt=0,dt=q.length;nt<dt;nt++){T.source=e.getElement(q[nt]),ie(T.source);var at=ut(T.source),ft=st(T,at),ct=re(at,T.source,null,!B).info.o;f.addToList(u,at,ft),B||ft.paint({anchorLoc:ft.anchor.compute({xy:[ct.left,ct.top],wh:R[at],element:ft,timestamp:Y,rotation:this.getRotation(at)}),timestamp:Y}),H.push(ft)}return H.length===1?H[0]:H},this.addEndpoints=function(r,x,m){for(var T=[],H=0,q=x.length;H<q;H++){var nt=e.addEndpoint(r,x[H],m);f.isArray(nt)?Array.prototype.push.apply(T,nt):T.push(nt)}return T},this.animate=function(r,x,m){if(!this.animationSupported)return!1;m=m||{};var T=e.getElement(r),H=ut(T),q=E.animEvents.step,nt=E.animEvents.complete;m[q]=f.wrap(m[q],function(){e.revalidate(H)}),m[nt]=f.wrap(m[nt],function(){e.revalidate(H)}),e.doAnimate(T,x,m)},this.checkCondition=function(r,x){var m=e.getListener(r),T=!0;if(m&&m.length>0){var H=Array.prototype.slice.call(arguments,1);try{for(var q=0,nt=m.length;q<nt;q++)T=T&&m[q].apply(m[q],H)}catch(dt){f.log(e,"cannot check condition ["+r+"]"+dt)}}return T},this.connect=function(r,x){var m=G(r,x),T;if(m){if(m.source==null&&m.sourceEndpoint==null){f.log("Cannot establish connection - source does not exist");return}if(m.target==null&&m.targetEndpoint==null){f.log("Cannot establish connection - target does not exist");return}ie(m.source),T=W(m),lt(T,m)}return T};var bt=[{el:"source",elId:"sourceId",epDefs:"sourceEndpointDefinitions"},{el:"target",elId:"targetId",epDefs:"targetEndpointDefinitions"}],vt=(function(r,x,m,T){var H,q=bt[m],nt=r[q.elId];r[q.el];var dt,at,ft=r.endpoints[m],ct={index:m,originalSourceId:m===0?nt:r.sourceId,newSourceId:r.sourceId,originalTargetId:m===1?nt:r.targetId,newTargetId:r.targetId,connection:r};if(x.constructor===E.Endpoint)H=x,H.addConnection(r),x=H.element;else if(dt=ut(x),at=this[q.epDefs][dt],dt===r[q.elId])H=null;else if(at)for(var Et in at){if(!at[Et].enabled)return;H=at[Et].endpoint!=null&&at[Et].endpoint._jsPlumb?at[Et].endpoint:this.addEndpoint(x,at[Et].def),at[Et].uniqueEndpoint&&(at[Et].endpoint=H),H.addConnection(r)}else H=r.makeEndpoint(m===0,x,dt);return H!=null&&(ft.detachFromConnection(r),r.endpoints[m]=H,r[q.el]=H.element,r[q.elId]=H.elementId,ct[m===0?"newSourceId":"newTargetId"]=H.elementId,K(ct),T||r.repaint()),ct.element=x,ct}).bind(this);this.setSource=function(r,x,m){var T=vt(r,x,0,m);this.router.sourceOrTargetChanged(T.originalSourceId,T.newSourceId,r,T.el,0)},this.setTarget=function(r,x,m){var T=vt(r,x,1,m);this.router.sourceOrTargetChanged(T.originalTargetId,T.newTargetId,r,T.el,1)},this.deleteEndpoint=function(r,x,m){var T=typeof r=="string"?A[r]:r;return T&&e.deleteObject({endpoint:T,dontUpdateHover:x,deleteAttachedObjects:m}),e},this.deleteEveryEndpoint=function(){var r=e.setSuspendDrawing(!0);for(var x in u){var m=u[x];if(m&&m.length)for(var T=0,H=m.length;T<H;T++)e.deleteEndpoint(m[T],!0)}u={},_={},A={},k={},d={},e.router.reset();var q=e.getDragManager();return q&&q.reset(),r||e.setSuspendDrawing(!1),e};var J=function(r,x,m){var T=e.Defaults.ConnectionType||e.getDefaultConnectionType(),H=r.constructor===T,q=H?{connection:r,source:r.source,target:r.target,sourceId:r.sourceId,targetId:r.targetId,sourceEndpoint:r.endpoints[0],targetEndpoint:r.endpoints[1]}:r;x&&e.fire("connectionDetached",q,m),e.fire("internal.connectionDetached",q,m),e.router.connectionDetached(q)},K=e.fireMoveEvent=function(r,x){e.fire("connectionMoved",r,x)};this.unregisterEndpoint=function(r){r._jsPlumb.uuid&&(A[r._jsPlumb.uuid]=null),e.router.deleteEndpoint(r);for(var x in u){var m=u[x];if(m){for(var T=[],H=0,q=m.length;H<q;H++)m[H]!==r&&T.push(m[H]);u[x]=T}u[x].length<1&&delete u[x]}};var $="isDetachAllowed",ht="beforeDetach",mt="checkCondition";this.deleteConnection=function(r,x){return r!=null&&(x=x||{},x.force||f.functionChain(!0,!1,[[r.endpoints[0],$,[r]],[r.endpoints[1],$,[r]],[r,$,[r]],[e,mt,[ht,r]]]))?(r.setHover(!1),J(r,!r.pending&&x.fireEvent!==!1,x.originalEvent),r.endpoints[0].detachFromConnection(r),r.endpoints[1].detachFromConnection(r),f.removeWithFunction(C,function(m){return r.id===m.id}),r.cleanup(),r.destroy(),!0):!1},this.deleteEveryConnection=function(r){r=r||{};var x=C.length,m=0;return e.batch(function(){for(var T=0;T<x;T++)m+=e.deleteConnection(C[0],r)?1:0}),m},this.deleteConnectionsForElement=function(r,x){x=x||{},r=e.getElement(r);var m=ut(r),T=u[m];if(T&&T.length)for(var H=0,q=T.length;H<q;H++)T[H].deleteEveryConnection(x);return e},this.deleteObject=function(r){var x={endpoints:{},connections:{},endpointCount:0,connectionCount:0},m=r.deleteAttachedObjects!==!1,T=function(ct){ct!=null&&x.connections[ct.id]==null&&(!r.dontUpdateHover&&ct._jsPlumb!=null&&ct.setHover(!1),x.connections[ct.id]=ct,x.connectionCount++)},H=function(ct){if(ct!=null&&x.endpoints[ct.id]==null&&(!r.dontUpdateHover&&ct._jsPlumb!=null&&ct.setHover(!1),x.endpoints[ct.id]=ct,x.endpointCount++,m))for(var Et=0;Et<ct.connections.length;Et++){var yt=ct.connections[Et];T(yt)}};r.connection?T(r.connection):H(r.endpoint);for(var q in x.connections){var nt=x.connections[q];if(nt._jsPlumb){f.removeWithFunction(C,function(ct){return nt.id===ct.id}),J(nt,r.fireEvent===!1?!1:!nt.pending,r.originalEvent);var dt=r.deleteAttachedObjects==null?null:!r.deleteAttachedObjects;nt.endpoints[0].detachFromConnection(nt,null,dt),nt.endpoints[1].detachFromConnection(nt,null,dt),nt.cleanup(!0),nt.destroy(!0)}}for(var at in x.endpoints){var ft=x.endpoints[at];ft._jsPlumb&&(e.unregisterEndpoint(ft),ft.cleanup(!0),ft.destroy(!0))}return x};var xt=function(r,x,m,T){for(var H=0,q=r.length;H<q;H++)r[H][x].apply(r[H],m);return T(r)},Ot=function(r,x,m){for(var T=[],H=0,q=r.length;H<q;H++)T.push([r[H][x].apply(r[H],m),r[H]]);return T},Rt=function(r,x,m){return function(){return xt(r,x,arguments,m)}},Ht=function(r,x){return function(){return Ot(r,x,arguments)}},Bt=function(r,x){var m=[];if(r)if(typeof r=="string"){if(r==="*")return r;m.push(r)}else if(x)m=r;else if(r.length)for(var T=0,H=r.length;T<H;T++)m.push(P(r[T]).id);else m.push(P(r).id);return m},Yt=function(r,x,m){return r==="*"?!0:r.length>0?r.indexOf(x)!==-1:!m};this.getConnections=function(r,x){r?r.constructor===String&&(r={scope:r}):r={};for(var m=r.scope||e.getDefaultScope(),T=Bt(m,!0),H=Bt(r.source),q=Bt(r.target),nt=!x&&T.length>1?{}:[],dt=function(Dt,wt){if(!x&&T.length>1){var Mt=nt[Dt];Mt==null&&(Mt=nt[Dt]=[]),Mt.push(wt)}else nt.push(wt)},at=0,ft=C.length;at<ft;at++){var ct=C[at],Et=ct.proxies&&ct.proxies[0]?ct.proxies[0].originalEp.elementId:ct.sourceId,yt=ct.proxies&&ct.proxies[1]?ct.proxies[1].originalEp.elementId:ct.targetId;Yt(T,ct.scope)&&Yt(H,Et)&&Yt(q,yt)&&dt(ct.scope,ct)}return nt};var le=function(r,x){return function(m){for(var T=0,H=r.length;T<H;T++)m(r[T]);return x(r)}},ue=function(r){return function(x){return r[x]}},he=function(r,x){var m={length:r.length,each:le(r,x),get:ue(r)},T=["setHover","removeAllOverlays","setLabel","addClass","addOverlay","removeOverlay","removeOverlays","showOverlay","hideOverlay","showOverlays","hideOverlays","setPaintStyle","setHoverPaintStyle","setSuspendEvents","setParameter","setParameters","setVisible","repaint","addType","toggleType","removeType","removeClass","setType","bind","unbind"],H=["getLabel","getOverlay","isHover","getParameter","getParameters","getPaintStyle","getHoverPaintStyle","isVisible","hasType","getType","isSuspendEvents"],q,nt;for(q=0,nt=T.length;q<nt;q++)m[T[q]]=Rt(r,T[q],x);for(q=0,nt=H.length;q<nt;q++)m[H[q]]=Ht(r,H[q]);return m},Xt=function(r){var x=he(r,Xt);return E.extend(x,{setDetachable:Rt(r,"setDetachable",Xt),setReattach:Rt(r,"setReattach",Xt),setConnector:Rt(r,"setConnector",Xt),delete:function(){for(var m=0,T=r.length;m<T;m++)e.deleteConnection(r[m])},isDetachable:Ht(r,"isDetachable"),isReattach:Ht(r,"isReattach")})},ne=function(r){var x=he(r,ne);return E.extend(x,{setEnabled:Rt(r,"setEnabled",ne),setAnchor:Rt(r,"setAnchor",ne),isEnabled:Ht(r,"isEnabled"),deleteEveryConnection:function(){for(var m=0,T=r.length;m<T;m++)r[m].deleteEveryConnection()},delete:function(){for(var m=0,T=r.length;m<T;m++)e.deleteEndpoint(r[m])}})};this.select=function(r){return r=r||{},r.scope=r.scope||"*",Xt(r.connections||e.getConnections(r,!0))},this.selectEndpoints=function(r){r=r||{},r.scope=r.scope||"*";var x=!r.element&&!r.source&&!r.target,m=x?"*":Bt(r.element),T=x?"*":Bt(r.source),H=x?"*":Bt(r.target),q=Bt(r.scope,!0),nt=[];for(var dt in u){var at=Yt(m,dt,!0),ft=Yt(T,dt,!0),ct=T!=="*",Et=Yt(H,dt,!0),yt=H!=="*";if(at||ft||Et)t:for(var Dt=0,wt=u[dt].length;Dt<wt;Dt++){var Mt=u[dt][Dt];if(Yt(q,Mt.scope,!0)){var ce=ct&&T.length>0&&!Mt.isSource,fe=yt&&H.length>0&&!Mt.isTarget;if(ce||fe)continue t;nt.push(Mt)}}}return ne(nt)},this.getAllConnections=function(){return C},this.getDefaultScope=function(){return i},this.getEndpoint=F,this.getEndpoints=function(r){return u[P(r).id]||[]},this.getDefaultEndpointType=function(){return E.Endpoint},this.getDefaultConnectionType=function(){return E.Connection},this.getId=ut,this.draw=v,this.info=P,this.appendElement=p;var Vt=!1;this.isHoverSuspended=function(){return Vt},this.setHoverSuspended=function(r){Vt=r},this.hide=function(r,x){return rt(r,"none",x),e},this.idstamp=t;var ie=function(r){if(!n&&r){var x=e.getElement(r);x.offsetParent&&e.setContainer(x.offsetParent)}},se=function(){e.Defaults.Container&&e.setContainer(e.Defaults.Container)},re=e.manage=function(r,x,m,T){return _[r]?T&&(_[r].info=kt({elId:r,timestamp:Y,recalc:!0})):(_[r]={el:x,endpoints:[],connections:[],rotation:0},_[r].info=kt({elId:r,timestamp:Y}),e.addClass(x,"jtk-managed"),m||e.fire("manageElement",{id:r,info:_[r].info,el:x})),_[r]};this.unmanage=function(r){if(_[r]){var x=_[r].el;e.removeClass(x,"jtk-managed"),delete _[r],e.fire("unmanageElement",{id:r,el:x})}},this.rotate=function(r,x,m){return _[r]&&(_[r].rotation=x,_[r].el.style.transform="rotate("+x+"deg)",_[r].el.style.transformOrigin="center center",m!==!0)?this.revalidate(r):{c:[],e:[]}},this.getRotation=function(r){return _[r]&&_[r].rotation||0};var kt=function(r){var x=r.timestamp,m=r.recalc,T=r.offset,H=r.elId,q;return B&&!x&&(x=Y),!m&&x&&x===d[H]?{o:r.offset||k[H],s:R[H]}:(m||!T&&k[H]==null?(q=_[H]?_[H].el:null,q!=null&&(R[H]=e.getSize(q),k[H]=e.getOffset(q),d[H]=x)):(k[H]=T||k[H],R[H]==null&&(q=_[H].el,q!=null&&(R[H]=e.getSize(q))),d[H]=x),k[H]&&!k[H].right&&(k[H].right=k[H].left+R[H][0],k[H].bottom=k[H].top+R[H][1],k[H].width=R[H][0],k[H].height=R[H][1],k[H].centerx=k[H].left+k[H].width/2,k[H].centery=k[H].top+k[H].height/2),{o:k[H],s:R[H]})};this.updateOffset=kt,this.init=(function(){b||(se(),e.router=new z.jsPlumb.DefaultRouter(e),e.anchorManager=e.router.anchorManager,b=!0,e.fire("ready",e))}).bind(this),this.log=a,this.jsPlumbUIComponent=l,this.makeAnchor=function(){var r,x=function(nt,dt){if(z.jsPlumb.Anchors[nt])return new z.jsPlumb.Anchors[nt](dt);if(!e.Defaults.DoNotThrowErrors)throw{msg:"jsPlumb: unknown anchor type '"+nt+"'"}};if(arguments.length===0)return null;var m=arguments[0],T=arguments[1],H=null;if(m.compute&&m.getOrientation)return m;if(typeof m=="string")H=x(arguments[0],{elementId:T,jsPlumbInstance:e});else if(f.isArray(m))if(f.isArray(m[0])||f.isString(m[0]))m.length===2&&f.isObject(m[1])?f.isString(m[0])?(r=z.jsPlumb.extend({elementId:T,jsPlumbInstance:e},m[1]),H=x(m[0],r)):(r=z.jsPlumb.extend({elementId:T,jsPlumbInstance:e,anchors:m[0]},m[1]),H=new z.jsPlumb.DynamicAnchor(r)):H=new E.DynamicAnchor({anchors:m,selector:null,elementId:T,jsPlumbInstance:e});else{var q={x:m[0],y:m[1],orientation:m.length>=4?[m[2],m[3]]:[0,0],offsets:m.length>=6?[m[4],m[5]]:[0,0],elementId:T,jsPlumbInstance:e,cssClass:m.length===7?m[6]:null};H=new z.jsPlumb.Anchor(q),H.clone=function(){return new z.jsPlumb.Anchor(q)}}return H.id||(H.id="anchor_"+t()),H},this.makeAnchors=function(r,x,m){for(var T=[],H=0,q=r.length;H<q;H++)typeof r[H]=="string"?T.push(z.jsPlumb.Anchors[r[H]]({elementId:x,jsPlumbInstance:m})):f.isArray(r[H])&&T.push(e.makeAnchor(r[H],x,m));return T},this.makeDynamicAnchor=function(r,x){return new z.jsPlumb.DynamicAnchor({anchors:r,selector:x,elementId:null,jsPlumbInstance:e})},this.targetEndpointDefinitions={},this.sourceEndpointDefinitions={};var Wt=function(r,x,m,T,H){for(var q=r.target||r.srcElement,nt=!1,dt=T.getSelector(x,m),at=0;at<dt.length;at++)if(dt[at]===q){nt=!0;break}return H?!nt:nt},It=function(r,x,m,T,H){var q=new l(x),nt=x._jsPlumb.EndpointDropHandler({jsPlumb:e,enabled:function(){return r.def.enabled},isFull:function(){var at=e.select({target:r.id}).length;return r.def.maxConnections>0&&at>=r.def.maxConnections},element:r.el,elementId:r.id,isSource:T,isTarget:H,addClass:function(at){e.addClass(r.el,at)},removeClass:function(at){e.removeClass(r.el,at)},onDrop:function(at){var ft=at.endpoints[0];ft.anchor.locked=!1},isDropAllowed:function(){return q.isDropAllowed.apply(q,arguments)},isRedrop:function(at){return at.suspendedElement!=null&&at.suspendedEndpoint!=null&&at.suspendedEndpoint.element===r.el},getEndpoint:function(at){var ft=r.def.endpoint;if(ft==null||ft._jsPlumb==null){var ct=e.deriveEndpointAndAnchorSpec(at.getType().join(" "),!0),Et=ct.endpoints?z.jsPlumb.extend(x,{endpoint:r.def.def.endpoint||ct.endpoints[1]}):x;ct.anchors&&(Et=z.jsPlumb.extend(Et,{anchor:r.def.def.anchor||ct.anchors[1]})),ft=e.addEndpoint(r.el,Et),ft._mtNew=!0}if(x.uniqueEndpoint&&(r.def.endpoint=ft),ft.setDeleteOnEmpty(!0),at.isDetachable()&&ft.initDraggable(),ft.anchor.positionFinder!=null){var yt=e.getUIPosition(arguments,e.getZoom()),Dt=e.getOffset(r.el),wt=e.getSize(r.el),Mt=yt==null?[0,0]:ft.anchor.positionFinder(yt,Dt,wt,ft.anchor.constructorParams);ft.anchor.x=Mt[0],ft.anchor.y=Mt[1]}return ft},maybeCleanup:function(at){at._mtNew&&at.connections.length===0?e.deleteObject({endpoint:at}):delete at._mtNew}}),dt=z.jsPlumb.dragEvents.drop;return m.scope=m.scope||x.scope||e.Defaults.Scope,m[dt]=f.wrap(m[dt],nt,!0),m.rank=x.rank||0,H&&(m[z.jsPlumb.dragEvents.over]=function(){return!0}),x.allowLoopback===!1&&(m.canDrop=function(at){var ft=at.getDragElement()._jsPlumbRelatedElement;return ft!==r.el}),e.initDroppable(r.el,m,"internal"),nt};this.makeTarget=function(r,x,m){var T=z.jsPlumb.extend({_jsPlumb:this},m);z.jsPlumb.extend(T,x);for(var H=T.maxConnections||-1,q=(function(ft){var ct=P(ft),Et=ct.id,yt=z.jsPlumb.extend({},T.dropOptions||{}),Dt=T.connectionType||"default";this.targetEndpointDefinitions[Et]=this.targetEndpointDefinitions[Et]||{},ie(Et),ct.el._isJsPlumbGroup&&yt.rank==null&&(yt.rank=-1);var wt={def:z.jsPlumb.extend({},T),uniqueEndpoint:T.uniqueEndpoint,maxConnections:H,enabled:!0};T.createEndpoint&&(wt.uniqueEndpoint=!0,wt.endpoint=e.addEndpoint(ft,wt.def),wt.endpoint.setDeleteOnEmpty(!1)),ct.def=wt,this.targetEndpointDefinitions[Et][Dt]=wt,It(ct,T,yt,T.isSource===!0,!0),ct.el._katavorioDrop[ct.el._katavorioDrop.length-1].targetDef=wt}).bind(this),nt=r.length&&r.constructor!==String?r:[r],dt=0,at=nt.length;dt<at;dt++)q(nt[dt]);return this},this.unmakeTarget=function(r,x){var m=P(r);return e.destroyDroppable(m.el,"internal"),x||delete this.targetEndpointDefinitions[m.id],this},this.makeSource=function(r,x,m){var T=z.jsPlumb.extend({_jsPlumb:this},m);z.jsPlumb.extend(T,x);var H=T.connectionType||"default",q=e.deriveEndpointAndAnchorSpec(H);T.endpoint=T.endpoint||q.endpoints[0],T.anchor=T.anchor||q.anchors[0];for(var nt=T.maxConnections||-1,dt=T.onMaxConnections,at=(function(yt){var Dt=yt.id,wt=this.getElement(yt.el);this.sourceEndpointDefinitions[Dt]=this.sourceEndpointDefinitions[Dt]||{},ie(Dt);var Mt={def:z.jsPlumb.extend({},T),uniqueEndpoint:T.uniqueEndpoint,maxConnections:nt,enabled:!0};T.createEndpoint&&(Mt.uniqueEndpoint=!0,Mt.endpoint=e.addEndpoint(r,Mt.def),Mt.endpoint.setDeleteOnEmpty(!1)),this.sourceEndpointDefinitions[Dt][H]=Mt,yt.def=Mt;var ce=z.jsPlumb.dragEvents.stop,fe=z.jsPlumb.dragEvents.drag,Zt=z.jsPlumb.extend({},T.dragOptions||{}),be=Zt.drag,_e=Zt.stop,Nt=null,de=!1;Zt.scope=Zt.scope||T.scope,Zt[fe]=f.wrap(Zt[fe],function(){be&&be.apply(this,arguments),de=!1}),Zt[ce]=f.wrap(Zt[ce],(function(){if(_e&&_e.apply(this,arguments),this.currentlyDragging=!1,Nt._jsPlumb!=null){var Ut=T.anchor||this.Defaults.Anchor,Gt=Nt.anchor,ge=Nt.connections[0],Qt=this.makeAnchor(Ut,Dt,this),oe=Nt.element;if(Qt.positionFinder!=null){var qt=e.getOffset(oe),te=this.getSize(oe),pe={left:qt.left+Gt.x*te[0],top:qt.top+Gt.y*te[1]},ae=Qt.positionFinder(pe,qt,te,Qt.constructorParams);Qt.x=ae[0],Qt.y=ae[1]}Nt.setAnchor(Qt,!0),Nt.repaint(),this.repaint(Nt.elementId),ge!=null&&this.repaint(ge.targetId)}}).bind(this));var Pe=(function(Ut){if(!(Ut.which===3||Ut.button===2)){Dt=this.getId(this.getElement(yt.el));var Gt=this.sourceEndpointDefinitions[Dt][H];if(Gt.enabled){if(T.filter){var ge=f.isString(T.filter)?Wt(Ut,yt.el,T.filter,this,T.filterExclude):T.filter(Ut,yt.el);if(ge===!1)return}var Qt=this.select({source:Dt}).length;if(Gt.maxConnections>=0&&Qt>=Gt.maxConnections)return dt&&dt({element:yt.el,maxConnections:nt},Ut),!1;var oe=z.jsPlumb.getPositionOnElement(Ut,wt,N),qt={};z.jsPlumb.extend(qt,Gt.def),qt.isTemporarySource=!0,qt.anchor=[oe[0],oe[1],0,0],qt.dragOptions=Zt,Gt.def.scope&&(qt.scope=Gt.def.scope),Nt=this.addEndpoint(Dt,qt),de=!0,Nt.setDeleteOnEmpty(!0),Gt.uniqueEndpoint&&(Gt.endpoint?Nt.finalEndpoint=Gt.endpoint:(Gt.endpoint=Nt,Nt.setDeleteOnEmpty(!1)));var te=function(){e.off(Nt.canvas,"mouseup",te),e.off(yt.el,"mouseup",te),de&&(de=!1,e.deleteEndpoint(Nt))};e.on(Nt.canvas,"mouseup",te),e.on(yt.el,"mouseup",te);var pe={};if(Gt.def.extract)for(var ae in Gt.def.extract){var Ce=(Ut.srcElement||Ut.target).getAttribute(ae);Ce&&(pe[Gt.def.extract[ae]]=Ce)}e.trigger(Nt.canvas,"mousedown",Ut,pe),f.consume(Ut)}}}).bind(this);this.on(yt.el,"mousedown",Pe),Mt.trigger=Pe,T.filter&&(f.isString(T.filter)||f.isFunction(T.filter))&&e.setDragFilter(yt.el,T.filter);var Ae=z.jsPlumb.extend({},T.dropOptions||{});It(yt,T,Ae,!0,T.isTarget===!0)}).bind(this),ft=r.length&&r.constructor!==String?r:[r],ct=0,Et=ft.length;ct<Et;ct++)at(P(ft[ct]));return this},this.unmakeSource=function(r,x,m){var T=P(r);e.destroyDroppable(T.el,"internal");var H=this.sourceEndpointDefinitions[T.id];if(H){for(var q in H)if(x==null||x===q){var nt=H[q].trigger;nt&&e.off(T.el,"mousedown",nt),m||delete this.sourceEndpointDefinitions[T.id][q]}}return this},this.unmakeEverySource=function(){for(var r in this.sourceEndpointDefinitions)e.unmakeSource(r,null,!0);return this.sourceEndpointDefinitions={},this};var zt=(function(r,x,m){x=f.isArray(x)?x:[x];var T=ut(r);m=m||"default";for(var H=0;H<x.length;H++){var q=this[x[H]][T];if(q&&q[m])return q[m].def.scope||this.Defaults.Scope}}).bind(this),$t=(function(r,x,m,T){m=f.isArray(m)?m:[m];var H=ut(r);T=T||"default";for(var q=0;q<m.length;q++){var nt=this[m[q]][H];nt&&nt[T]&&(nt[T].def.scope=x)}}).bind(this);this.getScope=function(r,x){return zt(r,["sourceEndpointDefinitions","targetEndpointDefinitions"])},this.getSourceScope=function(r){return zt(r,"sourceEndpointDefinitions")},this.getTargetScope=function(r){return zt(r,"targetEndpointDefinitions")},this.setScope=function(r,x,m){this.setSourceScope(r,x,m),this.setTargetScope(r,x,m)},this.setSourceScope=function(r,x,m){$t(r,x,"sourceEndpointDefinitions",m),this.setDragScope(r,x)},this.setTargetScope=function(r,x,m){$t(r,x,"targetEndpointDefinitions",m),this.setDropScope(r,x)},this.unmakeEveryTarget=function(){for(var r in this.targetEndpointDefinitions)e.unmakeTarget(r,!0);return this.targetEndpointDefinitions={},this};var et=(function(r,x,m,T,H){var q=r==="source"?this.sourceEndpointDefinitions:this.targetEndpointDefinitions,nt,dt,at;if(H=H||"default",x.length&&!f.isString(x)){nt=[];for(var ft=0,ct=x.length;ft<ct;ft++)dt=P(x[ft]),q[dt.id]&&q[dt.id][H]&&(nt[ft]=q[dt.id][H].enabled,at=T?!nt[ft]:m,q[dt.id][H].enabled=at,e[at?"removeClass":"addClass"](dt.el,"jtk-"+r+"-disabled"))}else{dt=P(x);var Et=dt.id;q[Et]&&q[Et][H]&&(nt=q[Et][H].enabled,at=T?!nt:m,q[Et][H].enabled=at,e[at?"removeClass":"addClass"](dt.el,"jtk-"+r+"-disabled"))}return nt}).bind(this),Pt=(function(r,x){if(r!=null){if(f.isString(r)||!r.length)return x.apply(this,[r]);if(r.length)return x.apply(this,[r[0]])}}).bind(this);this.toggleSourceEnabled=function(r,x){return et("source",r,null,!0,x),this.isSourceEnabled(r,x)},this.setSourceEnabled=function(r,x,m){return et("source",r,x,null,m)},this.isSource=function(r,x){return x=x||"default",Pt(r,(function(m){var T=this.sourceEndpointDefinitions[P(m).id];return T!=null&&T[x]!=null}).bind(this))},this.isSourceEnabled=function(r,x){return x=x||"default",Pt(r,(function(m){var T=this.sourceEndpointDefinitions[P(m).id];return T&&T[x]&&T[x].enabled===!0}).bind(this))},this.toggleTargetEnabled=function(r,x){return et("target",r,null,!0,x),this.isTargetEnabled(r,x)},this.isTarget=function(r,x){return x=x||"default",Pt(r,(function(m){var T=this.targetEndpointDefinitions[P(m).id];return T!=null&&T[x]!=null}).bind(this))},this.isTargetEnabled=function(r,x){return x=x||"default",Pt(r,(function(m){var T=this.targetEndpointDefinitions[P(m).id];return T&&T[x]&&T[x].enabled===!0}).bind(this))},this.setTargetEnabled=function(r,x,m){return et("target",r,x,null,m)},this.ready=function(r){e.bind("ready",r)};var Ct=function(r,x){if(typeof r=="object"&&r.length)for(var m=0,T=r.length;m<T;m++)x(r[m]);else x(r);return e};this.repaint=function(r,x,m){return Ct(r,function(T){v(T,x,m)})},this.revalidate=function(r,x,m){var T=m?r:e.getId(r);e.updateOffset({elId:T,recalc:!0,timestamp:x});var H=e.getDragManager();return H&&H.updateOffsets(T),v(r,null,x)},this.repaintEverything=function(){var r=jsPlumbUtil.uuid(),x;for(x in u)e.updateOffset({elId:x,recalc:!0,timestamp:r});for(x in u)v(x,null,r);return this},this.removeAllEndpoints=function(r,x,m){m=m||[];var T=function(H){var q=P(H),nt=u[q.id],dt,at;if(nt)for(m.push(q),dt=0,at=nt.length;dt<at;dt++)e.deleteEndpoint(nt[dt],!1);if(delete u[q.id],x&&q.el&&q.el.nodeType!==3&&q.el.nodeType!==8)for(dt=0,at=q.el.childNodes.length;dt<at;dt++)T(q.el.childNodes[dt])};return T(r),this};var _t=function(r,x){e.removeAllEndpoints(r.id,!0,x);for(var m=e.getDragManager(),T=function(q){m&&m.elementRemoved(q.id),e.router.elementRemoved(q.id),e.isSource(q.el)&&e.unmakeSource(q.el),e.isTarget(q.el)&&e.unmakeTarget(q.el),e.destroyDraggable(q.el),e.destroyDroppable(q.el),delete e.floatingConnections[q.id],delete _[q.id],delete k[q.id],q.el&&(e.removeElement(q.el),q.el._jsPlumb=null)},H=1;H<x.length;H++)T(x[H]);T(r)};this.remove=function(r,x){var m=P(r),T=[];return m.text&&m.el.parentNode?m.el.parentNode.removeChild(m.el):m.id&&e.batch(function(){_t(m,T)},x===!0),e},this.empty=function(r,x){var m=[],T=function(H,q){var nt=P(H);if(nt.text)nt.el.parentNode.removeChild(nt.el);else if(nt.el){for(;nt.el.childNodes.length>0;)T(nt.el.childNodes[0]);q||_t(nt,m)}};return e.batch(function(){T(r,!0)},x===!1),e},this.reset=function(r){e.silently((function(){Vt=!1,e.removeAllGroups(),e.removeGroupManager(),e.deleteEveryEndpoint(),r||e.unbind(),this.targetEndpointDefinitions={},this.sourceEndpointDefinitions={},C.length=0,this.doReset&&this.doReset()}).bind(this))},this.destroy=function(){this.reset(),n=null,c=null};var St=function(r){r.canvas&&r.canvas.parentNode&&r.canvas.parentNode.removeChild(r.canvas),r.cleanup(),r.destroy()};this.clear=function(){e.select().each(St),e.selectEndpoints().each(St),u={},A={}},this.setDefaultScope=function(r){return i=r,e},this.deriveEndpointAndAnchorSpec=function(r,x){for(var m=((x?"":"default ")+r).split(/[\s]/),T=null,H=null,q=null,nt=null,dt=0;dt<m.length;dt++){var at=e.getType(m[dt],"connection");at&&(at.endpoints&&(T=at.endpoints),at.endpoint&&(H=at.endpoint),at.anchors&&(nt=at.anchors),at.anchor&&(q=at.anchor))}return{endpoints:T||[H,H],anchors:nt||[q,q]}},this.setId=function(r,x,m){var T;f.isString(r)?T=r:(r=this.getElement(r),T=this.getId(r));var H=this.getConnections({source:T,scope:"*"},!0),q=this.getConnections({target:T,scope:"*"},!0);x=""+x,m?r=this.getElement(x):(r=this.getElement(T),this.setAttribute(r,"id",x)),u[x]=u[T]||[];for(var nt=0,dt=u[x].length;nt<dt;nt++)u[x][nt].setElementId(x),u[x][nt].setReferenceElement(r);delete u[T],this.sourceEndpointDefinitions[x]=this.sourceEndpointDefinitions[T],delete this.sourceEndpointDefinitions[T],this.targetEndpointDefinitions[x]=this.targetEndpointDefinitions[T],delete this.targetEndpointDefinitions[T],this.router.changeId(T,x);var at=this.getDragManager();at&&at.changeId(T,x),_[x]=_[T],delete _[T];var ft=function(ct,Et,yt){for(var Dt=0,wt=ct.length;Dt<wt;Dt++)ct[Dt].endpoints[Et].setElementId(x),ct[Dt].endpoints[Et].setReferenceElement(r),ct[Dt][yt+"Id"]=x,ct[Dt][yt]=r};ft(H,0,"source"),ft(q,1,"target"),this.repaint(x)},this.setDebugLog=function(r){a=r},this.setSuspendDrawing=function(r,x){var m=B;return B=r,r?Y=new Date().getTime():Y=null,x&&this.repaintEverything(),m},this.isSuspendDrawing=function(){return B},this.getSuspendedAt=function(){return Y},this.batch=function(r,x){var m=this.isSuspendDrawing();m||this.setSuspendDrawing(!0);try{r()}catch(T){f.log("Function run while suspended failed",T)}m||this.setSuspendDrawing(!1,!x)},this.doWhileSuspended=this.batch,this.getCachedData=gt,this.show=function(r,x){return rt(r,"block",x),e},this.toggleVisible=pt,this.addListener=this.bind;var At=[];this.registerFloatingConnection=function(r,x,m){At[r.id]=x,f.addToList(u,r.id,m)},this.getFloatingConnectionFor=function(r){return At[r]},this.listManager=new z.jsPlumbListManager(this,this.Defaults.ListStyle)};f.extend(z.jsPlumbInstance,f.EventGenerator,{setAttribute:function(g,e,j){this.setAttribute(g,e,j)},getAttribute:function(g,e){return this.getAttribute(z.jsPlumb.getElement(g),e)},convertToFullOverlaySpec:function(g){return f.isString(g)&&(g=[g,{}]),g[1].id=g[1].id||f.uuid(),g},registerConnectionType:function(g,e){if(this._connectionTypes[g]=z.jsPlumb.extend({},e),e.overlays){for(var j={},I=0;I<e.overlays.length;I++){var U=this.convertToFullOverlaySpec(e.overlays[I]);j[U[1].id]=U}this._connectionTypes[g].overlays=j}},registerConnectionTypes:function(g){for(var e in g)this.registerConnectionType(e,g[e])},registerEndpointType:function(g,e){if(this._endpointTypes[g]=z.jsPlumb.extend({},e),e.overlays){for(var j={},I=0;I<e.overlays.length;I++){var U=this.convertToFullOverlaySpec(e.overlays[I]);j[U[1].id]=U}this._endpointTypes[g].overlays=j}},registerEndpointTypes:function(g){for(var e in g)this.registerEndpointType(e,g[e])},getType:function(g,e){return e==="connection"?this._connectionTypes[g]:this._endpointTypes[g]},setIdChanged:function(g,e){this.setId(g,e,!0)},setParent:function(g,e){var j=this.getElement(g),I=this.getId(j),U=this.getElement(e),N=this.getId(U),P=this.getDragManager();j.parentNode.removeChild(j),U.appendChild(j),P&&P.setParent(j,I,U,N)},extend:function(g,e,j){var I;if(j)for(I=0;I<j.length;I++)g[j[I]]=e[j[I]];else for(I in e)g[I]=e[I];return g},floatingConnections:{},getFloatingAnchorIndex:function(g){return g.endpoints[0].isFloating()?0:g.endpoints[1].isFloating()?1:-1},proxyConnection:function(g,e,j,I,U,N){var P,w=g.endpoints[e].elementId,n=g.endpoints[e];g.proxies=g.proxies||[],g.proxies[e]?P=g.proxies[e].ep:P=this.addEndpoint(j,{endpoint:U(g,e),anchor:N(g,e),parameters:{isProxyEndpoint:!0}}),P.setDeleteOnEmpty(!0),g.proxies[e]={ep:P,originalEp:n},e===0?this.router.sourceOrTargetChanged(w,I,g,j,0):this.router.sourceOrTargetChanged(w,I,g,j,1),n.detachFromConnection(g,null,!0),P.connections=[g],g.endpoints[e]=P,n.setVisible(!1),g.setVisible(!0),this.revalidate(j)},unproxyConnection:function(g,e,j){if(!(g._jsPlumb==null||g.proxies==null||g.proxies[e]==null)){var I=g.proxies[e].originalEp.element,U=g.proxies[e].originalEp.elementId;g.endpoints[e]=g.proxies[e].originalEp,e===0?this.router.sourceOrTargetChanged(j,U,g,I,0):this.router.sourceOrTargetChanged(j,U,g,I,1),g.proxies[e].ep.detachFromConnection(g,null),g.proxies[e].originalEp.addConnection(g),g.isVisible()&&g.proxies[e].originalEp.setVisible(!0),delete g.proxies[e]}}});var E=new M;z.jsPlumb=E,E.getInstance=function(g,e){var j=new M(g);if(e)for(var I in e)j[I]=e[I];return j.init(),j},E.each=function(g,e){if(g!=null)if(typeof g=="string")e(E.getElement(g));else if(g.length!=null)for(var j=0;j<g.length;j++)e(E.getElement(g[j]));else e(g)},ot.jsPlumb=E}).call(typeof window<"u"?window:jt),(function(){var z=this,f=z.jsPlumb,X=z.jsPlumbUtil,Q="__label",Z=function(h,O){var l={cssClass:O.cssClass,labelStyle:h.labelStyle,id:Q,component:h,_jsPlumb:h._jsPlumb.instance},s=f.extend(l,O);return new f.Overlays[h._jsPlumb.instance.getRenderMode()].Label(s)},tt=function(h,O){var l=null;if(X.isArray(O)){var s=O[0],y=f.extend({component:h,_jsPlumb:h._jsPlumb.instance},O[1]);O.length===3&&f.extend(y,O[2]),l=new f.Overlays[h._jsPlumb.instance.getRenderMode()][s](y)}else O.constructor===String?l=new f.Overlays[h._jsPlumb.instance.getRenderMode()][O]({component:h,_jsPlumb:h._jsPlumb.instance}):l=O;return l.id=l.id||X.uuid(),h.cacheTypeItem("overlay",l,l.id),h._jsPlumb.overlays[l.id]=l,l};f.OverlayCapableJsPlumbUIComponent=function(h){z.jsPlumbUIComponent.apply(this,arguments),this._jsPlumb.overlays={},this._jsPlumb.overlayPositions={},h.label&&(this.getDefaultType().overlays[Q]=["Label",{label:h.label,location:h.labelLocation||this.defaultLabelLocation||.5,labelStyle:h.labelStyle||this._jsPlumb.instance.Defaults.LabelStyle,id:Q}]),this.setListenerComponent=function(O){if(this._jsPlumb)for(var l in this._jsPlumb.overlays)this._jsPlumb.overlays[l].setListenerComponent(O)}},f.OverlayCapableJsPlumbUIComponent.applyType=function(h,O){if(O.overlays){var l={},s;for(s in O.overlays){var y=h._jsPlumb.overlays[O.overlays[s][1].id];if(y)y.updateFrom(O.overlays[s][1]),l[O.overlays[s][1].id]=!0,y.reattach(h._jsPlumb.instance,h);else{var D=h.getCachedTypeItem("overlay",O.overlays[s][1].id);D!=null?(D.reattach(h._jsPlumb.instance,h),D.setVisible(!0),D.updateFrom(O.overlays[s][1]),h._jsPlumb.overlays[D.id]=D):D=h.addOverlay(O.overlays[s],!0),l[D.id]=!0}}for(s in h._jsPlumb.overlays)l[h._jsPlumb.overlays[s].id]==null&&h.removeOverlay(h._jsPlumb.overlays[s].id,!0)}},X.extend(f.OverlayCapableJsPlumbUIComponent,z.jsPlumbUIComponent,{setHover:function(h,O){if(this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged())for(var l in this._jsPlumb.overlays)this._jsPlumb.overlays[l][h?"addClass":"removeClass"](this._jsPlumb.instance.hoverClass)},addOverlay:function(h,O){var l=tt(this,h);if(this.getData&&l.type==="Label"&&X.isArray(h)){var s=this.getData(),y=h[1];if(s){var D=y.labelLocationAttribute||"labelLocation",M=s?s[D]:null;M&&(l.loc=M)}}return O||this.repaint(),l},getOverlay:function(h){return this._jsPlumb.overlays[h]},getOverlays:function(){return this._jsPlumb.overlays},hideOverlay:function(h){var O=this.getOverlay(h);O&&O.hide()},hideOverlays:function(){for(var h in this._jsPlumb.overlays)this._jsPlumb.overlays[h].hide()},showOverlay:function(h){var O=this.getOverlay(h);O&&O.show()},showOverlays:function(){for(var h in this._jsPlumb.overlays)this._jsPlumb.overlays[h].show()},removeAllOverlays:function(h){for(var O in this._jsPlumb.overlays)this._jsPlumb.overlays[O].cleanup&&this._jsPlumb.overlays[O].cleanup();this._jsPlumb.overlays={},this._jsPlumb.overlayPositions=null,this._jsPlumb.overlayPlacements={},h||this.repaint()},removeOverlay:function(h,O){var l=this._jsPlumb.overlays[h];l&&(l.setVisible(!1),!O&&l.cleanup&&l.cleanup(),delete this._jsPlumb.overlays[h],this._jsPlumb.overlayPositions&&delete this._jsPlumb.overlayPositions[h],this._jsPlumb.overlayPlacements&&delete this._jsPlumb.overlayPlacements[h])},removeOverlays:function(){for(var h=0,O=arguments.length;h<O;h++)this.removeOverlay(arguments[h])},moveParent:function(h){if(this.bgCanvas&&(this.bgCanvas.parentNode.removeChild(this.bgCanvas),h.appendChild(this.bgCanvas)),this.canvas&&this.canvas.parentNode){this.canvas.parentNode.removeChild(this.canvas),h.appendChild(this.canvas);for(var O in this._jsPlumb.overlays)if(this._jsPlumb.overlays[O].isAppendedAtTopLevel){var l=this._jsPlumb.overlays[O].getElement();l.parentNode.removeChild(l),h.appendChild(l)}}},getLabel:function(){var h=this.getOverlay(Q);return h!=null?h.getLabel():null},getLabelOverlay:function(){return this.getOverlay(Q)},setLabel:function(h){var O=this.getOverlay(Q);if(O)h.constructor===String||h.constructor===Function?O.setLabel(h):(h.label&&O.setLabel(h.label),h.location&&O.setLocation(h.location));else{var l=h.constructor===String||h.constructor===Function?{label:h}:h;O=Z(this,l),this._jsPlumb.overlays[Q]=O}this._jsPlumb.instance.isSuspendDrawing()||this.repaint()},cleanup:function(h){for(var O in this._jsPlumb.overlays)this._jsPlumb.overlays[O].cleanup(h),this._jsPlumb.overlays[O].destroy(h);h&&(this._jsPlumb.overlays={},this._jsPlumb.overlayPositions=null)},setVisible:function(h){this[h?"showOverlays":"hideOverlays"]()},setAbsoluteOverlayPosition:function(h,O){this._jsPlumb.overlayPositions[h.id]=O},getAbsoluteOverlayPosition:function(h){return this._jsPlumb.overlayPositions?this._jsPlumb.overlayPositions[h.id]:null},_clazzManip:function(h,O,l){if(!l)for(var s in this._jsPlumb.overlays)this._jsPlumb.overlays[s][h+"Class"](O)},addClass:function(h,O){this._clazzManip("add",h,O)},removeClass:function(h,O){this._clazzManip("remove",h,O)}})}).call(typeof window<"u"?window:jt),(function(){var z=this,f=z.jsPlumb,X=z.jsPlumbUtil,Q=function(l,s,y){var D=!1;return{drag:function(){if(D)return D=!1,!0;if(s.element){var M=y.getUIPosition(arguments,y.getZoom());M!=null&&y.setPosition(s.element,M),y.repaint(s.element,M),l.paint({anchorPoint:l.anchor.getCurrentLocation({element:l})})}},stopDrag:function(){D=!0}}},Z=function(l,s,y,D){var M=s.createElement("div",{position:"absolute"});s.appendElement(M);var E=s.getId(M);s.setPosition(M,y),M.style.width=D[0]+"px",M.style.height=D[1]+"px",s.manage(E,M,!0),l.id=E,l.element=M},tt=function(l,s,y,D,M,E,g,e){var j=new f.FloatingAnchor({reference:s,referenceCanvas:D,jsPlumbInstance:E});return g({paintStyle:l,endpoint:y,anchor:j,source:M,scope:e})},h=["connectorStyle","connectorHoverStyle","connectorOverlays","connector","connectionType","connectorClass","connectorHoverClass"],O=function(l,s){var y=0;if(s!=null){for(var D=0;D<l.connections.length;D++)if(l.connections[D].sourceId===s||l.connections[D].targetId===s){y=D;break}}return l.connections[y]};f.Endpoint=function(l){var s=l._jsPlumb,y=l.newConnection,D=l.newEndpoint;this.idPrefix="_jsplumb_e_",this.defaultLabelLocation=[.5,.5],this.defaultOverlayKeys=["Overlays","EndpointOverlays"],f.OverlayCapableJsPlumbUIComponent.apply(this,arguments),this.appendToDefaultType({connectionType:l.connectionType,maxConnections:l.maxConnections==null?this._jsPlumb.instance.Defaults.MaxConnections:l.maxConnections,paintStyle:l.endpointStyle||l.paintStyle||l.style||this._jsPlumb.instance.Defaults.EndpointStyle||f.Defaults.EndpointStyle,hoverPaintStyle:l.endpointHoverStyle||l.hoverPaintStyle||this._jsPlumb.instance.Defaults.EndpointHoverStyle||f.Defaults.EndpointHoverStyle,connectorStyle:l.connectorStyle,connectorHoverStyle:l.connectorHoverStyle,connectorClass:l.connectorClass,connectorHoverClass:l.connectorHoverClass,connectorOverlays:l.connectorOverlays,connector:l.connector,connectorTooltip:l.connectorTooltip}),this._jsPlumb.enabled=l.enabled!==!1,this._jsPlumb.visible=!0,this.element=f.getElement(l.source),this._jsPlumb.uuid=l.uuid,this._jsPlumb.floatingEndpoint=null,this._jsPlumb.uuid&&(l.endpointsByUUID[this._jsPlumb.uuid]=this),this.elementId=l.elementId,this.dragProxy=l.dragProxy,this._jsPlumb.connectionCost=l.connectionCost,this._jsPlumb.connectionsDirected=l.connectionsDirected,this._jsPlumb.currentAnchorClass="",this._jsPlumb.events={};var M=l.deleteOnEmpty===!0;this.setDeleteOnEmpty=function(P){M=P};var E=(function(){var P=s.endpointAnchorClassPrefix+"-"+this._jsPlumb.currentAnchorClass;this._jsPlumb.currentAnchorClass=this.anchor.getCssClass();var w=s.endpointAnchorClassPrefix+(this._jsPlumb.currentAnchorClass?"-"+this._jsPlumb.currentAnchorClass:"");this.removeClass(P),this.addClass(w),f.updateClasses(this.element,w,P)}).bind(this);this.prepareAnchor=function(P){var w=this._jsPlumb.instance.makeAnchor(P,this.elementId,s);return w.bind("anchorChanged",(function(n){this.fire("anchorChanged",{endpoint:this,anchor:n}),E()}).bind(this)),w},this.setPreparedAnchor=function(P,w){return this._jsPlumb.instance.continuousAnchorFactory.clear(this.elementId),this.anchor=P,E(),w||this._jsPlumb.instance.repaint(this.elementId),this},this.setAnchor=function(P,w){var n=this.prepareAnchor(P);return this.setPreparedAnchor(n,w),this};var g=(function(P){if(this.connections.length>0)for(var w=0;w<this.connections.length;w++)this.connections[w].setHover(P,!1);else this.setHover(P)}).bind(this);this.bind("mouseover",function(){g(!0)}),this.bind("mouseout",function(){g(!1)}),l._transient||this._jsPlumb.instance.router.addEndpoint(this,this.elementId),this.prepareEndpoint=function(P,w){var n=function(b,C){var u=s.getRenderMode();if(f.Endpoints[u][b])return new f.Endpoints[u][b](C);if(!s.Defaults.DoNotThrowErrors)throw{msg:"jsPlumb: unknown endpoint type '"+b+"'"}},c={_jsPlumb:this._jsPlumb.instance,cssClass:l.cssClass,container:l.container,tooltip:l.tooltip,connectorTooltip:l.connectorTooltip,endpoint:this},a;return X.isString(P)?a=n(P,c):X.isArray(P)?(c=X.merge(P[1],c),a=n(P[0],c)):a=P.clone(),a.clone=(function(){if(X.isString(P))return n(P,c);if(X.isArray(P))return c=X.merge(P[1],c),n(P[0],c)}).bind(this),a.typeId=w,a},this.setEndpoint=function(P,w){var n=this.prepareEndpoint(P);this.setPreparedEndpoint(n,!0)},this.setPreparedEndpoint=function(P,w){this.endpoint!=null&&(this.endpoint.cleanup(),this.endpoint.destroy()),this.endpoint=P,this.type=this.endpoint.type,this.canvas=this.endpoint.canvas},f.extend(this,l,h),this.isSource=l.isSource||!1,this.isTemporarySource=l.isTemporarySource||!1,this.isTarget=l.isTarget||!1,this.connections=l.connections||[],this.connectorPointerEvents=l["connector-pointer-events"],this.scope=l.scope||s.getDefaultScope(),this.timestamp=null,this.reattachConnections=l.reattach||s.Defaults.ReattachConnections,this.connectionsDetachable=s.Defaults.ConnectionsDetachable,(l.connectionsDetachable===!1||l.detachable===!1)&&(this.connectionsDetachable=!1),this.dragAllowedWhenFull=l.dragAllowedWhenFull!==!1,l.onMaxConnections&&this.bind("maxConnections",l.onMaxConnections),this.addConnection=function(P){this.connections.push(P),this[(this.connections.length>0?"add":"remove")+"Class"](s.endpointConnectedClass),this[(this.isFull()?"add":"remove")+"Class"](s.endpointFullClass)},this.detachFromConnection=function(P,w,n){w=w??this.connections.indexOf(P),w>=0&&(this.connections.splice(w,1),this[(this.connections.length>0?"add":"remove")+"Class"](s.endpointConnectedClass),this[(this.isFull()?"add":"remove")+"Class"](s.endpointFullClass)),!n&&M&&this.connections.length===0&&s.deleteObject({endpoint:this,fireEvent:!1,deleteAttachedObjects:n!==!0})},this.deleteEveryConnection=function(P){for(var w=this.connections.length,n=0;n<w;n++)s.deleteConnection(this.connections[0],P)},this.detachFrom=function(P,w,n){for(var c=[],a=0;a<this.connections.length;a++)(this.connections[a].endpoints[1]===P||this.connections[a].endpoints[0]===P)&&c.push(this.connections[a]);for(var b=0,C=c.length;b<C;b++)s.deleteConnection(c[0]);return this},this.getElement=function(){return this.element},this.setElement=function(P){var w=this._jsPlumb.instance.getId(P),n=this.elementId;return X.removeWithFunction(l.endpointsByElement[this.elementId],(function(c){return c.id===this.id}).bind(this)),this.element=f.getElement(P),this.elementId=s.getId(this.element),s.router.rehomeEndpoint(this,n,this.element),s.dragManager.endpointAdded(this.element),X.addToList(l.endpointsByElement,w,this),this},this.makeInPlaceCopy=function(){var P=this.anchor.getCurrentLocation({element:this}),w=this.anchor.getOrientation(this),n=this.anchor.getCssClass(),c={bind:function(){},compute:function(){return[P[0],P[1]]},getCurrentLocation:function(){return[P[0],P[1]]},getOrientation:function(){return w},getCssClass:function(){return n}};return D({dropOptions:l.dropOptions,anchor:c,source:this.element,paintStyle:this.getPaintStyle(),endpoint:l.hideOnDrag?"Blank":this.endpoint,_transient:!0,scope:this.scope,reference:this})},this.connectorSelector=function(){return this.connections[0]},this.setStyle=this.setPaintStyle,this.paint=function(P){P=P||{};var w=P.timestamp,n=P.recalc!==!1;if(!w||this.timestamp!==w){var c=s.updateOffset({elId:this.elementId,timestamp:w}),a=P.offset?P.offset.o:c.o;if(a!=null){var b=P.anchorPoint,C=P.connectorPaintStyle;if(b==null){var u=P.dimensions||c.s,A={xy:[a.left,a.top],wh:u,element:this,timestamp:w};if(n&&this.anchor.isDynamic&&this.connections.length>0){var _=O(this,P.elementWithPrecedence),k=_.endpoints[0]===this?1:0,d=k===0?_.sourceId:_.targetId,S=s.getCachedData(d),R=S.o,B=S.s;A.index=k===0?1:0,A.connection=_,A.txy=[R.left,R.top],A.twh=B,A.tElement=_.endpoints[k],A.tRotation=s.getRotation(d)}else this.connections.length>0&&(A.connection=this.connections[0]);A.rotation=s.getRotation(this.elementId),b=this.anchor.compute(A)}this.endpoint.compute(b,this.anchor.getOrientation(this),this._jsPlumb.paintStyleInUse,C||this.paintStyleInUse),this.endpoint.paint(this._jsPlumb.paintStyleInUse,this.anchor),this.timestamp=w;for(var Y in this._jsPlumb.overlays)if(this._jsPlumb.overlays.hasOwnProperty(Y)){var i=this._jsPlumb.overlays[Y];i.isVisible()&&(this._jsPlumb.overlayPlacements[Y]=i.draw(this.endpoint,this._jsPlumb.paintStyleInUse),i.paint(this._jsPlumb.overlayPlacements[Y]))}}}},this.getTypeDescriptor=function(){return"endpoint"},this.isVisible=function(){return this._jsPlumb.visible},this.repaint=this.paint;var e=!1;this.initDraggable=function(){if(!e&&f.isDragSupported(this.element)){var P={id:null,element:null},w=null,n=!1,c=null,a=Q(this,P,s),b=l.dragOptions||{},C={},u=f.dragEvents.start,A=f.dragEvents.stop,_=f.dragEvents.drag,k=f.dragEvents.beforeStart,d,S=function(Y){d=Y.e.payload||{}},R=(function(Y){w=this.connectorSelector();var i=!0;this.isEnabled()||(i=!1),w==null&&!this.isSource&&!this.isTemporarySource&&(i=!1),this.isSource&&this.isFull()&&!(w!=null&&this.dragAllowedWhenFull)&&(i=!1),w!=null&&!w.isDetachable(this)&&(this.isFull()?i=!1:w=null);var o=s.checkCondition(w==null?"beforeDrag":"beforeStartDetach",{endpoint:this,source:this.element,sourceId:this.elementId,connection:w});if(o===!1?i=!1:typeof o=="object"?f.extend(o,d||{}):o=d||{},i===!1)return s.stopDrag&&s.stopDrag(this.canvas),a.stopDrag(),!1;for(var t=0;t<this.connections.length;t++)this.connections[t].setHover(!1);this.addClass("endpointDrag"),s.setConnectionBeingDragged(!0),w&&!this.isFull()&&this.isSource&&(w=null),s.updateOffset({elId:this.elementId});var p=this._jsPlumb.instance.getOffset(this.canvas),v=this.canvas,F=this._jsPlumb.instance.getSize(this.canvas);Z(P,s,p,F),s.setAttributes(this.canvas,{dragId:P.id,elId:this.elementId});var L=this.dragProxy||this.endpoint;if(this.dragProxy==null&&this.connectionType!=null){var V=this._jsPlumb.instance.deriveEndpointAndAnchorSpec(this.connectionType);V.endpoints[1]&&(L=V.endpoints[1])}var G=this._jsPlumb.instance.makeAnchor("Center");G.isFloating=!0,this._jsPlumb.floatingEndpoint=tt(this.getPaintStyle(),G,L,this.canvas,P.element,s,D,this.scope);var W=this._jsPlumb.floatingEndpoint.anchor;if(w==null)this.setHover(!1,!1),w=y({sourceEndpoint:this,targetEndpoint:this._jsPlumb.floatingEndpoint,source:this.element,target:P.element,anchors:[this.anchor,this._jsPlumb.floatingEndpoint.anchor],paintStyle:l.connectorStyle,hoverPaintStyle:l.connectorHoverStyle,connector:l.connector,overlays:l.connectorOverlays,type:this.connectionType,cssClass:this.connectorClass,hoverClass:this.connectorHoverClass,scope:l.scope,data:o}),w.pending=!0,w.addClass(s.draggingClass),this._jsPlumb.floatingEndpoint.addClass(s.draggingClass),this._jsPlumb.floatingEndpoint.anchor=W,s.fire("connectionDrag",w),s.router.newConnection(w);else{n=!0,w.setHover(!1);var lt=w.endpoints[0].id===this.id?0:1;this.detachFromConnection(w,null,!0);var st=s.getDragScope(v);s.setAttribute(this.canvas,"originalScope",st),s.fire("connectionDrag",w),lt===0?(c=[w.source,w.sourceId,v,st],s.router.sourceOrTargetChanged(w.endpoints[lt].elementId,P.id,w,P.element,0)):(c=[w.target,w.targetId,v,st],s.router.sourceOrTargetChanged(w.endpoints[lt].elementId,P.id,w,P.element,1)),w.suspendedEndpoint=w.endpoints[lt],w.suspendedElement=w.endpoints[lt].getElement(),w.suspendedElementId=w.endpoints[lt].elementId,w.suspendedElementType=lt===0?"source":"target",w.suspendedEndpoint.setHover(!1),this._jsPlumb.floatingEndpoint.referenceEndpoint=w.suspendedEndpoint,w.endpoints[lt]=this._jsPlumb.floatingEndpoint,w.addClass(s.draggingClass),this._jsPlumb.floatingEndpoint.addClass(s.draggingClass)}s.registerFloatingConnection(P,w,this._jsPlumb.floatingEndpoint),s.currentlyDragging=!0}).bind(this),B=(function(){if(s.setConnectionBeingDragged(!1),w&&w.endpoints!=null){var Y=s.getDropEvent(arguments),i=s.getFloatingAnchorIndex(w);if(w.endpoints[i===0?1:0].anchor.locked=!1,w.removeClass(s.draggingClass),this._jsPlumb&&(w.deleteConnectionNow||w.endpoints[i]===this._jsPlumb.floatingEndpoint)&&n&&w.suspendedEndpoint){i===0?(w.floatingElement=w.source,w.floatingId=w.sourceId,w.floatingEndpoint=w.endpoints[0],w.floatingIndex=0,w.source=c[0],w.sourceId=c[1]):(w.floatingElement=w.target,w.floatingId=w.targetId,w.floatingEndpoint=w.endpoints[1],w.floatingIndex=1,w.target=c[0],w.targetId=c[1]);var o=this._jsPlumb.floatingEndpoint;s.setDragScope(c[2],c[3]),w.endpoints[i]=w.suspendedEndpoint,w.isReattach()||w._forceReattach||w._forceDetach||!s.deleteConnection(w,{originalEvent:Y})?(w.setHover(!1),w._forceDetach=null,w._forceReattach=null,this._jsPlumb.floatingEndpoint.detachFromConnection(w),w.suspendedEndpoint.addConnection(w),i===1?s.router.sourceOrTargetChanged(w.floatingId,w.targetId,w,w.target,i):s.router.sourceOrTargetChanged(w.floatingId,w.sourceId,w,w.source,i),s.repaint(c[1])):s.deleteObject({endpoint:o})}this.deleteAfterDragStop?s.deleteObject({endpoint:this}):this._jsPlumb&&this.paint({recalc:!1}),s.fire("connectionDragStop",w,Y),w.pending&&s.fire("connectionAborted",w,Y),s.currentlyDragging=!1,w.suspendedElement=null,w.suspendedEndpoint=null,w=null}P&&P.element&&s.remove(P.element,!1,!1),this._jsPlumb&&(this.canvas.style.visibility="visible",this.anchor.locked=!1,this._jsPlumb.floatingEndpoint=null)}).bind(this);b=f.extend(C,b),b.scope=this.scope||b.scope,b[k]=X.wrap(b[k],S,!1),b[u]=X.wrap(b[u],R,!1),b[_]=X.wrap(b[_],a.drag),b[A]=X.wrap(b[A],B),b.multipleDrop=!1,b.canDrag=(function(){return this.isSource||this.isTemporarySource||this.connections.length>0&&this.connectionsDetachable!==!1}).bind(this),s.initDraggable(this.canvas,b,"internal"),this.canvas._jsPlumbRelatedElement=this.element,e=!0}};var j=l.endpoint||this._jsPlumb.instance.Defaults.Endpoint||f.Defaults.Endpoint;this.setEndpoint(j,!0);var I=l.anchor?l.anchor:l.anchors?l.anchors:s.Defaults.Anchor||"Top";this.setAnchor(I,!0);var U=["default",l.type||""].join(" ");this.addType(U,l.data,!0),this.canvas=this.endpoint.canvas,this.canvas._jsPlumb=this,this.initDraggable();var N=(function(P,w,n,c){if(f.isDropSupported(this.element)){var a=l.dropOptions||s.Defaults.DropOptions||f.Defaults.DropOptions;a=f.extend({},a),a.scope=a.scope||this.scope;var b=f.dragEvents.drop,C=f.dragEvents.over,u=f.dragEvents.out,A=this,_=s.EndpointDropHandler({getEndpoint:function(){return A},jsPlumb:s,enabled:function(){return n!=null?n.isEnabled():!0},isFull:function(){return n.isFull()},element:this.element,elementId:this.elementId,isSource:this.isSource,isTarget:this.isTarget,addClass:function(k){A.addClass(k)},removeClass:function(k){A.removeClass(k)},isDropAllowed:function(){return A.isDropAllowed.apply(A,arguments)},reference:c,isRedrop:function(k,d){return k.suspendedEndpoint&&d.reference&&k.suspendedEndpoint.id===d.reference.id}});a[b]=X.wrap(a[b],_,!0),a[C]=X.wrap(a[C],(function(){var k=f.getDragObject(arguments),d=s.getAttribute(f.getElement(k),"dragId"),S=s.getFloatingConnectionFor(d);if(S!=null){var R=s.getFloatingAnchorIndex(S),B=this.isTarget&&R!==0||S.suspendedEndpoint&&this.referenceEndpoint&&this.referenceEndpoint.id===S.suspendedEndpoint.id;if(B){var Y=s.checkCondition("checkDropAllowed",{sourceEndpoint:S.endpoints[R],targetEndpoint:this,connection:S});this[(Y?"add":"remove")+"Class"](s.endpointDropAllowedClass),this[(Y?"remove":"add")+"Class"](s.endpointDropForbiddenClass),S.endpoints[R].anchor.over(this.anchor,this)}}}).bind(this)),a[u]=X.wrap(a[u],(function(){var k=f.getDragObject(arguments),d=k==null?null:s.getAttribute(f.getElement(k),"dragId"),S=d?s.getFloatingConnectionFor(d):null;if(S!=null){var R=s.getFloatingAnchorIndex(S),B=this.isTarget&&R!==0||S.suspendedEndpoint&&this.referenceEndpoint&&this.referenceEndpoint.id===S.suspendedEndpoint.id;B&&(this.removeClass(s.endpointDropAllowedClass),this.removeClass(s.endpointDropForbiddenClass),S.endpoints[R].anchor.out())}}).bind(this)),s.initDroppable(P,a,"internal",w)}}).bind(this);return this.anchor.isFloating||N(this.canvas,!(l._transient||this.anchor.isFloating),this,l.reference),this},X.extend(f.Endpoint,f.OverlayCapableJsPlumbUIComponent,{setVisible:function(l,s,y){if(this._jsPlumb.visible=l,this.canvas&&(this.canvas.style.display=l?"block":"none"),this[l?"showOverlays":"hideOverlays"](),!s){for(var D=0;D<this.connections.length;D++)if(this.connections[D].setVisible(l),!y){var M=this===this.connections[D].endpoints[0]?1:0;this.connections[D].endpoints[M].connections.length===1&&this.connections[D].endpoints[M].setVisible(l,!0,!0)}}},getAttachedElements:function(){return this.connections},applyType:function(l,s){this.setPaintStyle(l.endpointStyle||l.paintStyle,s),this.setHoverPaintStyle(l.endpointHoverStyle||l.hoverPaintStyle,s),l.maxConnections!=null&&(this._jsPlumb.maxConnections=l.maxConnections),l.scope&&(this.scope=l.scope),f.extend(this,l,h),l.cssClass!=null&&this.canvas&&this._jsPlumb.instance.addClass(this.canvas,l.cssClass),f.OverlayCapableJsPlumbUIComponent.applyType(this,l)},isEnabled:function(){return this._jsPlumb.enabled},setEnabled:function(l){this._jsPlumb.enabled=l},cleanup:function(){var l=this._jsPlumb.instance.endpointAnchorClassPrefix+(this._jsPlumb.currentAnchorClass?"-"+this._jsPlumb.currentAnchorClass:"");f.removeClass(this.element,l),this.anchor=null,this.endpoint.cleanup(!0),this.endpoint.destroy(),this.endpoint=null,this._jsPlumb.instance.destroyDraggable(this.canvas,"internal"),this._jsPlumb.instance.destroyDroppable(this.canvas,"internal")},setHover:function(l){this.endpoint&&this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged()&&this.endpoint.setHover(l)},isFull:function(){return this._jsPlumb.maxConnections===0?!0:!(this.isFloating()||this._jsPlumb.maxConnections<0||this.connections.length<this._jsPlumb.maxConnections)},isFloating:function(){return this.anchor!=null&&this.anchor.isFloating},isConnectedTo:function(l){var s=!1;if(l){for(var y=0;y<this.connections.length;y++)if(this.connections[y].endpoints[1]===l||this.connections[y].endpoints[0]===l){s=!0;break}}return s},getConnectionCost:function(){return this._jsPlumb.connectionCost},setConnectionCost:function(l){this._jsPlumb.connectionCost=l},areConnectionsDirected:function(){return this._jsPlumb.connectionsDirected},setConnectionsDirected:function(l){this._jsPlumb.connectionsDirected=l},setElementId:function(l){this.elementId=l,this.anchor.elementId=l},setReferenceElement:function(l){this.element=f.getElement(l)},setDragAllowedWhenFull:function(l){this.dragAllowedWhenFull=l},equals:function(l){return this.anchor.equals(l.anchor)},getUuid:function(){return this._jsPlumb.uuid},computeAnchor:function(l){return this.anchor.compute(l)}}),z.jsPlumbInstance.prototype.EndpointDropHandler=function(l){return function(s){var y=l.jsPlumb;l.removeClass(y.endpointDropAllowedClass),l.removeClass(y.endpointDropForbiddenClass);var D=y.getDropEvent(arguments),M=y.getDragObject(arguments),E=y.getAttribute(M,"dragId");y.getAttribute(M,"elId");var g=y.getAttribute(M,"originalScope"),e=y.getFloatingConnectionFor(E);if(e!=null){var j=e.suspendedEndpoint!=null;if(!(j&&e.suspendedEndpoint._jsPlumb==null)){var I=l.getEndpoint(e);if(I!=null){if(l.isRedrop(e,l)){e._forceReattach=!0,e.setHover(!1),l.maybeCleanup&&l.maybeCleanup(I);return}var U=y.getFloatingAnchorIndex(e);if(U===0&&!l.isSource||U===1&&!l.isTarget){l.maybeCleanup&&l.maybeCleanup(I);return}l.onDrop&&l.onDrop(e),g&&y.setDragScope(M,g);var N=l.isFull(s);if(N&&I.fire("maxConnections",{endpoint:this,connection:e,maxConnections:I._jsPlumb.maxConnections},D),!N&&l.enabled()){var P=!0;U===0?(e.floatingElement=e.source,e.floatingId=e.sourceId,e.floatingEndpoint=e.endpoints[0],e.floatingIndex=0,e.source=l.element,e.sourceId=y.getId(l.element)):(e.floatingElement=e.target,e.floatingId=e.targetId,e.floatingEndpoint=e.endpoints[1],e.floatingIndex=1,e.target=l.element,e.targetId=y.getId(l.element)),j&&e.suspendedEndpoint.id!==I.id&&(!e.isDetachAllowed(e)||!e.endpoints[U].isDetachAllowed(e)||!e.suspendedEndpoint.isDetachAllowed(e)||!y.checkCondition("beforeDetach",e))&&(P=!1);var w=(function(c){e.endpoints[U].detachFromConnection(e),e.suspendedEndpoint&&e.suspendedEndpoint.detachFromConnection(e),e.endpoints[U]=I,I.addConnection(e);var a=I.getParameters();for(var b in a)e.setParameter(b,a[b]);if(!j)a.draggable&&y.initDraggable(this.element,l.dragOptions,"internal",y);else{var C=e.suspendedEndpoint.elementId;y.fireMoveEvent({index:U,originalSourceId:U===0?C:e.sourceId,newSourceId:U===0?I.elementId:e.sourceId,originalTargetId:U===1?C:e.targetId,newTargetId:U===1?I.elementId:e.targetId,originalSourceEndpoint:U===0?e.suspendedEndpoint:e.endpoints[0],newSourceEndpoint:U===0?I:e.endpoints[0],originalTargetEndpoint:U===1?e.suspendedEndpoint:e.endpoints[1],newTargetEndpoint:U===1?I:e.endpoints[1],connection:e},D)}if(U===1?y.router.sourceOrTargetChanged(e.floatingId,e.targetId,e,e.target,1):y.router.sourceOrTargetChanged(e.floatingId,e.sourceId,e,e.source,0),e.endpoints[0].finalEndpoint){var u=e.endpoints[0];u.detachFromConnection(e),e.endpoints[0]=e.endpoints[0].finalEndpoint,e.endpoints[0].addConnection(e)}X.isObject(c)&&e.mergeData(c),y.finaliseConnection(e,null,D,!1),e.setHover(!1),y.revalidate(e.endpoints[0].element)}).bind(this),n=function(){e.suspendedEndpoint&&(e.endpoints[U]=e.suspendedEndpoint,e.setHover(!1),e._forceDetach=!0,U===0?(e.source=e.suspendedEndpoint.element,e.sourceId=e.suspendedEndpoint.elementId):(e.target=e.suspendedEndpoint.element,e.targetId=e.suspendedEndpoint.elementId),e.suspendedEndpoint.addConnection(e),U===1?y.router.sourceOrTargetChanged(e.floatingId,e.targetId,e,e.target,1):y.router.sourceOrTargetChanged(e.floatingId,e.sourceId,e,e.source,0),y.repaint(e.sourceId),e._forceDetach=!1)};if(P=P&&l.isDropAllowed(e.sourceId,e.targetId,e.scope,e,I),P)return w(P),!0;n()}l.maybeCleanup&&l.maybeCleanup(I),y.currentlyDragging=!1}}}}}}).call(typeof window<"u"?window:jt),(function(){var z=this,f=z.jsPlumb,X=z.jsPlumbUtil,Q=function(h,O,l,s,y){if(f.Connectors[O]=f.Connectors[O]||{},f.Connectors[O][l]==null){if(f.Connectors[l]==null){if(h.Defaults.DoNotThrowErrors)return null;throw new TypeError("jsPlumb: unknown connector type '"+l+"'")}f.Connectors[O][l]=function(){f.Connectors[l].apply(this,arguments),f.ConnectorRenderers[O].apply(this,arguments)},X.extend(f.Connectors[O][l],[f.Connectors[l],f.ConnectorRenderers[O]])}return new f.Connectors[O][l](s,y)},Z=function(h,O,l){return h?l.makeAnchor(h,O,l):null},tt=function(h,O,l,s){O!=null&&(O._jsPlumbConnections=O._jsPlumbConnections||{},s?delete O._jsPlumbConnections[h.id]:O._jsPlumbConnections[h.id]=!0,X.isEmpty(O._jsPlumbConnections)?l.removeClass(O,l.connectedClass):l.addClass(O,l.connectedClass))};f.Connection=function(h){var O=h.newEndpoint;this.id=h.id,this.connector=null,this.idPrefix="_jsplumb_c_",this.defaultLabelLocation=.5,this.defaultOverlayKeys=["Overlays","ConnectionOverlays"],this.previousConnection=h.previousConnection,this.source=f.getElement(h.source),this.target=f.getElement(h.target),f.OverlayCapableJsPlumbUIComponent.apply(this,arguments),h.sourceEndpoint?(this.source=h.sourceEndpoint.getElement(),this.sourceId=h.sourceEndpoint.elementId):this.sourceId=this._jsPlumb.instance.getId(this.source),h.targetEndpoint?(this.target=h.targetEndpoint.getElement(),this.targetId=h.targetEndpoint.elementId):this.targetId=this._jsPlumb.instance.getId(this.target),this.scope=h.scope,this.endpoints=[],this.endpointStyles=[];var l=this._jsPlumb.instance;l.manage(this.sourceId,this.source),l.manage(this.targetId,this.target),this._jsPlumb.visible=!0,this._jsPlumb.params={cssClass:h.cssClass,container:h.container,"pointer-events":h["pointer-events"],editorParams:h.editorParams,overlays:h.overlays},this._jsPlumb.lastPaintedAt=null,this.bind("mouseover",(function(){this.setHover(!0)}).bind(this)),this.bind("mouseout",(function(){this.setHover(!1)}).bind(this)),this.makeEndpoint=function(b,C,u,A,_){return u=u||this._jsPlumb.instance.getId(C),this.prepareEndpoint(l,O,this,A,b?0:1,h,C,u,_)},h.type&&(h.endpoints=h.endpoints||this._jsPlumb.instance.deriveEndpointAndAnchorSpec(h.type).endpoints);var s=this.makeEndpoint(!0,this.source,this.sourceId,h.sourceEndpoint),y=this.makeEndpoint(!1,this.target,this.targetId,h.targetEndpoint);s&&X.addToList(h.endpointsByElement,this.sourceId,s),y&&X.addToList(h.endpointsByElement,this.targetId,y),this.scope||(this.scope=this.endpoints[0].scope),h.deleteEndpointsOnEmpty!=null&&(this.endpoints[0].setDeleteOnEmpty(h.deleteEndpointsOnEmpty),this.endpoints[1].setDeleteOnEmpty(h.deleteEndpointsOnEmpty));var D=l.Defaults.ConnectionsDetachable;h.detachable===!1&&(D=!1),this.endpoints[0].connectionsDetachable===!1&&(D=!1),this.endpoints[1].connectionsDetachable===!1&&(D=!1);var M=h.reattach||this.endpoints[0].reattachConnections||this.endpoints[1].reattachConnections||l.Defaults.ReattachConnections;this.appendToDefaultType({detachable:D,reattach:M,paintStyle:this.endpoints[0].connectorStyle||this.endpoints[1].connectorStyle||h.paintStyle||l.Defaults.PaintStyle||f.Defaults.PaintStyle,hoverPaintStyle:this.endpoints[0].connectorHoverStyle||this.endpoints[1].connectorHoverStyle||h.hoverPaintStyle||l.Defaults.HoverPaintStyle||f.Defaults.HoverPaintStyle});var E=l.getSuspendedAt();if(!l.isSuspendDrawing()){var g=l.getCachedData(this.sourceId),e=g.o,j=g.s,I=l.getCachedData(this.targetId),U=I.o,N=I.s,P=E||jsPlumbUtil.uuid(),w=this.endpoints[0].anchor.compute({xy:[e.left,e.top],wh:j,element:this.endpoints[0],elementId:this.endpoints[0].elementId,txy:[U.left,U.top],twh:N,tElement:this.endpoints[1],timestamp:P,rotation:l.getRotation(this.endpoints[0].elementId)});this.endpoints[0].paint({anchorLoc:w,timestamp:P}),w=this.endpoints[1].anchor.compute({xy:[U.left,U.top],wh:N,element:this.endpoints[1],elementId:this.endpoints[1].elementId,txy:[e.left,e.top],twh:j,tElement:this.endpoints[0],timestamp:P,rotation:l.getRotation(this.endpoints[1].elementId)}),this.endpoints[1].paint({anchorLoc:w,timestamp:P})}this.getTypeDescriptor=function(){return"connection"},this.getAttachedElements=function(){return this.endpoints},this.isDetachable=function(b){return this._jsPlumb.detachable===!1?!1:b!=null?b.connectionsDetachable===!0:this._jsPlumb.detachable===!0},this.setDetachable=function(b){this._jsPlumb.detachable=b===!0},this.isReattach=function(){return this._jsPlumb.reattach===!0||this.endpoints[0].reattachConnections===!0||this.endpoints[1].reattachConnections===!0},this.setReattach=function(b){this._jsPlumb.reattach=b===!0},this._jsPlumb.cost=h.cost||this.endpoints[0].getConnectionCost(),this._jsPlumb.directed=h.directed,h.directed==null&&(this._jsPlumb.directed=this.endpoints[0].areConnectionsDirected());var n=f.extend({},this.endpoints[1].getParameters());f.extend(n,this.endpoints[0].getParameters()),f.extend(n,this.getParameters()),this.setParameters(n),this.setConnector(this.endpoints[0].connector||this.endpoints[1].connector||h.connector||l.Defaults.Connector||f.Defaults.Connector,!0);var c=h.data==null||!X.isObject(h.data)?{}:h.data;this.getData=function(){return c},this.setData=function(b){c=b||{}},this.mergeData=function(b){c=f.extend(c,b)};var a=["default",this.endpoints[0].connectionType,this.endpoints[1].connectionType,h.type].join(" ");/[^\s]/.test(a)&&this.addType(a,h.data,!0),this.updateConnectedClass()},X.extend(f.Connection,f.OverlayCapableJsPlumbUIComponent,{applyType:function(h,O,l){var s=null;h.connector!=null&&(s=this.getCachedTypeItem("connector",l.connector),s==null&&(s=this.prepareConnector(h.connector,l.connector),this.cacheTypeItem("connector",s,l.connector)),this.setPreparedConnector(s)),h.detachable!=null&&this.setDetachable(h.detachable),h.reattach!=null&&this.setReattach(h.reattach),h.scope&&(this.scope=h.scope),h.cssClass!=null&&this.canvas&&this._jsPlumb.instance.addClass(this.canvas,h.cssClass);var y=null;h.anchor?(y=this.getCachedTypeItem("anchors",l.anchor),y==null&&(y=[this._jsPlumb.instance.makeAnchor(h.anchor),this._jsPlumb.instance.makeAnchor(h.anchor)],this.cacheTypeItem("anchors",y,l.anchor))):h.anchors&&(y=this.getCachedTypeItem("anchors",l.anchors),y==null&&(y=[this._jsPlumb.instance.makeAnchor(h.anchors[0]),this._jsPlumb.instance.makeAnchor(h.anchors[1])],this.cacheTypeItem("anchors",y,l.anchors))),y!=null&&(this.endpoints[0].anchor=y[0],this.endpoints[1].anchor=y[1],this.endpoints[1].anchor.isDynamic&&this._jsPlumb.instance.repaint(this.endpoints[1].elementId)),f.OverlayCapableJsPlumbUIComponent.applyType(this,h)},addClass:function(h,O){O&&(this.endpoints[0].addClass(h),this.endpoints[1].addClass(h),this.suspendedEndpoint&&this.suspendedEndpoint.addClass(h)),this.connector&&this.connector.addClass(h)},removeClass:function(h,O){O&&(this.endpoints[0].removeClass(h),this.endpoints[1].removeClass(h),this.suspendedEndpoint&&this.suspendedEndpoint.removeClass(h)),this.connector&&this.connector.removeClass(h)},isVisible:function(){return this._jsPlumb.visible},setVisible:function(h){this._jsPlumb.visible=h,this.connector&&this.connector.setVisible(h),this.repaint()},cleanup:function(){this.updateConnectedClass(!0),this.endpoints=null,this.source=null,this.target=null,this.connector!=null&&(this.connector.cleanup(!0),this.connector.destroy(!0)),this.connector=null},updateConnectedClass:function(h){this._jsPlumb&&(tt(this,this.source,this._jsPlumb.instance,h),tt(this,this.target,this._jsPlumb.instance,h))},setHover:function(h){this.connector&&this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged()&&(this.connector.setHover(h),z.jsPlumb[h?"addClass":"removeClass"](this.source,this._jsPlumb.instance.hoverSourceClass),z.jsPlumb[h?"addClass":"removeClass"](this.target,this._jsPlumb.instance.hoverTargetClass))},getUuids:function(){return[this.endpoints[0].getUuid(),this.endpoints[1].getUuid()]},getCost:function(){return this._jsPlumb?this._jsPlumb.cost:-1/0},setCost:function(h){this._jsPlumb.cost=h},isDirected:function(){return this._jsPlumb.directed},getConnector:function(){return this.connector},prepareConnector:function(h,O){var l={_jsPlumb:this._jsPlumb.instance,cssClass:this._jsPlumb.params.cssClass,container:this._jsPlumb.params.container,"pointer-events":this._jsPlumb.params["pointer-events"]},s=this._jsPlumb.instance.getRenderMode(),y;return X.isString(h)?y=Q(this._jsPlumb.instance,s,h,l,this):X.isArray(h)&&(h.length===1?y=Q(this._jsPlumb.instance,s,h[0],l,this):y=Q(this._jsPlumb.instance,s,h[0],X.merge(h[1],l),this)),O!=null&&(y.typeId=O),y},setPreparedConnector:function(h,O,l,s){if(this.connector!==h){var y,D="";if(this.connector!=null&&(y=this.connector,D=y.getClass(),this.connector.cleanup(),this.connector.destroy()),this.connector=h,s&&this.cacheTypeItem("connector",h,s),this.canvas=this.connector.canvas,this.bgCanvas=this.connector.bgCanvas,this.connector.reattach(this._jsPlumb.instance),this.addClass(D),this.canvas&&(this.canvas._jsPlumb=this),this.bgCanvas&&(this.bgCanvas._jsPlumb=this),y!=null)for(var M=this.getOverlays(),E=0;E<M.length;E++)M[E].transfer&&M[E].transfer(this.connector);l||this.setListenerComponent(this.connector),O||this.repaint()}},setConnector:function(h,O,l,s){var y=this.prepareConnector(h,s);this.setPreparedConnector(y,O,l,s)},paint:function(h){if(!this._jsPlumb.instance.isSuspendDrawing()&&this._jsPlumb.visible){h=h||{};var O=h.timestamp,l=!1,s=l?this.sourceId:this.targetId,y=l?this.targetId:this.sourceId,D=l?0:1,M=l?1:0;if(O==null||O!==this._jsPlumb.lastPaintedAt){var E=this._jsPlumb.instance.updateOffset({elId:y}).o,g=this._jsPlumb.instance.updateOffset({elId:s}).o,e=this.endpoints[M],j=this.endpoints[D],I=e.anchor.getCurrentLocation({xy:[E.left,E.top],wh:[E.width,E.height],element:e,timestamp:O,rotation:this._jsPlumb.instance.getRotation(this.sourceId)}),U=j.anchor.getCurrentLocation({xy:[g.left,g.top],wh:[g.width,g.height],element:j,timestamp:O,rotation:this._jsPlumb.instance.getRotation(this.targetId)});this.connector.resetBounds(),this.connector.compute({sourcePos:I,targetPos:U,sourceOrientation:e.anchor.getOrientation(e),targetOrientation:j.anchor.getOrientation(j),sourceEndpoint:this.endpoints[M],targetEndpoint:this.endpoints[D],"stroke-width":this._jsPlumb.paintStyleInUse.strokeWidth,sourceInfo:E,targetInfo:g});var N={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};for(var P in this._jsPlumb.overlays)if(this._jsPlumb.overlays.hasOwnProperty(P)){var w=this._jsPlumb.overlays[P];w.isVisible()&&(this._jsPlumb.overlayPlacements[P]=w.draw(this.connector,this._jsPlumb.paintStyleInUse,this.getAbsoluteOverlayPosition(w)),N.minX=Math.min(N.minX,this._jsPlumb.overlayPlacements[P].minX),N.maxX=Math.max(N.maxX,this._jsPlumb.overlayPlacements[P].maxX),N.minY=Math.min(N.minY,this._jsPlumb.overlayPlacements[P].minY),N.maxY=Math.max(N.maxY,this._jsPlumb.overlayPlacements[P].maxY))}var n=parseFloat(this._jsPlumb.paintStyleInUse.strokeWidth||1)/2,c=parseFloat(this._jsPlumb.paintStyleInUse.strokeWidth||0),a={xmin:Math.min(this.connector.bounds.minX-(n+c),N.minX),ymin:Math.min(this.connector.bounds.minY-(n+c),N.minY),xmax:Math.max(this.connector.bounds.maxX+(n+c),N.maxX),ymax:Math.max(this.connector.bounds.maxY+(n+c),N.maxY)};this.connector.paintExtents=a,this.connector.paint(this._jsPlumb.paintStyleInUse,null,a);for(var b in this._jsPlumb.overlays)if(this._jsPlumb.overlays.hasOwnProperty(b)){var C=this._jsPlumb.overlays[b];C.isVisible()&&C.paint(this._jsPlumb.overlayPlacements[b],a)}}this._jsPlumb.lastPaintedAt=O}},repaint:function(h){var O=jsPlumb.extend(h||{},{});O.elId=this.sourceId,this.paint(O)},prepareEndpoint:function(h,O,l,s,y,D,M,E,g){var e;if(s)l.endpoints[y]=s,s.addConnection(l);else{D.endpoints||(D.endpoints=[null,null]);var j=g||D.endpoints[y]||D.endpoint||h.Defaults.Endpoints[y]||f.Defaults.Endpoints[y]||h.Defaults.Endpoint||f.Defaults.Endpoint;D.endpointStyles||(D.endpointStyles=[null,null]),D.endpointHoverStyles||(D.endpointHoverStyles=[null,null]);var I=D.endpointStyles[y]||D.endpointStyle||h.Defaults.EndpointStyles[y]||f.Defaults.EndpointStyles[y]||h.Defaults.EndpointStyle||f.Defaults.EndpointStyle;I.fill==null&&D.paintStyle!=null&&(I.fill=D.paintStyle.stroke),I.outlineStroke==null&&D.paintStyle!=null&&(I.outlineStroke=D.paintStyle.outlineStroke),I.outlineWidth==null&&D.paintStyle!=null&&(I.outlineWidth=D.paintStyle.outlineWidth);var U=D.endpointHoverStyles[y]||D.endpointHoverStyle||h.Defaults.EndpointHoverStyles[y]||f.Defaults.EndpointHoverStyles[y]||h.Defaults.EndpointHoverStyle||f.Defaults.EndpointHoverStyle;D.hoverPaintStyle!=null&&(U==null&&(U={}),U.fill==null&&(U.fill=D.hoverPaintStyle.stroke));var N=D.anchors?D.anchors[y]:D.anchor?D.anchor:Z(h.Defaults.Anchors[y],E,h)||Z(f.Defaults.Anchors[y],E,h)||Z(h.Defaults.Anchor,E,h)||Z(f.Defaults.Anchor,E,h),P=D.uuids?D.uuids[y]:null;e=O({paintStyle:I,hoverPaintStyle:U,endpoint:j,connections:[l],uuid:P,anchor:N,source:M,scope:D.scope,reattach:D.reattach||h.Defaults.ReattachConnections,detachable:D.detachable||h.Defaults.ConnectionsDetachable}),s==null&&e.setDeleteOnEmpty(!0),l.endpoints[y]=e,D.drawEndpoints===!1&&e.setVisible(!1,!0,!0)}return e},replaceEndpoint:function(h,O){var l=this.endpoints[h],s=l.elementId,y=this._jsPlumb.instance.getEndpoints(s),D=y.indexOf(l),M=this.makeEndpoint(h===0,l.element,s,null,O);this.endpoints[h]=M,y.splice(D,1,M),this._jsPlumb.instance.deleteObject({endpoint:l,deleteAttachedObjects:!1}),this._jsPlumb.instance.fire("endpointReplaced",{previous:l,current:M}),this._jsPlumb.instance.router.sourceOrTargetChanged(this.endpoints[1].elementId,this.endpoints[1].elementId,this,this.endpoints[1].element,1)}})}).call(typeof window<"u"?window:jt),(function(){var z=this,f=z.jsPlumbUtil,X=z.jsPlumb;X.AnchorManager=function(h){var O={},l={},s={},y={},D=this,M={},E=h.jsPlumbInstance,g={},e=function(a,b,C,u,A,_,k,d){for(var S=[],R=b[A?0:1]/(u.length+1),B=0;B<u.length;B++){var Y=(B+1)*R,i=_*b[A?1:0];k&&(Y=b[A?0:1]-Y);var o=A?Y:i,t=C.left+o,p=o/b[0],v=A?i:Y,F=C.top+v,L=v/b[1];if(d!==0){var V=jsPlumbUtil.rotatePoint([t,F],[C.centerx,C.centery],d);t=V[0],F=V[1]}S.push([t,F,p,L,u[B][1],u[B][2]])}return S},j=function(a,b){return b[0][0]-a[0][0]},I=function(a,b){var C=a[0][0]<0?-Math.PI-a[0][0]:Math.PI-a[0][0],u=b[0][0]<0?-Math.PI-b[0][0]:Math.PI-b[0][0];return C-u},U={top:I,right:j,bottom:j,left:I},N=function(a,b){return a.sort(b)},P=function(a,b){var C=E.getCachedData(a),u=C.s,A=C.o,_=function(k,d,S,R,B,Y,i){if(R.length>0)for(var o=N(R,U[k]),t=k==="right"||k==="top",p=E.getRotation(a),v=e(k,d,S,o,B,Y,t,p),F=function(lt,st){l[lt.id]=[st[0],st[1],st[2],st[3]],s[lt.id]=i},L=0;L<v.length;L++){var V=v[L][4],G=V.endpoints[0].elementId===a,W=V.endpoints[1].elementId===a;G&&F(V.endpoints[0],v[L]),W&&F(V.endpoints[1],v[L])}};_("bottom",u,A,b.bottom,!0,1,[0,1]),_("top",u,A,b.top,!0,0,[0,-1]),_("left",u,A,b.left,!1,0,[-1,0]),_("right",u,A,b.right,!1,1,[1,0])};this.reset=function(){O={},y={},M={}},this.addFloatingConnection=function(a,b){g[a]=b},this.newConnection=function(a){var b=a.sourceId,C=a.targetId,u=a.endpoints,A=!0,_=function(k,d,S,R,B){b===C&&S.isContinuous&&(a._jsPlumb.instance.removeElement(u[1].canvas),A=!1),f.addToList(y,R,[B,d,S.constructor===X.DynamicAnchor])};_(0,u[0],u[0].anchor,C,a),A&&_(1,u[1],u[1].anchor,b,a)};var w=function(a){(function(b,C){if(b){var u=function(A){return A[4]===C};f.removeWithFunction(b.top,u),f.removeWithFunction(b.left,u),f.removeWithFunction(b.bottom,u),f.removeWithFunction(b.right,u)}})(M[a.elementId],a.id)};this.connectionDetached=function(a,b){var C=a.connection||a,u=a.sourceId,A=a.targetId,_=C.endpoints,k=function(d,S,R,B,Y){f.removeWithFunction(y[B],function(i){return i[0].id===Y.id})};k(1,_[1],_[1].anchor,u,C),k(0,_[0],_[0].anchor,A,C),C.floatingId&&(k(C.floatingIndex,C.floatingEndpoint,C.floatingEndpoint.anchor,C.floatingId,C),w(C.floatingEndpoint)),w(C.endpoints[0]),w(C.endpoints[1]),b||(D.redraw(C.sourceId),C.targetId!==C.sourceId&&D.redraw(C.targetId))},this.addEndpoint=function(a,b){f.addToList(O,b,a)},this.changeId=function(a,b){y[b]=y[a],O[b]=O[a],delete y[a],delete O[a]},this.getConnectionsFor=function(a){return y[a]||[]},this.getEndpointsFor=function(a){return O[a]||[]},this.deleteEndpoint=function(a){f.removeWithFunction(O[a.elementId],function(b){return b.id===a.id}),w(a)},this.elementRemoved=function(a){delete g[a],delete O[a],O[a]=[]};var n=function(a,b,C,u,A,_,k,d,S,R,B,Y){var i=-1,o=u.endpoints[k],t=o.id,p=[1,0][k],v=[[b,C],u,A,_,t],F=a[S],L=o._continuousAnchorEdge?a[o._continuousAnchorEdge]:null,V,G;if(L){var W=f.findWithFunction(L,function(st){return st[4]===t});if(W!==-1)for(L.splice(W,1),V=0;V<L.length;V++)G=L[V][1],f.addWithFunction(B,G,function(st){return st.id===G.id}),f.addWithFunction(Y,L[V][1].endpoints[k],function(st){return st.id===G.endpoints[k].id}),f.addWithFunction(Y,L[V][1].endpoints[p],function(st){return st.id===G.endpoints[p].id})}for(V=0;V<F.length;V++)G=F[V][1],h.idx===1&&F[V][3]===_&&i===-1&&(i=V),f.addWithFunction(B,G,function(st){return st.id===G.id}),f.addWithFunction(Y,F[V][1].endpoints[k],function(st){return st.id===G.endpoints[k].id}),f.addWithFunction(Y,F[V][1].endpoints[p],function(st){return st.id===G.endpoints[p].id});{var lt=d?i!==-1?i:0:F.length;F.splice(lt,0,v)}o._continuousAnchorEdge=S};this.sourceOrTargetChanged=function(a,b,C,u,A){if(A===0){if(a!==b){C.sourceId=b,C.source=u,f.removeWithFunction(y[a],function(R){return R[0].id===C.id});var _=f.findWithFunction(y[C.targetId],function(R){return R[0].id===C.id});_>-1&&(y[C.targetId][_][0]=C,y[C.targetId][_][1]=C.endpoints[0],y[C.targetId][_][2]=C.endpoints[0].anchor.constructor===X.DynamicAnchor),f.addToList(y,b,[C,C.endpoints[1],C.endpoints[1].anchor.constructor===X.DynamicAnchor]),C.endpoints[1].anchor.isContinuous&&(C.source===C.target?C._jsPlumb.instance.removeElement(C.endpoints[1].canvas):C.endpoints[1].canvas.parentNode==null&&C._jsPlumb.instance.appendElement(C.endpoints[1].canvas)),C.updateConnectedClass()}}else if(A===1){var k=C.endpoints[0].elementId;C.target=u,C.targetId=b;var d=f.findWithFunction(y[k],function(R){return R[0].id===C.id}),S=f.findWithFunction(y[a],function(R){return R[0].id===C.id});d!==-1&&(y[k][d][0]=C,y[k][d][1]=C.endpoints[1],y[k][d][2]=C.endpoints[1].anchor.constructor===X.DynamicAnchor),S>-1&&(y[a].splice(S,1),f.addToList(y,b,[C,C.endpoints[0],C.endpoints[0].anchor.constructor===X.DynamicAnchor])),C.updateConnectedClass()}},this.rehomeEndpoint=function(a,b,C){var u=O[b]||[],A=E.getId(C);if(A!==b){var _=u.indexOf(a);if(_>-1){var k=u.splice(_,1)[0];D.add(k,A)}}for(var d=0;d<a.connections.length;d++)a.connections[d].sourceId===b?D.sourceOrTargetChanged(b,a.elementId,a.connections[d],a.element,0):a.connections[d].targetId===b&&D.sourceOrTargetChanged(b,a.elementId,a.connections[d],a.element,1)},this.redraw=function(a,b,C,u,A,_){var k=[],d=[],S=[];if(!E.isSuspendDrawing()){var R=O[a]||[],B=y[a]||[];C=C||jsPlumbUtil.uuid(),u=u||{left:0,top:0},b&&(b={left:b.left+u.left,top:b.top+u.top});for(var Y=E.updateOffset({elId:a,offset:b,recalc:!1,timestamp:C}),i={},o=0;o<B.length;o++){var t=B[o][0],p=t.sourceId,v=t.targetId,F=t.endpoints[0].anchor.isContinuous,L=t.endpoints[1].anchor.isContinuous;if(F||L){var V=p+"_"+v,G=i[V],W=t.sourceId===a?1:0,lt=E.getRotation(v),st=E.getRotation(p);F&&!M[p]&&(M[p]={top:[],right:[],bottom:[],left:[]}),L&&!M[v]&&(M[v]={top:[],right:[],bottom:[],left:[]}),a!==v&&E.updateOffset({elId:v,timestamp:C}),a!==p&&E.updateOffset({elId:p,timestamp:C});var it=E.getCachedData(v),rt=E.getCachedData(p);v===p&&(F||L)?(n(M[p],-Math.PI/2,0,t,!1,v,0,!1,"top",p,k,d),n(M[v],-Math.PI/2,0,t,!1,p,1,!1,"top",v,k,d)):(G||(G=this.calculateOrientation(p,v,rt.o,it.o,t.endpoints[0].anchor,t.endpoints[1].anchor,t,st,lt),i[V]=G),F&&n(M[p],G.theta,0,t,!1,v,0,!1,G.a[0],p,k,d),L&&n(M[v],G.theta2,-1,t,!0,p,1,!0,G.a[1],v,k,d)),F&&f.addWithFunction(S,p,function(vt){return vt===p}),L&&f.addWithFunction(S,v,function(vt){return vt===v}),f.addWithFunction(k,t,function(vt){return vt.id===t.id}),(F&&W===0||L&&W===1)&&f.addWithFunction(d,t.endpoints[W],function(vt){return vt.id===t.endpoints[W].id})}}for(o=0;o<R.length;o++)R[o].connections.length===0&&R[o].anchor.isContinuous&&(M[a]||(M[a]={top:[],right:[],bottom:[],left:[]}),n(M[a],-Math.PI/2,0,{endpoints:[R[o],R[o]],paint:function(){}},!1,a,0,!1,R[o].anchor.getDefaultFace(),a,k,d),f.addWithFunction(S,a,function(vt){return vt===a}));for(o=0;o<S.length;o++)P(S[o],M[S[o]]);for(o=0;o<R.length;o++)R[o].paint({timestamp:C,offset:Y,dimensions:Y.s,recalc:_!==!0});for(o=0;o<d.length;o++){var pt=E.getCachedData(d[o].elementId);d[o].paint({timestamp:null,offset:pt,dimensions:pt.s})}for(o=0;o<B.length;o++){var gt=B[o][1];if(gt.anchor.constructor===X.DynamicAnchor){gt.paint({elementWithPrecedence:a,timestamp:C}),f.addWithFunction(k,B[o][0],function(vt){return vt.id===B[o][0].id});for(var ut=0;ut<gt.connections.length;ut++)gt.connections[ut]!==B[o][0]&&f.addWithFunction(k,gt.connections[ut],function(vt){return vt.id===gt.connections[ut].id})}else f.addWithFunction(k,B[o][0],function(vt){return vt.id===B[o][0].id})}var bt=g[a];for(bt&&bt.paint({timestamp:C,recalc:!1,elId:a}),o=0;o<k.length;o++)k[o].paint({elId:a,timestamp:null,recalc:!1,clearEdits:A})}return{c:k,e:d}};var c=function(a){f.EventGenerator.apply(this),this.type="Continuous",this.isDynamic=!0,this.isContinuous=!0;for(var b=a.faces||["top","right","bottom","left"],C=a.clockwise!==!1,u={},A={top:"bottom",right:"left",left:"right",bottom:"top"},_={top:"right",right:"bottom",left:"top",bottom:"left"},k={top:"left",right:"top",left:"bottom",bottom:"right"},d=C?_:k,S=C?k:_,R=a.cssClass||"",B=null,Y=null,i=["left","right"],o=["top","bottom"],t=null,p=0;p<b.length;p++)u[b[p]]=!0;this.getDefaultFace=function(){return b.length===0?"top":b[0]},this.isRelocatable=function(){return!0},this.isSnapOnRelocate=function(){return!0},this.verifyEdge=function(v){return u[v]?v:u[A[v]]?A[v]:u[d[v]]?d[v]:u[S[v]]?S[v]:v},this.isEdgeSupported=function(v){return t==null?Y==null?u[v]===!0:Y===v:t.indexOf(v)!==-1},this.setCurrentFace=function(v,F){B=v,F&&Y!=null&&(Y=B)},this.getCurrentFace=function(){return B},this.getSupportedFaces=function(){var v=[];for(var F in u)u[F]&&v.push(F);return v},this.lock=function(){Y=B},this.unlock=function(){Y=null},this.isLocked=function(){return Y!=null},this.lockCurrentAxis=function(){B!=null&&(t=B==="left"||B==="right"?i:o)},this.unlockCurrentAxis=function(){t=null},this.compute=function(v){return l[v.element.id]||[0,0]},this.getCurrentLocation=function(v){return l[v.element.id]||[0,0]},this.getOrientation=function(v){return s[v.id]||[0,0]},this.getCssClass=function(){return R}};E.continuousAnchorFactory={get:function(a){return new c(a)},clear:function(a){delete l[a]}}},X.AnchorManager.prototype.calculateOrientation=function(h,O,l,s,y,D,M,E,g){var e={HORIZONTAL:"horizontal",VERTICAL:"vertical",DIAGONAL:"diagonal",IDENTITY:"identity"},j=["left","top","right","bottom"];if(h===O)return{orientation:e.IDENTITY,a:["top","top"]};var I=Math.atan2(s.centery-l.centery,s.centerx-l.centerx),U=Math.atan2(l.centery-s.centery,l.centerx-s.centerx),N=[],P={};(function(C,u){for(var A=0;A<C.length;A++)if(P[C[A]]={left:[u[A][0].left,u[A][0].centery],right:[u[A][0].right,u[A][0].centery],top:[u[A][0].centerx,u[A][0].top],bottom:[u[A][0].centerx,u[A][0].bottom]},u[A][1]!==0)for(var _ in P[C[A]])P[C[A]][_]=jsPlumbUtil.rotatePoint(P[C[A]][_],[u[A][0].centerx,u[A][0].centery],u[A][1])})(["source","target"],[[l,E],[s,g]]);for(var w=0;w<j.length;w++)for(var n=0;n<j.length;n++)N.push({source:j[w],target:j[n],dist:Biltong.lineLength(P.source[j[w]],P.target[j[n]])});N.sort(function(C,u){return C.dist<u.dist?-1:C.dist>u.dist?1:0});for(var c=N[0].source,a=N[0].target,b=0;b<N.length&&(y.isContinuous&&y.locked?c=y.getCurrentFace():!y.isContinuous||y.isEdgeSupported(N[b].source)?c=N[b].source:c=null,D.isContinuous&&D.locked?a=D.getCurrentFace():!D.isContinuous||D.isEdgeSupported(N[b].target)?a=N[b].target:a=null,!(c!=null&&a!=null));b++);return y.isContinuous&&y.setCurrentFace(c),D.isContinuous&&D.setCurrentFace(a),{a:[c,a],theta:I,theta2:U}},X.Anchor=function(h){this.x=h.x||0,this.y=h.y||0,this.elementId=h.elementId,this.cssClass=h.cssClass||"",this.orientation=h.orientation||[0,0],this.lastReturnValue=null,this.offsets=h.offsets||[0,0],this.timestamp=null,this._unrotatedOrientation=[this.orientation[0],this.orientation[1]],this.relocatable=h.relocatable!==!1,this.snapOnRelocate=h.snapOnRelocate!==!1,this.locked=!1,f.EventGenerator.apply(this),this.compute=function(O){var l=O.xy,s=O.wh,y=O.timestamp;if(y&&y===this.timestamp)return this.lastReturnValue;var D=[l[0]+this.x*s[0]+this.offsets[0],l[1]+this.y*s[1]+this.offsets[1],this.x,this.y],M=O.rotation;if(M!=null&&M!==0){var E=jsPlumbUtil.rotatePoint(D,[l[0]+s[0]/2,l[1]+s[1]/2],M);this.orientation[0]=Math.round(this._unrotatedOrientation[0]*E[2]-this._unrotatedOrientation[1]*E[3]),this.orientation[1]=Math.round(this._unrotatedOrientation[1]*E[2]+this._unrotatedOrientation[0]*E[3]),this.lastReturnValue=[E[0],E[1],this.x,this.y]}else this.orientation[0]=this._unrotatedOrientation[0],this.orientation[1]=this._unrotatedOrientation[1],this.lastReturnValue=D;return this.timestamp=y,this.lastReturnValue},this.getCurrentLocation=function(O){return O=O||{},this.lastReturnValue==null||O.timestamp!=null&&this.timestamp!==O.timestamp?this.compute(O):this.lastReturnValue},this.setPosition=function(O,l,s,y,D){(!this.locked||D)&&(this.x=O,this.y=l,this.orientation=[s,y],this.lastReturnValue=null)}},f.extend(X.Anchor,f.EventGenerator,{equals:function(h){if(!h)return!1;var O=h.getOrientation(),l=this.getOrientation();return this.x===h.x&&this.y===h.y&&this.offsets[0]===h.offsets[0]&&this.offsets[1]===h.offsets[1]&&l[0]===O[0]&&l[1]===O[1]},getOrientation:function(){return this.orientation},getCssClass:function(){return this.cssClass}}),X.FloatingAnchor=function(h){X.Anchor.apply(this,arguments);var O=h.reference,l=h.referenceCanvas,s=X.getSize(l),y=0,D=0,M=null,E=null;this.orientation=null,this.x=0,this.y=0,this.isFloating=!0,this.compute=function(g){var e=g.xy,j=[e[0]+s[0]/2,e[1]+s[1]/2];return E=j,j},this.getOrientation=function(g){if(M)return M;var e=O.getOrientation(g);return[Math.abs(e[0])*y*-1,Math.abs(e[1])*D*-1]},this.over=function(g,e){M=g.getOrientation(e)},this.out=function(){M=null},this.getCurrentLocation=function(g){return E??this.compute(g)}},f.extend(X.FloatingAnchor,X.Anchor);var Q=function(h,O,l){return h.constructor===X.Anchor?h:O.makeAnchor(h,l,O)};X.DynamicAnchor=function(h){X.Anchor.apply(this,arguments),this.isDynamic=!0,this.anchors=[],this.elementId=h.elementId,this.jsPlumbInstance=h.jsPlumbInstance;for(var O=0;O<h.anchors.length;O++)this.anchors[O]=Q(h.anchors[O],this.jsPlumbInstance,this.elementId);this.getAnchors=function(){return this.anchors};var l=this.anchors.length>0?this.anchors[0]:null,s=l,y=function(M,E,g,e,j,I,U){var N=e[0]+M.x*j[0],P=e[1]+M.y*j[1],w=e[0]+j[0]/2,n=e[1]+j[1]/2;if(I!=null&&I!==0){var c=jsPlumbUtil.rotatePoint([N,P],[w,n],I);N=c[0],P=c[1]}return Math.sqrt(Math.pow(E-N,2)+Math.pow(g-P,2))+Math.sqrt(Math.pow(w-N,2)+Math.pow(n-P,2))},D=h.selector||function(M,E,g,e,j,I,U){for(var N=g[0]+e[0]/2,P=g[1]+e[1]/2,w=-1,n=1/0,c=0;c<U.length;c++){var a=y(U[c],N,P,M,E,j);a<n&&(w=c+0,n=a)}return U[w]};this.compute=function(M){var E=M.xy,g=M.wh,e=M.txy,j=M.twh,I=M.rotation,U=M.tRotation;return this.timestamp=M.timestamp,this.locked||e==null||j==null?(this.lastReturnValue=l.compute(M),this.lastReturnValue):(M.timestamp=null,l=D(E,g,e,j,I,U,this.anchors),this.x=l.x,this.y=l.y,l!==s&&this.fire("anchorChanged",l),s=l,this.lastReturnValue=l.compute(M),this.lastReturnValue)},this.getCurrentLocation=function(M){return l!=null?l.getCurrentLocation(M):null},this.getOrientation=function(M){return l!=null?l.getOrientation(M):[0,0]},this.over=function(M,E){l!=null&&l.over(M,E)},this.out=function(){l!=null&&l.out()},this.setAnchor=function(M){l=M},this.getCssClass=function(){return l&&l.getCssClass()||""},this.setAnchorCoordinates=function(M){var E=jsPlumbUtil.findWithFunction(this.anchors,function(g){return g.x===M[0]&&g.y===M[1]});return E!==-1?(this.setAnchor(this.anchors[E]),!0):!1}},f.extend(X.DynamicAnchor,X.Anchor);var Z=function(h,O,l,s,y,D){X.Anchors[y]=function(M){var E=M.jsPlumbInstance.makeAnchor([h,O,l,s,0,0],M.elementId,M.jsPlumbInstance);return E.type=y,D&&D(E,M),E}};Z(.5,0,0,-1,"TopCenter"),Z(.5,1,0,1,"BottomCenter"),Z(0,.5,-1,0,"LeftMiddle"),Z(1,.5,1,0,"RightMiddle"),Z(.5,0,0,-1,"Top"),Z(.5,1,0,1,"Bottom"),Z(0,.5,-1,0,"Left"),Z(1,.5,1,0,"Right"),Z(.5,.5,0,0,"Center"),Z(1,0,0,-1,"TopRight"),Z(1,1,0,1,"BottomRight"),Z(0,0,0,-1,"TopLeft"),Z(0,1,0,1,"BottomLeft"),X.Defaults.DynamicAnchors=function(h){return h.jsPlumbInstance.makeAnchors(["TopCenter","RightMiddle","BottomCenter","LeftMiddle"],h.elementId,h.jsPlumbInstance)},X.Anchors.AutoDefault=function(h){var O=h.jsPlumbInstance.makeDynamicAnchor(X.Defaults.DynamicAnchors(h));return O.type="AutoDefault",O};var tt=function(h,O){X.Anchors[h]=function(l){var s=l.jsPlumbInstance.makeAnchor(["Continuous",{faces:O}],l.elementId,l.jsPlumbInstance);return s.type=h,s}};X.Anchors.Continuous=function(h){return h.jsPlumbInstance.continuousAnchorFactory.get(h)},tt("ContinuousLeft",["left"]),tt("ContinuousTop",["top"]),tt("ContinuousBottom",["bottom"]),tt("ContinuousRight",["right"]),Z(0,0,0,0,"Assign",function(h,O){var l=O.position||"Fixed";h.positionFinder=l.constructor===String?O.jsPlumbInstance.AnchorPositionFinders[l]:l,h.constructorParams=O}),z.jsPlumbInstance.prototype.AnchorPositionFinders={Fixed:function(h,O,l){return[(h.left-O.left)/l[0],(h.top-O.top)/l[1]]},Grid:function(h,O,l,s){var y=h.left-O.left,D=h.top-O.top,M=l[0]/s.grid[0],E=l[1]/s.grid[1],g=Math.floor(y/M),e=Math.floor(D/E);return[(g*M+M/2)/l[0],(e*E+E/2)/l[1]]}},X.Anchors.Perimeter=function(h){h=h||{};var O=h.anchorCount||60,l=h.shape;if(!l)throw new Error("no shape supplied to Perimeter Anchor type");var s=function(){for(var I=.5,U=Math.PI*2/O,N=0,P=[],w=0;w<O;w++){var n=I+I*Math.sin(N),c=I+I*Math.cos(N);P.push([n,c,0,0]),N+=U}return P},y=function(I){for(var U=O/I.length,N=[],P=function(n,c,a,b,C,u,A){U=O*C;for(var _=(a-n)/U,k=(b-c)/U,d=0;d<U;d++)N.push([n+_*d,c+k*d,u??0,A??0])},w=0;w<I.length;w++)P.apply(null,I[w]);return N},D=function(I){for(var U=[],N=0;N<I.length;N++)U.push([I[N][0],I[N][1],I[N][2],I[N][3],1/I.length,I[N][4],I[N][5]]);return y(U)},M=function(){return D([[0,0,1,0,0,-1],[1,0,1,1,1,0],[1,1,0,1,0,1],[0,1,0,0,-1,0]])},E={Circle:s,Ellipse:s,Diamond:function(){return D([[.5,0,1,.5],[1,.5,.5,1],[.5,1,0,.5],[0,.5,.5,0]])},Rectangle:M,Square:M,Triangle:function(){return D([[.5,0,1,1],[1,1,0,1],[0,1,.5,0]])},Path:function(I){for(var U=I.points,N=[],P=0,w=0;w<U.length-1;w++){var n=Math.sqrt(Math.pow(U[w][2]-U[w][0])+Math.pow(U[w][3]-U[w][1]));P+=n,N.push([U[w][0],U[w][1],U[w+1][0],U[w+1][1],n])}for(var c=0;c<N.length;c++)N[c][4]=N[c][4]/P;return y(N)}},g=function(I,U){for(var N=[],P=U/180*Math.PI,w=0;w<I.length;w++){var n=I[w][0]-.5,c=I[w][1]-.5;N.push([.5+(n*Math.cos(P)-c*Math.sin(P)),.5+(n*Math.sin(P)+c*Math.cos(P)),I[w][2],I[w][3]])}return N};if(!E[l])throw new Error("Shape ["+l+"] is unknown by Perimeter Anchor type");var e=E[l](h);h.rotation&&(e=g(e,h.rotation));var j=h.jsPlumbInstance.makeDynamicAnchor(e);return j.type="Perimeter",j}}).call(typeof window<"u"?window:jt),(function(){var z=this;z.jsPlumbUtil;var f=z.jsPlumb;f.DefaultRouter=function(X){this.jsPlumbInstance=X,this.anchorManager=new f.AnchorManager({jsPlumbInstance:X}),this.sourceOrTargetChanged=function(Q,Z,tt,h,O){this.anchorManager.sourceOrTargetChanged(Q,Z,tt,h,O)},this.reset=function(){this.anchorManager.reset()},this.changeId=function(Q,Z){this.anchorManager.changeId(Q,Z)},this.elementRemoved=function(Q){this.anchorManager.elementRemoved(Q)},this.newConnection=function(Q){this.anchorManager.newConnection(Q)},this.connectionDetached=function(Q,Z){this.anchorManager.connectionDetached(Q,Z)},this.redraw=function(Q,Z,tt,h,O,l){return this.anchorManager.redraw(Q,Z,tt,h,O,l)},this.deleteEndpoint=function(Q){this.anchorManager.deleteEndpoint(Q)},this.rehomeEndpoint=function(Q,Z,tt){this.anchorManager.rehomeEndpoint(Q,Z,tt)},this.addEndpoint=function(Q,Z){this.anchorManager.addEndpoint(Q,Z)}}}).call(typeof window<"u"?window:jt),(function(){var z=this,f=z.jsPlumb,X=z.jsPlumbUtil,Q=z.Biltong;f.Segments={AbstractSegment:function(s){this.params=s,this.findClosestPointOnPath=function(y,D){return{d:1/0,x:null,y:null,l:null}},this.getBounds=function(){return{minX:Math.min(s.x1,s.x2),minY:Math.min(s.y1,s.y2),maxX:Math.max(s.x1,s.x2),maxY:Math.max(s.y1,s.y2)}},this.lineIntersection=function(y,D,M,E){return[]},this.boxIntersection=function(y,D,M,E){var g=[];return g.push.apply(g,this.lineIntersection(y,D,y+M,D)),g.push.apply(g,this.lineIntersection(y+M,D,y+M,D+E)),g.push.apply(g,this.lineIntersection(y+M,D+E,y,D+E)),g.push.apply(g,this.lineIntersection(y,D+E,y,D)),g},this.boundingBoxIntersection=function(y){return this.boxIntersection(y.x,y.y,y.w,y.y)}},Straight:function(s){f.Segments.AbstractSegment.apply(this,arguments);var y,D,M,E,g,e,j,I=function(){y=Math.sqrt(Math.pow(g-E,2)+Math.pow(j-e,2)),D=Q.gradient({x:E,y:e},{x:g,y:j}),M=-1/D};this.type="Straight",this.getLength=function(){return y},this.getGradient=function(){return D},this.getCoordinates=function(){return{x1:E,y1:e,x2:g,y2:j}},this.setCoordinates=function(n){E=n.x1,e=n.y1,g=n.x2,j=n.y2,I()},this.setCoordinates({x1:s.x1,y1:s.y1,x2:s.x2,y2:s.y2}),this.getBounds=function(){return{minX:Math.min(E,g),minY:Math.min(e,j),maxX:Math.max(E,g),maxY:Math.max(e,j)}},this.pointOnPath=function(n,c){if(n===0&&!c)return{x:E,y:e};if(n===1&&!c)return{x:g,y:j};var a=c?n>0?n:y+n:n*y;return Q.pointOnLine({x:E,y:e},{x:g,y:j},a)},this.gradientAtPoint=function(n){return D},this.pointAlongPathFrom=function(n,c,a){var b=this.pointOnPath(n,a),C=c<=0?{x:E,y:e}:{x:g,y:j};return c<=0&&Math.abs(c)>1&&(c*=-1),Q.pointOnLine(b,C,c)};var U=function(n,c,a){return a>=Math.min(n,c)&&a<=Math.max(n,c)},N=function(n,c,a){return Math.abs(a-n)<Math.abs(a-c)?n:c};this.findClosestPointOnPath=function(n,c){var a={d:1/0,x:null,y:null,l:null,x1:E,x2:g,y1:e,y2:j};if(D===0)a.y=e,a.x=U(E,g,n)?n:N(E,g,n);else if(D===1/0||D===-1/0)a.x=E,a.y=U(e,j,c)?c:N(e,j,c);else{var b=e-D*E,C=c-M*n,u=(C-b)/(D-M),A=D*u+b;a.x=U(E,g,u)?u:N(E,g,u),a.y=U(e,j,A)?A:N(e,j,A)}var _=Q.lineLength([a.x,a.y],[E,e]);return a.d=Q.lineLength([n,c],[a.x,a.y]),a.l=_/y,a};var P=function(n,c,a){return a>c?c<=n&&n<=a:c>=n&&n>=a},w=P;this.lineIntersection=function(n,c,a,b){var C=Math.abs(Q.gradient({x:n,y:c},{x:a,y:b})),u=Math.abs(D),A=u===1/0?E:e-u*E,_=[],k=C===1/0?n:c-C*n;if(C!==u)if(C===1/0&&u===0)w(n,E,g)&&w(e,c,b)&&(_=[n,e]);else if(C===0&&u===1/0)w(c,e,j)&&w(E,n,a)&&(_=[E,c]);else{var d,S;C===1/0?(d=n,w(d,E,g)&&(S=u*n+A,w(S,c,b)&&(_=[d,S]))):C===0?(S=c,w(S,e,j)&&(d=(c-A)/u,w(d,n,a)&&(_=[d,S]))):(d=(k-A)/(u-C),S=u*d+A,w(d,E,g)&&w(S,e,j)&&(_=[d,S]))}return _},this.boxIntersection=function(n,c,a,b){var C=[];return C.push.apply(C,this.lineIntersection(n,c,n+a,c)),C.push.apply(C,this.lineIntersection(n+a,c,n+a,c+b)),C.push.apply(C,this.lineIntersection(n+a,c+b,n,c+b)),C.push.apply(C,this.lineIntersection(n,c+b,n,c)),C},this.boundingBoxIntersection=function(n){return this.boxIntersection(n.x,n.y,n.w,n.h)}},Arc:function(s){f.Segments.AbstractSegment.apply(this,arguments);var y=function(N,P){return Q.theta([s.cx,s.cy],[N,P])},D=function(N,P){if(N.anticlockwise){var w=N.startAngle<N.endAngle?N.startAngle+M:N.startAngle,n=Math.abs(w-N.endAngle);return w-n*P}else{var c=N.endAngle<N.startAngle?N.endAngle+M:N.endAngle,a=Math.abs(c-N.startAngle);return N.startAngle+a*P}},M=2*Math.PI;this.radius=s.r,this.anticlockwise=s.ac,this.type="Arc",s.startAngle&&s.endAngle?(this.startAngle=s.startAngle,this.endAngle=s.endAngle,this.x1=s.cx+this.radius*Math.cos(s.startAngle),this.y1=s.cy+this.radius*Math.sin(s.startAngle),this.x2=s.cx+this.radius*Math.cos(s.endAngle),this.y2=s.cy+this.radius*Math.sin(s.endAngle)):(this.startAngle=y(s.x1,s.y1),this.endAngle=y(s.x2,s.y2),this.x1=s.x1,this.y1=s.y1,this.x2=s.x2,this.y2=s.y2),this.endAngle<0&&(this.endAngle+=M),this.startAngle<0&&(this.startAngle+=M);var E=this.endAngle<this.startAngle?this.endAngle+M:this.endAngle;this.sweep=Math.abs(E-this.startAngle),this.anticlockwise&&(this.sweep=M-this.sweep);var g=2*Math.PI*this.radius,e=this.sweep/M,j=g*e;this.getLength=function(){return j},this.getBounds=function(){return{minX:s.cx-s.r,maxX:s.cx+s.r,minY:s.cy-s.r,maxY:s.cy+s.r}};var I=1e-10,U=function(N){var P=Math.floor(N),w=Math.ceil(N);return N-P<I?P:w-N<I?w:N};this.pointOnPath=function(N,P){if(N===0)return{x:this.x1,y:this.y1,theta:this.startAngle};if(N===1)return{x:this.x2,y:this.y2,theta:this.endAngle};P&&(N=N/j);var w=D(this,N),n=s.cx+s.r*Math.cos(w),c=s.cy+s.r*Math.sin(w);return{x:U(n),y:U(c),theta:w}},this.gradientAtPoint=function(N,P){var w=this.pointOnPath(N,P),n=Q.normal([s.cx,s.cy],[w.x,w.y]);return!this.anticlockwise&&(n===1/0||n===-1/0)&&(n*=-1),n},this.pointAlongPathFrom=function(N,P,w){var n=this.pointOnPath(N,w),c=P/g*2*Math.PI,a=this.anticlockwise?-1:1,b=n.theta+a*c,C=s.cx+this.radius*Math.cos(b),u=s.cy+this.radius*Math.sin(b);return{x:C,y:u}}},Bezier:function(s){this.curve=[{x:s.x1,y:s.y1},{x:s.cp1x,y:s.cp1y},{x:s.cp2x,y:s.cp2y},{x:s.x2,y:s.y2}];var y=function(j){return j[0].x===j[1].x&&j[0].y===j[1].y},D=function(j,I){return Math.sqrt(Math.pow(j.x-I.x,2)+Math.pow(j.y-I.y,2))},M=(function(j){var I={x:0,y:0};if(j===0)return this.curve[0];var U=this.curve.length-1;if(j===1)return this.curve[U];var N=this.curve,P=1-j;if(U===0)return this.curve[0];if(U===1)return{x:P*N[0].x+j*N[1].x,y:P*N[0].y+j*N[1].y};if(U<4){var w=P*P,n=j*j,c=0,a,b,C;return U===2?(N=[N[0],N[1],N[2],I],a=w,b=2*(P*j),C=n):U===3&&(a=w*P,b=3*(w*j),C=3*(P*n),c=j*n),{x:a*N[0].x+b*N[1].x+C*N[2].x+c*N[3].x,y:a*N[0].y+b*N[1].y+C*N[2].y+c*N[3].y}}else return I}).bind(this),E=function(j){var I=[];j--;for(var U=0;U<=j;U++)I.push(M(U/j));return I},g=(function(){y(this.curve)&&(this.length=0);var j=16,I=E(j);this.length=0;for(var U=0;U<j-1;U++){var N=I[U],P=I[U+1];this.length+=D(N,P)}}).bind(this);f.Segments.AbstractSegment.apply(this,arguments),this.bounds={minX:Math.min(s.x1,s.x2,s.cp1x,s.cp2x),minY:Math.min(s.y1,s.y2,s.cp1y,s.cp2y),maxX:Math.max(s.x1,s.x2,s.cp1x,s.cp2x),maxY:Math.max(s.y1,s.y2,s.cp1y,s.cp2y)},this.type="Bezier",g();var e=function(j,I,U){return U&&(I=z.jsBezier.locationAlongCurveFrom(j,I>0?0:1,I)),I};this.pointOnPath=function(j,I){return j=e(this.curve,j,I),z.jsBezier.pointOnCurve(this.curve,j)},this.gradientAtPoint=function(j,I){return j=e(this.curve,j,I),z.jsBezier.gradientAtPoint(this.curve,j)},this.pointAlongPathFrom=function(j,I,U){return j=e(this.curve,j,U),z.jsBezier.pointAlongCurveFrom(this.curve,j,I)},this.getLength=function(){return this.length},this.getBounds=function(){return this.bounds},this.findClosestPointOnPath=function(j,I){var U=z.jsBezier.nearestPointOnCurve({x:j,y:I},this.curve);return{d:Math.sqrt(Math.pow(U.point.x-j,2)+Math.pow(U.point.y-I,2)),x:U.point.x,y:U.point.y,l:1-U.location,s:this}},this.lineIntersection=function(j,I,U,N){return z.jsBezier.lineIntersection(j,I,U,N,this.curve)}}},f.SegmentRenderer={getPath:function(s,y){return{Straight:function(D){var M=s.getCoordinates();return(D?"M "+M.x1+" "+M.y1+" ":"")+"L "+M.x2+" "+M.y2},Bezier:function(D){var M=s.params;return(D?"M "+M.x2+" "+M.y2+" ":"")+"C "+M.cp2x+" "+M.cp2y+" "+M.cp1x+" "+M.cp1y+" "+M.x1+" "+M.y1},Arc:function(D){var M=s.params,E=s.sweep>Math.PI?1:0,g=s.anticlockwise?0:1;return(D?"M"+s.x1+" "+s.y1+" ":"")+"A "+s.radius+" "+M.r+" 0 "+E+","+g+" "+s.x2+" "+s.y2}}[s.type](y)}};var Z=function(){this.resetBounds=function(){this.bounds={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}},this.resetBounds()};f.Connectors.AbstractConnector=function(s){Z.apply(this,arguments);var y=[],D=0,M=[],E=[],g=s.stub||0,e=X.isArray(g)?g[0]:g,j=X.isArray(g)?g[1]:g,I=s.gap||0,U=X.isArray(I)?I[0]:I,N=X.isArray(I)?I[1]:I,P=null,w=null;this.getPathData=function(){for(var u="",A=0;A<y.length;A++)u+=f.SegmentRenderer.getPath(y[A],A===0),u+=" ";return u},this.findSegmentForPoint=function(u,A){for(var _={d:1/0,s:null,x:null,y:null,l:null},k=0;k<y.length;k++){var d=y[k].findClosestPointOnPath(u,A);d.d<_.d&&(_.d=d.d,_.l=d.l,_.x=d.x,_.y=d.y,_.s=y[k],_.x1=d.x1,_.x2=d.x2,_.y1=d.y1,_.y2=d.y2,_.index=k,_.connectorLocation=M[k][0]+d.l*(M[k][1]-M[k][0]))}return _},this.lineIntersection=function(u,A,_,k){for(var d=[],S=0;S<y.length;S++)d.push.apply(d,y[S].lineIntersection(u,A,_,k));return d},this.boxIntersection=function(u,A,_,k){for(var d=[],S=0;S<y.length;S++)d.push.apply(d,y[S].boxIntersection(u,A,_,k));return d},this.boundingBoxIntersection=function(u){for(var A=[],_=0;_<y.length;_++)A.push.apply(A,y[_].boundingBoxIntersection(u));return A};var n=function(){for(var u=0,A=0;A<y.length;A++){var _=y[A].getLength();E[A]=_/D,M[A]=[u,u+=_/D]}},c=function(u,A){var _,k,d;if(A&&(u=u>0?u/D:(D+u)/D),u===1)_=y.length-1,d=1;else if(u===0)d=0,_=0;else if(u>=.5){for(_=0,d=0,k=M.length-1;k>-1;k--)if(M[k][1]>=u&&M[k][0]<=u){_=k,d=(u-M[k][0])/E[k];break}}else for(_=M.length-1,d=1,k=0;k<M.length;k++)if(M[k][1]>=u){_=k,d=(u-M[k][0])/E[k];break}return{segment:y[_],proportion:d,index:_}},a=function(u,A,_){if(!(_.x1===_.x2&&_.y1===_.y2)){var k=new f.Segments[A](_);y.push(k),D+=k.getLength(),u.updateBounds(k)}},b=function(){D=y.length=M.length=E.length=0};this.setSegments=function(u){P=[],D=0;for(var A=0;A<u.length;A++)P.push(u[A]),D+=u[A].getLength()},this.getLength=function(){return D};var C=function(u){this.strokeWidth=u.strokeWidth;var A=Q.quadrant(u.sourcePos,u.targetPos),_=u.targetPos[0]<u.sourcePos[0],k=u.targetPos[1]<u.sourcePos[1],d=u.strokeWidth||1,S=u.sourceEndpoint.anchor.getOrientation(u.sourceEndpoint),R=u.targetEndpoint.anchor.getOrientation(u.targetEndpoint),B=_?u.targetPos[0]:u.sourcePos[0],Y=k?u.targetPos[1]:u.sourcePos[1],i=Math.abs(u.targetPos[0]-u.sourcePos[0]),o=Math.abs(u.targetPos[1]-u.sourcePos[1]);if(S[0]===0&&S[1]===0||R[0]===0&&R[1]===0){var t=i>o?0:1,p=[1,0][t];S=[],R=[],S[t]=u.sourcePos[t]>u.targetPos[t]?-1:1,R[t]=u.sourcePos[t]>u.targetPos[t]?1:-1,S[p]=0,R[p]=0}var v=_?i+U*S[0]:U*S[0],F=k?o+U*S[1]:U*S[1],L=_?N*R[0]:i+N*R[0],V=k?N*R[1]:o+N*R[1],G=S[0]*R[0]+S[1]*R[1],W={sx:v,sy:F,tx:L,ty:V,lw:d,xSpan:Math.abs(L-v),ySpan:Math.abs(V-F),mx:(v+L)/2,my:(F+V)/2,so:S,to:R,x:B,y:Y,w:i,h:o,segment:A,startStubX:v+S[0]*e,startStubY:F+S[1]*e,endStubX:L+R[0]*j,endStubY:V+R[1]*j,isXGreaterThanStubTimes2:Math.abs(v-L)>e+j,isYGreaterThanStubTimes2:Math.abs(F-V)>e+j,opposite:G===-1,perpendicular:G===0,orthogonal:G===1,sourceAxis:S[0]===0?"y":"x",points:[B,Y,i,o,v,F,L,V],stubs:[e,j]};return W.anchorOrientation=W.opposite?"opposite":W.orthogonal?"orthogonal":"perpendicular",W};return this.getSegments=function(){return y},this.updateBounds=function(u){var A=u.getBounds();this.bounds.minX=Math.min(this.bounds.minX,A.minX),this.bounds.maxX=Math.max(this.bounds.maxX,A.maxX),this.bounds.minY=Math.min(this.bounds.minY,A.minY),this.bounds.maxY=Math.max(this.bounds.maxY,A.maxY)},this.pointOnPath=function(u,A){var _=c(u,A);return _.segment&&_.segment.pointOnPath(_.proportion,!1)||[0,0]},this.gradientAtPoint=function(u,A){var _=c(u,A);return _.segment&&_.segment.gradientAtPoint(_.proportion,!1)||0},this.pointAlongPathFrom=function(u,A,_){var k=c(u,_);return k.segment&&k.segment.pointAlongPathFrom(k.proportion,A,!1)||[0,0]},this.compute=function(u){w=C.call(this,u),b(),this._compute(w,u),this.x=w.points[0],this.y=w.points[1],this.w=w.points[2],this.h=w.points[3],this.segment=w.segment,n()},{addSegment:a,prepareCompute:C,sourceStub:e,targetStub:j,maxStub:Math.max(e,j),sourceGap:U,targetGap:N,maxGap:Math.max(U,N)}},X.extend(f.Connectors.AbstractConnector,Z),f.Endpoints.AbstractEndpoint=function(s){Z.apply(this,arguments);var y=this.compute=function(D,M,E,g){var e=this._compute.apply(this,arguments);return this.x=e[0],this.y=e[1],this.w=e[2],this.h=e[3],this.bounds.minX=this.x,this.bounds.minY=this.y,this.bounds.maxX=this.x+this.w,this.bounds.maxY=this.y+this.h,e};return{compute:y,cssClass:s.cssClass}},X.extend(f.Endpoints.AbstractEndpoint,Z),f.Endpoints.Dot=function(s){this.type="Dot",f.Endpoints.AbstractEndpoint.apply(this,arguments),s=s||{},this.radius=s.radius||10,this.defaultOffset=.5*this.radius,this.defaultInnerRadius=this.radius/3,this._compute=function(y,D,M,E){this.radius=M.radius||this.radius;var g=y[0]-this.radius,e=y[1]-this.radius,j=this.radius*2,I=this.radius*2;if(M.stroke){var U=M.strokeWidth||1;g-=U,e-=U,j+=U*2,I+=U*2}return[g,e,j,I,this.radius]}},X.extend(f.Endpoints.Dot,f.Endpoints.AbstractEndpoint),f.Endpoints.Rectangle=function(s){this.type="Rectangle",f.Endpoints.AbstractEndpoint.apply(this,arguments),s=s||{},this.width=s.width||20,this.height=s.height||20,this._compute=function(y,D,M,E){var g=M.width||this.width,e=M.height||this.height,j=y[0]-g/2,I=y[1]-e/2;return[j,I,g,e]}},X.extend(f.Endpoints.Rectangle,f.Endpoints.AbstractEndpoint);var tt=function(s){f.jsPlumbUIComponent.apply(this,arguments),this._jsPlumb.displayElements=[]};X.extend(tt,f.jsPlumbUIComponent,{getDisplayElements:function(){return this._jsPlumb.displayElements},appendDisplayElement:function(s){this._jsPlumb.displayElements.push(s)}}),f.Endpoints.Image=function(s){this.type="Image",tt.apply(this,arguments),f.Endpoints.AbstractEndpoint.apply(this,arguments);var y=s.onload,D=s.src||s.url,M=s.cssClass?" "+s.cssClass:"";this._jsPlumb.img=new Image,this._jsPlumb.ready=!1,this._jsPlumb.initialized=!1,this._jsPlumb.deleted=!1,this._jsPlumb.widthToUse=s.width,this._jsPlumb.heightToUse=s.height,this._jsPlumb.endpoint=s.endpoint,this._jsPlumb.img.onload=(function(){this._jsPlumb!=null&&(this._jsPlumb.ready=!0,this._jsPlumb.widthToUse=this._jsPlumb.widthToUse||this._jsPlumb.img.width,this._jsPlumb.heightToUse=this._jsPlumb.heightToUse||this._jsPlumb.img.height,y&&y(this))}).bind(this),this._jsPlumb.endpoint.setImage=(function(E,g){var e=E.constructor===String?E:E.src;y=g,this._jsPlumb.img.src=e,this.canvas!=null&&this.canvas.setAttribute("src",this._jsPlumb.img.src)}).bind(this),this._jsPlumb.endpoint.setImage(D,y),this._compute=function(E,g,e,j){return this.anchorPoint=E,this._jsPlumb.ready?[E[0]-this._jsPlumb.widthToUse/2,E[1]-this._jsPlumb.heightToUse/2,this._jsPlumb.widthToUse,this._jsPlumb.heightToUse]:[0,0,0,0]},this.canvas=f.createElement("img",{position:"absolute",margin:0,padding:0,outline:0},this._jsPlumb.instance.endpointClass+M),this._jsPlumb.widthToUse&&this.canvas.setAttribute("width",this._jsPlumb.widthToUse),this._jsPlumb.heightToUse&&this.canvas.setAttribute("height",this._jsPlumb.heightToUse),this._jsPlumb.instance.appendElement(this.canvas),this.actuallyPaint=function(E,g,e){if(!this._jsPlumb.deleted){this._jsPlumb.initialized||(this.canvas.setAttribute("src",this._jsPlumb.img.src),this.appendDisplayElement(this.canvas),this._jsPlumb.initialized=!0);var j=this.anchorPoint[0]-this._jsPlumb.widthToUse/2,I=this.anchorPoint[1]-this._jsPlumb.heightToUse/2;X.sizeElement(this.canvas,j,I,this._jsPlumb.widthToUse,this._jsPlumb.heightToUse)}},this.paint=function(E,g){this._jsPlumb!=null&&(this._jsPlumb.ready?this.actuallyPaint(E,g):z.setTimeout((function(){this.paint(E,g)}).bind(this),200))}},X.extend(f.Endpoints.Image,[tt,f.Endpoints.AbstractEndpoint],{cleanup:function(s){s&&(this._jsPlumb.deleted=!0,this.canvas&&this.canvas.parentNode.removeChild(this.canvas),this.canvas=null)}}),f.Endpoints.Blank=function(s){f.Endpoints.AbstractEndpoint.apply(this,arguments),this.type="Blank",tt.apply(this,arguments),this._compute=function(D,M,E,g){return[D[0],D[1],10,0]};var y=s.cssClass?" "+s.cssClass:"";this.canvas=f.createElement("div",{display:"block",width:"1px",height:"1px",background:"transparent",position:"absolute"},this._jsPlumb.instance.endpointClass+y),this._jsPlumb.instance.appendElement(this.canvas),this.paint=function(D,M){X.sizeElement(this.canvas,this.x,this.y,this.w,this.h)}},X.extend(f.Endpoints.Blank,[f.Endpoints.AbstractEndpoint,tt],{cleanup:function(){this.canvas&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)}}),f.Endpoints.Triangle=function(s){this.type="Triangle",f.Endpoints.AbstractEndpoint.apply(this,arguments);var y=this;s=s||{},s.width=s.width||55,s.height=s.height||55,this.width=s.width,this.height=s.height,this._compute=function(D,M,E,g){var e=E.width||y.width,j=E.height||y.height,I=D[0]-e/2,U=D[1]-j/2;return[I,U,e,j]}};var h=f.Overlays.AbstractOverlay=function(s){this.visible=!0,this.isAppendedAtTopLevel=!0,this.component=s.component,this.loc=s.location==null?.5:s.location,this.endpointLoc=s.endpointLocation==null?[.5,.5]:s.endpointLocation,this.visible=s.visible!==!1};h.prototype={cleanup:function(s){s&&(this.component=null,this.canvas=null,this.endpointLoc=null)},reattach:function(s,y){},setVisible:function(s){this.visible=s,this.component.repaint()},isVisible:function(){return this.visible},hide:function(){this.setVisible(!1)},show:function(){this.setVisible(!0)},incrementLocation:function(s){this.loc+=s,this.component.repaint()},setLocation:function(s){this.loc=s,this.component.repaint()},getLocation:function(){return this.loc},updateFrom:function(){}},f.Overlays.Arrow=function(s){this.type="Arrow",h.apply(this,arguments),this.isAppendedAtTopLevel=!1,s=s||{};var y=this;this.length=s.length||20,this.width=s.width||20,this.id=s.id,this.direction=(s.direction||1)<0?-1:1;var D=s.paintStyle||{"stroke-width":1},M=s.foldback||.623;this.computeMaxSize=function(){return y.width*1.5},this.elementCreated=function(E,g){if(this.path=E,s.events)for(var e in s.events)f.on(E,e,s.events[e])},this.draw=function(E,g){var e,j,I,U,N;if(E.pointAlongPathFrom){if(X.isString(this.loc)||this.loc>1||this.loc<0){var P=parseInt(this.loc,10),w=this.loc<0?1:0;e=E.pointAlongPathFrom(w,P,!1),j=E.pointAlongPathFrom(w,P-this.direction*this.length/2,!1),I=Q.pointOnLine(e,j,this.length)}else if(this.loc===1){if(e=E.pointOnPath(this.loc),j=E.pointAlongPathFrom(this.loc,-this.length),I=Q.pointOnLine(e,j,this.length),this.direction===-1){var n=I;I=e,e=n}}else if(this.loc===0){if(I=E.pointOnPath(this.loc),j=E.pointAlongPathFrom(this.loc,this.length),e=Q.pointOnLine(I,j,this.length),this.direction===-1){var c=I;I=e,e=c}}else e=E.pointAlongPathFrom(this.loc,this.direction*this.length/2),j=E.pointOnPath(this.loc),I=Q.pointOnLine(e,j,this.length);U=Q.perpendicularLineTo(e,I,this.width),N=Q.pointOnLine(e,I,M*this.length);var a={hxy:e,tail:U,cxy:N},b=D.stroke||g.stroke,C=D.fill||g.stroke,u=D.strokeWidth||g.strokeWidth;return{component:E,d:a,"stroke-width":u,stroke:b,fill:C,minX:Math.min(e.x,U[0].x,U[1].x),maxX:Math.max(e.x,U[0].x,U[1].x),minY:Math.min(e.y,U[0].y,U[1].y),maxY:Math.max(e.y,U[0].y,U[1].y)}}else return{component:E,minX:0,maxX:0,minY:0,maxY:0}}},X.extend(f.Overlays.Arrow,h,{updateFrom:function(s){this.length=s.length||this.length,this.width=s.width||this.width,this.direction=s.direction!=null?s.direction:this.direction,this.foldback=s.foldback||this.foldback},cleanup:function(){this.path&&this.path.parentNode&&this.path.parentNode.removeChild(this.path)}}),f.Overlays.PlainArrow=function(s){s=s||{};var y=f.extend(s,{foldback:1});f.Overlays.Arrow.call(this,y),this.type="PlainArrow"},X.extend(f.Overlays.PlainArrow,f.Overlays.Arrow),f.Overlays.Diamond=function(s){s=s||{};var y=s.length||40,D=f.extend(s,{length:y/2,foldback:2});f.Overlays.Arrow.call(this,D),this.type="Diamond"},X.extend(f.Overlays.Diamond,f.Overlays.Arrow);var O=function(s,y){return(s._jsPlumb.cachedDimensions==null||y)&&(s._jsPlumb.cachedDimensions=s.getDimensions()),s._jsPlumb.cachedDimensions},l=function(s){f.jsPlumbUIComponent.apply(this,arguments),h.apply(this,arguments);var y=this.fire;this.fire=function(){y.apply(this,arguments),this.component&&this.component.fire.apply(this.component,arguments)},this.detached=!1,this.id=s.id,this._jsPlumb.div=null,this._jsPlumb.initialised=!1,this._jsPlumb.component=s.component,this._jsPlumb.cachedDimensions=null,this._jsPlumb.create=s.create,this._jsPlumb.initiallyInvisible=s.visible===!1,this.getElement=function(){if(this._jsPlumb.div==null){var D=this._jsPlumb.div=f.getElement(this._jsPlumb.create(this._jsPlumb.component));D.style.position="absolute",jsPlumb.addClass(D,this._jsPlumb.instance.overlayClass+" "+(this.cssClass?this.cssClass:s.cssClass?s.cssClass:"")),this._jsPlumb.instance.appendElement(D),this._jsPlumb.instance.getId(D),this.canvas=D;var M="translate(-50%, -50%)";D.style.webkitTransform=M,D.style.mozTransform=M,D.style.msTransform=M,D.style.oTransform=M,D.style.transform=M,D._jsPlumb=this,s.visible===!1&&(D.style.display="none")}return this._jsPlumb.div},this.draw=function(D,M,E){var g=O(this);if(g!=null&&g.length===2){var e={x:0,y:0};if(E)e={x:E[0],y:E[1]};else if(D.pointOnPath){var j=this.loc,I=!1;(X.isString(this.loc)||this.loc<0||this.loc>1)&&(j=parseInt(this.loc,10),I=!0),e=D.pointOnPath(j,I)}else{var U=this.loc.constructor===Array?this.loc:this.endpointLoc;e={x:U[0]*D.w,y:U[1]*D.h}}var N=e.x-g[0]/2,P=e.y-g[1]/2;return{component:D,d:{minx:N,miny:P,td:g,cxy:e},minX:N,maxX:N+g[0],minY:P,maxY:P+g[1]}}else return{minX:0,maxX:0,minY:0,maxY:0}}};X.extend(l,[f.jsPlumbUIComponent,h],{getDimensions:function(){return[1,1]},setVisible:function(s){this._jsPlumb.div&&(this._jsPlumb.div.style.display=s?"block":"none",s&&this._jsPlumb.initiallyInvisible&&(O(this,!0),this.component.repaint(),this._jsPlumb.initiallyInvisible=!1))},clearCachedDimensions:function(){this._jsPlumb.cachedDimensions=null},cleanup:function(s){s?this._jsPlumb.div!=null&&(this._jsPlumb.div._jsPlumb=null,this._jsPlumb.instance.removeElement(this._jsPlumb.div)):(this._jsPlumb&&this._jsPlumb.div&&this._jsPlumb.div.parentNode&&this._jsPlumb.div.parentNode.removeChild(this._jsPlumb.div),this.detached=!0)},reattach:function(s,y){this._jsPlumb.div!=null&&s.getContainer().appendChild(this._jsPlumb.div),this.detached=!1},computeMaxSize:function(){var s=O(this);return Math.max(s[0],s[1])},paint:function(s,y){this._jsPlumb.initialised||(this.getElement(),s.component.appendDisplayElement(this._jsPlumb.div),this._jsPlumb.initialised=!0,this.detached&&this._jsPlumb.div.parentNode.removeChild(this._jsPlumb.div)),this._jsPlumb.div.style.left=s.component.x+s.d.minx+"px",this._jsPlumb.div.style.top=s.component.y+s.d.miny+"px"}}),f.Overlays.Custom=function(s){this.type="Custom",l.apply(this,arguments)},X.extend(f.Overlays.Custom,l),f.Overlays.GuideLines=function(){var s=this;s.length=50,s.strokeWidth=5,this.type="GuideLines",h.apply(this,arguments),f.jsPlumbUIComponent.apply(this,arguments),this.draw=function(y,D){var M=y.pointAlongPathFrom(s.loc,s.length/2),E=y.pointOnPath(s.loc),g=Q.pointOnLine(M,E,s.length),e=Q.perpendicularLineTo(M,g,40),j=Q.perpendicularLineTo(g,M,20);return{connector:y,head:M,tail:g,headLine:j,tailLine:e,minX:Math.min(M.x,g.x,j[0].x,j[1].x),minY:Math.min(M.y,g.y,j[0].y,j[1].y),maxX:Math.max(M.x,g.x,j[0].x,j[1].x),maxY:Math.max(M.y,g.y,j[0].y,j[1].y)}}},f.Overlays.Label=function(s){this.labelStyle=s.labelStyle,this.cssClass=this.labelStyle!=null?this.labelStyle.cssClass:null;var y=f.extend({create:function(){return f.createElement("div")}},s);if(f.Overlays.Custom.call(this,y),this.type="Label",this.label=s.label||"",this.labelText=null,this.labelStyle){var D=this.getElement();if(this.labelStyle.font=this.labelStyle.font||"12px sans-serif",D.style.font=this.labelStyle.font,D.style.color=this.labelStyle.color||"black",this.labelStyle.fill&&(D.style.background=this.labelStyle.fill),this.labelStyle.borderWidth>0){var M=this.labelStyle.borderStyle?this.labelStyle.borderStyle:"black";D.style.border=this.labelStyle.borderWidth+"px solid "+M}this.labelStyle.padding&&(D.style.padding=this.labelStyle.padding)}},X.extend(f.Overlays.Label,f.Overlays.Custom,{cleanup:function(s){s&&(this.div=null,this.label=null,this.labelText=null,this.cssClass=null,this.labelStyle=null)},getLabel:function(){return this.label},setLabel:function(s){this.label=s,this.labelText=null,this.clearCachedDimensions(),this.update(),this.component.repaint()},getDimensions:function(){return this.update(),l.prototype.getDimensions.apply(this,arguments)},update:function(){if(typeof this.label=="function"){var s=this.label(this);this.getElement().innerHTML=s.replace(/\r\n/g,"<br/>")}else this.labelText==null&&(this.labelText=this.label,this.getElement().innerHTML=this.labelText.replace(/\r\n/g,"<br/>"))},updateFrom:function(s){s.label!=null&&this.setLabel(s.label)}})}).call(typeof window<"u"?window:jt),(function(){var z=this,f=z.jsPlumbUtil,X=z.jsPlumbInstance,Q="jtk-group-collapsed",Z="jtk-group-expanded",tt="[jtk-group-content]",h="elementDraggable",O="stop",l="revert",s="_groupManager",y="_jsPlumbGroup",D="_jsPlumbGroupDrag",M="group:addMember",E="group:removeMember",g="group:add",e="group:remove",j="group:expand",I="group:collapse",U="groupDragStop",N="connectionMoved",P="internal.connectionDetached",w="removeAll",n="orphanAll",c="show",a="hide",b=function(u){var A={},_={},k={},d=this;function S(t,p){for(var v=u.getContainer(),F=!1;!F;){if(t==null||t===v)return!1;if(t===p)return!0;t=t.parentNode}}u.bind("connection",function(t){var p=u.getGroupFor(t.source),v=u.getGroupFor(t.target);p!=null&&v!=null&&p===v?(_[t.connection.id]=p,k[t.connection.id]=p):(p!=null&&(f.suggest(p.connections.source,t.connection),_[t.connection.id]=p),v!=null&&(f.suggest(v.connections.target,t.connection),k[t.connection.id]=v))});function R(t){delete t.proxies;var p=_[t.id],v;p!=null&&(v=function(F){return F.id===t.id},f.removeWithFunction(p.connections.source,v),f.removeWithFunction(p.connections.target,v),delete _[t.id]),p=k[t.id],p!=null&&(v=function(F){return F.id===t.id},f.removeWithFunction(p.connections.source,v),f.removeWithFunction(p.connections.target,v),delete k[t.id])}u.bind(P,function(t){R(t.connection)}),u.bind(N,function(t){var p=t.index===0?_:k,v=p[t.connection.id];if(v){var F=v.connections[t.index===0?"source":"target"],L=F.indexOf(t.connection);L!==-1&&F.splice(L,1)}}),this.addGroup=function(t){u.addClass(t.getEl(),Z),A[t.id]=t,t.manager=this,o(t),u.fire(g,{group:t})},this.addToGroup=function(t,p,v){if(t=this.getGroup(t),t){var F=t.getEl();if(p._isJsPlumbGroup)return;var L=p._jsPlumbGroup;if(L!==t){u.removeFromDragSelection(p);var V=u.getOffset(p,!0),G=t.collapsed?u.getOffset(F,!0):u.getOffset(t.getDragArea(),!0);L!=null&&(L.remove(p,!1,v,!1,t),d.updateConnectionsForGroup(L)),t.add(p,v);var W=function(rt,pt){var gt=pt===0?1:0;rt.each(function(ut){ut.setVisible(!1),ut.endpoints[gt].element._jsPlumbGroup===t?(ut.endpoints[gt].setVisible(!1),i(ut,gt,t)):(ut.endpoints[pt].setVisible(!1),Y(ut,pt,t))})};t.collapsed&&(W(u.select({source:p}),0),W(u.select({target:p}),1));var lt=u.getId(p);u.dragManager.setParent(p,lt,F,u.getId(F),V);var st={left:V.left-G.left,top:V.top-G.top};if(u.setPosition(p,st),u.dragManager.revalidateParent(p,lt,V),d.updateConnectionsForGroup(t),u.revalidate(lt),!v){var it={group:t,el:p,pos:st};L&&(it.sourceGroup=L),u.fire(M,it)}}}},this.removeFromGroup=function(t,p,v){if(t=this.getGroup(t),t){if(t.collapsed){var F=function(L,V){for(var G=0;G<L.length;G++){var W=L[G];if(W.proxies){for(var lt=0;lt<W.proxies.length;lt++)if(W.proxies[lt]!=null){var st=W.proxies[lt].originalEp.element;(st===p||S(st,p))&&i(W,V,t)}}}};F(t.connections.source.slice(),0),F(t.connections.target.slice(),1)}t.remove(p,null,v)}},this.getGroup=function(t){var p=t;if(f.isString(t)&&(p=A[t],p==null))throw new TypeError("No such group ["+t+"]");return p},this.getGroups=function(){var t=[];for(var p in A)t.push(A[p]);return t},this.removeGroup=function(t,p,v,F){t=this.getGroup(t),this.expandGroup(t,!0);var L=t[p?w:n](v,F);return u.remove(t.getEl()),delete A[t.id],delete u._groups[t.id],u.fire(e,{group:t}),L},this.removeAllGroups=function(t,p,v){for(var F in A)this.removeGroup(A[F],t,p,v)};function B(t,p){for(var v=t.getEl().querySelectorAll(".jtk-managed"),F=0;F<v.length;F++)u[p?c:a](v[F],!0)}var Y=function(t,p,v){var F=t.endpoints[p===0?1:0].element;if(!(F[y]&&!F[y].shouldProxy()&&F[y].collapsed)){var L=v.getEl(),V=u.getId(L);u.proxyConnection(t,p,L,V,function(G,W){return v.getEndpoint(G,W)},function(G,W){return v.getAnchor(G,W)})}};this.collapseGroup=function(t){if(t=this.getGroup(t),!(t==null||t.collapsed)){var p=t.getEl();if(B(t,!1),t.shouldProxy()){var v=function(F,L){for(var V=0;V<F.length;V++){var G=F[V];Y(G,L,t)}};v(t.connections.source,0),v(t.connections.target,1)}t.collapsed=!0,u.removeClass(p,Z),u.addClass(p,Q),u.revalidate(p),u.fire(I,{group:t})}};var i=function(t,p,v){u.unproxyConnection(t,p,u.getId(v.getEl()))};this.expandGroup=function(t,p){if(t=this.getGroup(t),!(t==null||!t.collapsed)){var v=t.getEl();if(B(t,!0),t.shouldProxy()){var F=function(L,V){for(var G=0;G<L.length;G++){var W=L[G];i(W,V,t)}};F(t.connections.source,0),F(t.connections.target,1)}t.collapsed=!1,u.addClass(v,Z),u.removeClass(v,Q),u.revalidate(v),this.repaintGroup(t),p||u.fire(j,{group:t})}},this.repaintGroup=function(t){t=this.getGroup(t);for(var p=t.getMembers(),v=0;v<p.length;v++)u.revalidate(p[v])};function o(t){for(var p=t.getMembers().slice(),v=[],F=0;F<p.length;F++)Array.prototype.push.apply(v,p[F].querySelectorAll(".jtk-managed"));Array.prototype.push.apply(p,v);var L=u.getConnections({source:p,scope:"*"},!0),V=u.getConnections({target:p,scope:"*"},!0),G={};t.connections.source.length=0,t.connections.target.length=0;var W=function(lt){for(var st=0;st<lt.length;st++)if(!G[lt[st].id]){G[lt[st].id]=!0;var it=u.getGroupFor(lt[st].source),rt=u.getGroupFor(lt[st].target);it===t?(rt!==t&&t.connections.source.push(lt[st]),_[lt[st].id]=t):rt===t&&(t.connections.target.push(lt[st]),k[lt[st].id]=t)}};W(L),W(V)}this.updateConnectionsForGroup=o,this.refreshAllGroups=function(){for(var t in A)o(A[t]),u.dragManager.updateOffsets(u.getId(A[t].getEl()))}},C=function(u,A){var _=this,k=A.el;this.getEl=function(){return k},this.id=A.id||f.uuid(),k._isJsPlumbGroup=!0;var d=this.getDragArea=function(){var rt=u.getSelector(k,tt);return rt&&rt.length>0?rt[0]:k},S=A.ghost===!0,R=S||A.constrain===!0,B=A.revert!==!1,Y=A.orphan===!0,i=A.prune===!0,o=A.dropOverride===!0,t=A.proxied!==!1,p=[];if(this.connections={source:[],target:[],internal:[]},this.getAnchor=function(rt,pt){return A.anchor||"Continuous"},this.getEndpoint=function(rt,pt){return A.endpoint||["Dot",{radius:10}]},this.collapsed=!1,A.draggable!==!1){var v={drag:function(){for(var rt=0;rt<p.length;rt++)u.draw(p[rt])},stop:function(rt){u.fire(U,jsPlumb.extend(rt,{group:_}))},scope:D};A.dragOptions&&z.jsPlumb.extend(v,A.dragOptions),u.draggable(A.el,v)}A.droppable!==!1&&u.droppable(A.el,{drop:function(rt){var pt=rt.drag.el;if(!pt._isJsPlumbGroup){var gt=pt._jsPlumbGroup;if(gt!==_){if(gt!=null&&gt.overrideDrop(pt,_))return;u.getGroupManager().addToGroup(_,pt,!1)}}}});var F=function(rt,pt){for(var gt=rt.nodeType==null?rt:[rt],ut=0;ut<gt.length;ut++)pt(gt[ut])};this.overrideDrop=function(rt,pt){return o&&(B||i||Y)},this.add=function(rt,pt){var gt=d();F(rt,function(ut){if(ut._jsPlumbGroup!=null){if(ut._jsPlumbGroup===_)return;ut._jsPlumbGroup.remove(ut,!0,pt,!1)}ut._jsPlumbGroup=_,p.push(ut),u.isAlreadyDraggable(ut)&&it(ut),ut.parentNode!==gt&&gt.appendChild(ut)}),u.getGroupManager().updateConnectionsForGroup(_)},this.remove=function(rt,pt,gt,ut,bt){F(rt,function(vt){if(vt._jsPlumbGroup===_){if(delete vt._jsPlumbGroup,f.removeWithFunction(p,function(K){return K===vt}),pt)try{_.getDragArea().removeChild(vt)}catch(K){jsPlumbUtil.log("Could not remove element from Group "+K)}if(st(vt),!gt){var J={group:_,el:vt};bt&&(J.targetGroup=bt),u.fire(E,J)}}}),ut||u.getGroupManager().updateConnectionsForGroup(_)},this.removeAll=function(rt,pt){for(var gt=0,ut=p.length;gt<ut;gt++){var bt=p[0];_.remove(bt,rt,pt,!0),u.remove(bt,!0)}p.length=0,u.getGroupManager().updateConnectionsForGroup(_)},this.orphanAll=function(){for(var rt={},pt=0;pt<p.length;pt++){var gt=G(p[pt]);rt[gt[0]]=gt[1]}return p.length=0,rt},this.getMembers=function(){return p},k[y]=this,u.bind(h,(function(rt){rt.el._jsPlumbGroup===this&&it(rt.el)}).bind(this));function L(rt){return rt.offsetParent}function V(rt,pt){var gt=L(rt),ut=u.getSize(gt),bt=u.getSize(rt),vt=pt[0],J=vt+bt[0],K=pt[1],$=K+bt[1];return J>0&&vt<ut[0]&&$>0&&K<ut[1]}function G(rt){var pt=u.getId(rt),gt=u.getOffset(rt);return rt.parentNode.removeChild(rt),u.getContainer().appendChild(rt),u.setPosition(rt,gt),st(rt),u.dragManager.clearParent(rt,pt),[pt,gt]}function W(rt){var pt=[];function gt(bt,vt,J){var K=null;if(!V(bt,[vt,J])){var $=bt._jsPlumbGroup;i?u.remove(bt):K=G(bt),$.remove(bt)}return K}for(var ut=0;ut<rt.selection.length;ut++)pt.push(gt(rt.selection[ut][0],rt.selection[ut][1].left,rt.selection[ut][1].top));return pt.length===1?pt[0]:pt}function lt(rt){var pt=u.getId(rt);u.revalidate(rt),u.dragManager.revalidateParent(rt,pt)}function st(rt){rt._katavorioDrag&&((i||Y)&&rt._katavorioDrag.off(O,W),!i&&!Y&&B&&(rt._katavorioDrag.off(l,lt),rt._katavorioDrag.setRevert(null)))}function it(rt){rt._katavorioDrag&&((i||Y)&&rt._katavorioDrag.on(O,W),R&&rt._katavorioDrag.setConstrain(!0),S&&rt._katavorioDrag.setUseGhostProxy(!0),!i&&!Y&&B&&(rt._katavorioDrag.on(l,lt),rt._katavorioDrag.setRevert(function(pt,gt){return!V(pt,gt)})))}this.shouldProxy=function(){return t},u.getGroupManager().addGroup(this)};X.prototype.addGroup=function(u){var A=this;if(A._groups=A._groups||{},A._groups[u.id]!=null)throw new TypeError("cannot create Group ["+u.id+"]; a Group with that ID exists");if(u.el[y]!=null)throw new TypeError("cannot create Group ["+u.id+"]; the given element is already a Group");var _=new C(A,u);return A._groups[_.id]=_,u.collapsed&&this.collapseGroup(_),_},X.prototype.addToGroup=function(u,A,_){var k=(function(S){var R=this.getId(S);this.manage(R,S),this.getGroupManager().addToGroup(u,S,_)}).bind(this);if(Array.isArray(A))for(var d=0;d<A.length;d++)k(A[d]);else k(A)},X.prototype.removeFromGroup=function(u,A,_){this.getGroupManager().removeFromGroup(u,A,_),this.getContainer().appendChild(A)},X.prototype.removeGroup=function(u,A,_,k){return this.getGroupManager().removeGroup(u,A,_,k)},X.prototype.removeAllGroups=function(u,A,_){this.getGroupManager().removeAllGroups(u,A,_)},X.prototype.getGroup=function(u){return this.getGroupManager().getGroup(u)},X.prototype.getGroups=function(){return this.getGroupManager().getGroups()},X.prototype.expandGroup=function(u){this.getGroupManager().expandGroup(u)},X.prototype.collapseGroup=function(u){this.getGroupManager().collapseGroup(u)},X.prototype.repaintGroup=function(u){this.getGroupManager().repaintGroup(u)},X.prototype.toggleGroup=function(u){u=this.getGroupManager().getGroup(u),u!=null&&this.getGroupManager()[u.collapsed?"expandGroup":"collapseGroup"](u)},X.prototype.getGroupManager=function(){var u=this[s];return u==null&&(u=this[s]=new b(this)),u},X.prototype.removeGroupManager=function(){delete this[s]},X.prototype.getGroupFor=function(u){if(u=this.getElement(u),u){for(var A=this.getContainer(),_=!1,k=null;!_;)u==null||u===A?_=!0:u[y]?(k=u[y],_=!0):u=u.parentNode;return k}}}).call(typeof window<"u"?window:jt),(function(){var z=this,f=z.jsPlumb,X=z.jsPlumbUtil,Q="Straight",Z="Arc",tt=function(h){this.type="Flowchart",h=h||{},h.stub=h.stub==null?30:h.stub;var O,l=f.Connectors.AbstractConnector.apply(this,arguments),s=h.midpoint==null||isNaN(h.midpoint)?.5:h.midpoint,y=h.alwaysRespectStubs===!0,D=null,M=null,E=h.cornerRadius!=null?h.cornerRadius:0;h.loopbackRadius;var g=function(P){return P<0?-1:P===0?0:1},e=function(P){return[g(P[2]-P[0]),g(P[3]-P[1])]},j=function(P,w,n,c){if(!(D===w&&M===n)){var a=D??c.sx,b=M??c.sy,C=a===w?"v":"h";D=w,M=n,P.push([a,b,w,n,C])}},I=function(P){return Math.sqrt(Math.pow(P[0]-P[2],2)+Math.pow(P[1]-P[3],2))},U=function(P){var w=[];return w.push.apply(w,P),w},N=function(P,w,n){for(var c=null,a,b,C,u=0;u<w.length-1;u++){if(c=c||U(w[u]),a=U(w[u+1]),b=e(c),C=e(a),E>0&&c[4]!==a[4]){var A=Math.min(I(c),I(a)),_=Math.min(E,A/2);c[2]-=b[0]*_,c[3]-=b[1]*_,a[0]+=C[0]*_,a[1]+=C[1]*_;var k=b[1]===C[0]&&C[0]===1||b[1]===C[0]&&C[0]===0&&b[0]!==C[1]||b[1]===C[0]&&C[0]===-1,d=a[1]>c[3]?1:-1,S=a[0]>c[2]?1:-1,R=d===S,B=R&&k||!R&&!k?a[0]:c[2],Y=R&&k||!R&&!k?c[3]:a[1];l.addSegment(P,Q,{x1:c[0],y1:c[1],x2:c[2],y2:c[3]}),l.addSegment(P,Z,{r:_,x1:c[2],y1:c[3],x2:a[0],y2:a[1],cx:B,cy:Y,ac:k})}else{var i=c[2]===c[0]?0:c[2]>c[0]?n.lw/2:-(n.lw/2),o=c[3]===c[1]?0:c[3]>c[1]?n.lw/2:-(n.lw/2);l.addSegment(P,Q,{x1:c[0]-i,y1:c[1]-o,x2:c[2]+i,y2:c[3]+o})}c=a}a!=null&&l.addSegment(P,Q,{x1:a[0],y1:a[1],x2:a[2],y2:a[3]})};this.midpoint=s,this._compute=function(P,w){O=[],D=null,M=null;var n=function(){return[P.startStubX,P.startStubY,P.endStubX,P.endStubY]},c={perpendicular:n,orthogonal:n,opposite:function(o){var t=P,p=o==="x"?0:1,v={x:function(){return t.so[p]===1&&(t.startStubX>t.endStubX&&t.tx>t.startStubX||t.sx>t.endStubX&&t.tx>t.sx)||t.so[p]===-1&&(t.startStubX<t.endStubX&&t.tx<t.startStubX||t.sx<t.endStubX&&t.tx<t.sx)},y:function(){return t.so[p]===1&&(t.startStubY>t.endStubY&&t.ty>t.startStubY||t.sy>t.endStubY&&t.ty>t.sy)||t.so[p]===-1&&(t.startStubY<t.endStubY&&t.ty<t.startStubY||t.sy<t.endStubY&&t.ty<t.sy)}};return!y&&v[o]()?{x:[(P.sx+P.tx)/2,P.startStubY,(P.sx+P.tx)/2,P.endStubY],y:[P.startStubX,(P.sy+P.ty)/2,P.endStubX,(P.sy+P.ty)/2]}[o]:[P.startStubX,P.startStubY,P.endStubX,P.endStubY]}},a=c[P.anchorOrientation](P.sourceAxis),b=P.sourceAxis==="x"?0:1,C=P.sourceAxis==="x"?1:0,u=a[b],A=a[C],_=a[b+2],k=a[C+2];j(O,a[0],a[1],P);var d=P.startStubX+(P.endStubX-P.startStubX)*s,S=P.startStubY+(P.endStubY-P.startStubY)*s,R={x:[0,1],y:[1,0]},B={perpendicular:function(o){var t=P,p={x:[[[1,2,3,4],null,[2,1,4,3]],null,[[4,3,2,1],null,[3,4,1,2]]],y:[[[3,2,1,4],null,[2,3,4,1]],null,[[4,1,2,3],null,[1,4,3,2]]]},v={x:[[t.startStubX,t.endStubX],null,[t.endStubX,t.startStubX]],y:[[t.startStubY,t.endStubY],null,[t.endStubY,t.startStubY]]},F={x:[[d,t.startStubY],[d,t.endStubY]],y:[[t.startStubX,S],[t.endStubX,S]]},L={x:[[t.endStubX,t.startStubY]],y:[[t.startStubX,t.endStubY]]},V={x:[[t.startStubX,t.endStubY],[t.endStubX,t.endStubY]],y:[[t.endStubX,t.startStubY],[t.endStubX,t.endStubY]]},G={x:[[t.startStubX,S],[t.endStubX,S],[t.endStubX,t.endStubY]],y:[[d,t.startStubY],[d,t.endStubY],[t.endStubX,t.endStubY]]},W={x:[t.startStubY,t.endStubY],y:[t.startStubX,t.endStubX]},lt=R[o][0],st=R[o][1],it=t.so[lt]+1,rt=t.to[st]+1,pt=t.to[st]===-1&&W[o][1]<W[o][0]||t.to[st]===1&&W[o][1]>W[o][0],gt=v[o][it][0],ut=v[o][it][1],bt=p[o][it][rt];if(t.segment===bt[3]||t.segment===bt[2]&&pt)return F[o];if(t.segment===bt[2]&&ut<gt)return L[o];if(t.segment===bt[2]&&ut>=gt||t.segment===bt[1]&&!pt)return G[o];if(t.segment===bt[0]||t.segment===bt[1]&&pt)return V[o]},orthogonal:function(o,t,p,v,F){var L=P,V={x:L.so[0]===-1?Math.min(t,v):Math.max(t,v),y:L.so[1]===-1?Math.min(t,v):Math.max(t,v)}[o];return{x:[[V,p],[V,F],[v,F]],y:[[p,V],[F,V],[F,v]]}[o]},opposite:function(o,t,p,v){var F=P,L={x:"y",y:"x"}[o],V={x:"height",y:"width"}[o],G=F["is"+o.toUpperCase()+"GreaterThanStubTimes2"];if(w.sourceEndpoint.elementId===w.targetEndpoint.elementId){var W=p+(1-w.sourceEndpoint.anchor[L])*w.sourceInfo[V]+l.maxStub;return{x:[[t,W],[v,W]],y:[[W,t],[W,v]]}[o]}else{if(!G||F.so[b]===1&&t>v||F.so[b]===-1&&t<v)return{x:[[t,S],[v,S]],y:[[d,t],[d,v]]}[o];if(F.so[b]===1&&t<v||F.so[b]===-1&&t>v)return{x:[[d,F.sy],[d,F.ty]],y:[[F.sx,S],[F.tx,S]]}[o]}}},Y=B[P.anchorOrientation](P.sourceAxis,u,A,_,k);if(Y)for(var i=0;i<Y.length;i++)j(O,Y[i][0],Y[i][1],P);j(O,a[2],a[3],P),j(O,P.tx,P.ty,P),N(this,O,P)}};f.Connectors.Flowchart=tt,X.extend(f.Connectors.Flowchart,f.Connectors.AbstractConnector)}).call(typeof window<"u"?window:jt),(function(){var z=this,f=z.jsPlumb,X=z.jsPlumbUtil;f.Connectors.AbstractBezierConnector=function(Z){Z=Z||{};var tt=Z.showLoopback!==!1;Z.curviness;var h=Z.margin||5;Z.proximityLimit;var O=Z.orientation&&Z.orientation==="clockwise",l=Z.loopbackRadius||25,s;return this._compute=function(y,D){var M=D.sourcePos,E=D.targetPos,g=Math.abs(M[0]-E[0]),e=Math.abs(M[1]-E[1]);if(!tt||D.sourceEndpoint.elementId!==D.targetEndpoint.elementId)this._computeBezier(y,D,M,E,g,e);else{var j=D.sourcePos[0],I=D.sourcePos[1]-h,U=j,N=I-l,P=U-l,w=N-l;g=2*l,e=2*l,y.points[0]=P,y.points[1]=w,y.points[2]=g,y.points[3]=e,s.addSegment(this,"Arc",{loopback:!0,x1:j-P+4,y1:I-w,startAngle:0,endAngle:2*Math.PI,r:l,ac:!O,x2:j-P-4,y2:I-w,cx:U-P,cy:N-w})}},s=f.Connectors.AbstractConnector.apply(this,arguments),s},X.extend(f.Connectors.AbstractBezierConnector,f.Connectors.AbstractConnector);var Q=function(Z){Z=Z||{},this.type="Bezier";var tt=f.Connectors.AbstractBezierConnector.apply(this,arguments),h=Z.curviness||150,O=10;this.getCurviness=function(){return h},this._findControlPoint=function(l,s,y,D,M,E,g){var e=E[0]!==g[0]||E[1]===g[1],j=[];return e?(g[0]===0?j.push(y[0]<s[0]?l[0]+O:l[0]-O):j.push(l[0]+h*g[0]),g[1]===0?j.push(y[1]<s[1]?l[1]+O:l[1]-O):j.push(l[1]+h*E[1])):(E[0]===0?j.push(s[0]<y[0]?l[0]+O:l[0]-O):j.push(l[0]-h*E[0]),E[1]===0?j.push(s[1]<y[1]?l[1]+O:l[1]-O):j.push(l[1]+h*g[1])),j},this._computeBezier=function(l,s,y,D,M,E){var g,e,j=y[0]<D[0]?M:0,I=y[1]<D[1]?E:0,U=y[0]<D[0]?0:M,N=y[1]<D[1]?0:E;g=this._findControlPoint([j,I],y,D,s.sourceEndpoint,s.targetEndpoint,l.so,l.to),e=this._findControlPoint([U,N],D,y,s.targetEndpoint,s.sourceEndpoint,l.to,l.so),tt.addSegment(this,"Bezier",{x1:j,y1:I,x2:U,y2:N,cp1x:g[0],cp1y:g[1],cp2x:e[0],cp2y:e[1]})}};f.Connectors.Bezier=Q,X.extend(Q,f.Connectors.AbstractBezierConnector)}).call(typeof window<"u"?window:jt),(function(){var z=this,f=z.jsPlumb,X=z.jsPlumbUtil,Q=function(h,O,l,s){return h<=l&&s<=O?1:h<=l&&O<=s?2:l<=h&&s>=O?3:4},Z=function(h,O,l,s,y,D,M,E,g){if(E<=g)return[h,O];if(l===1)return s[3]<=0&&y[3]>=1?[h+(s[2]<.5?-1*D:D),O]:s[2]>=1&&y[2]<=0?[h,O+(s[3]<.5?-1*M:M)]:[h+-1*D,O+-1*M];if(l===2)return s[3]>=1&&y[3]<=0?[h+(s[2]<.5?-1*D:D),O]:s[2]>=1&&y[2]<=0?[h,O+(s[3]<.5?-1*M:M)]:[h+D,O+-1*M];if(l===3)return s[3]>=1&&y[3]<=0?[h+(s[2]<.5?-1*D:D),O]:s[2]<=0&&y[2]>=1?[h,O+(s[3]<.5?-1*M:M)]:[h+-1*D,O+-1*M];if(l===4)return s[3]<=0&&y[3]>=1?[h+(s[2]<.5?-1*D:D),O]:s[2]<=0&&y[2]>=1?[h,O+(s[3]<.5?-1*M:M)]:[h+D,O+-1*M]},tt=function(h){h=h||{},this.type="StateMachine";var O=f.Connectors.AbstractBezierConnector.apply(this,arguments),l=h.curviness||10,s=h.margin||5,y=h.proximityLimit||80;h.orientation&&h.orientation;var D;this._computeBezier=function(M,E,g,e,j,I){var U=E.sourcePos[0]<E.targetPos[0]?0:j,N=E.sourcePos[1]<E.targetPos[1]?0:I,P=E.sourcePos[0]<E.targetPos[0]?j:0,w=E.sourcePos[1]<E.targetPos[1]?I:0;E.sourcePos[2]===0&&(U-=s),E.sourcePos[2]===1&&(U+=s),E.sourcePos[3]===0&&(N-=s),E.sourcePos[3]===1&&(N+=s),E.targetPos[2]===0&&(P-=s),E.targetPos[2]===1&&(P+=s),E.targetPos[3]===0&&(w-=s),E.targetPos[3]===1&&(w+=s);var n=(U+P)/2,c=(N+w)/2,a=Q(U,N,P,w),b=Math.sqrt(Math.pow(P-U,2)+Math.pow(w-N,2)),C,u,A,_;D=Z(n,c,a,E.sourcePos,E.targetPos,l,l,b,y),C=D[0],u=D[0],A=D[1],_=D[1],O.addSegment(this,"Bezier",{x1:P,y1:w,x2:U,y2:N,cp1x:C,cp1y:A,cp2x:u,cp2y:_})}};f.Connectors.StateMachine=tt,X.extend(tt,f.Connectors.AbstractBezierConnector)}).call(typeof window<"u"?window:jt),(function(){var z=this,f=z.jsPlumb,X=z.jsPlumbUtil,Q="Straight",Z=function(tt){this.type=Q;var h=f.Connectors.AbstractConnector.apply(this,arguments);this._compute=function(O,l){h.addSegment(this,Q,{x1:O.sx,y1:O.sy,x2:O.startStubX,y2:O.startStubY}),h.addSegment(this,Q,{x1:O.startStubX,y1:O.startStubY,x2:O.endStubX,y2:O.endStubY}),h.addSegment(this,Q,{x1:O.endStubX,y1:O.endStubY,x2:O.tx,y2:O.ty})}};f.Connectors.Straight=Z,X.extend(Z,f.Connectors.AbstractConnector)}).call(typeof window<"u"?window:jt),(function(){var z=this,f=z.jsPlumb,X=z.jsPlumbUtil,Q={"stroke-linejoin":"stroke-linejoin","stroke-dashoffset":"stroke-dashoffset","stroke-linecap":"stroke-linecap"},Z="stroke-dasharray",tt="dashstyle",h="linearGradient",O="radialGradient",l="defs",s="fill",y="stop",D="stroke",M="stroke-width",E="style",g="none",e="jsplumb_gradient_",j="strokeWidth",I={svg:"http://www.w3.org/2000/svg"},U=function(_,k){for(var d in k)_.setAttribute(d,""+k[d])},N=function(_,k){return k=k||{},k.version="1.1",k.xmlns=I.svg,f.createElementNS(I.svg,_,null,null,k)},P=function(_){return"position:absolute;left:"+_[0]+"px;top:"+_[1]+"px"},w=function(_){for(var k=_.querySelectorAll(" defs,linearGradient,radialGradient"),d=0;d<k.length;d++)k[d].parentNode.removeChild(k[d])},n=function(_,k,d,S,R){var B=e+R._jsPlumb.instance.idstamp();w(_);var Y;d.gradient.offset?Y=N(O,{id:B}):Y=N(h,{id:B,gradientUnits:"userSpaceOnUse"});var i=N(l);_.appendChild(i),i.appendChild(Y);for(var o=0;o<d.gradient.stops.length;o++){var t=R.segment===1||R.segment===2?o:d.gradient.stops.length-1-o,p=d.gradient.stops[t][1],v=N(y,{offset:Math.floor(d.gradient.stops[o][0]*100)+"%","stop-color":p});Y.appendChild(v)}var F=d.stroke?D:s;k.setAttribute(F,"url(#"+B+")")},c=function(_,k,d,S,R){if(k.setAttribute(s,d.fill?d.fill:g),k.setAttribute(D,d.stroke?d.stroke:g),d.gradient?n(_,k,d,S,R):(w(_),k.setAttribute(E,"")),d.strokeWidth&&k.setAttribute(M,d.strokeWidth),d[tt]&&d[j]&&!d[Z]){var B=d[tt].indexOf(",")===-1?" ":",",Y=d[tt].split(B),i="";Y.forEach(function(t){i+=Math.floor(t*d.strokeWidth)+B}),k.setAttribute(Z,i)}else d[Z]&&k.setAttribute(Z,d[Z]);for(var o in Q)d[o]&&k.setAttribute(Q[o],d[o])},a=function(_,k,d){_.childNodes.length>d?_.insertBefore(k,_.childNodes[d]):_.appendChild(k)};X.svg={node:N,attr:U,pos:P};var b=function(_){var k=_.pointerEventsSpec||"all",d={};f.jsPlumbUIComponent.apply(this,_.originalArgs),this.canvas=null,this.path=null,this.svg=null,this.bgCanvas=null;var S=_.cssClass+" "+(_.originalArgs[0].cssClass||""),R={style:"",width:0,height:0,"pointer-events":k,position:"absolute"};this.svg=N("svg",R),_.useDivWrapper?(this.canvas=f.createElement("div",{position:"absolute"}),X.sizeElement(this.canvas,0,0,1,1),this.canvas.className=S):(U(this.svg,{class:S}),this.canvas=this.svg),_._jsPlumb.appendElement(this.canvas,_.originalArgs[0].parent),_.useDivWrapper&&this.canvas.appendChild(this.svg);var B=[this.canvas];return this.getDisplayElements=function(){return B},this.appendDisplayElement=function(Y){B.push(Y)},this.paint=function(Y,i,o){if(Y!=null){var t=[this.x,this.y],p=[this.w,this.h],v;o!=null&&(o.xmin<0&&(t[0]+=o.xmin),o.ymin<0&&(t[1]+=o.ymin),p[0]=o.xmax+(o.xmin<0?-o.xmin:0),p[1]=o.ymax+(o.ymin<0?-o.ymin:0)),_.useDivWrapper?(X.sizeElement(this.canvas,t[0],t[1],p[0]>0?p[0]:1,p[1]>0?p[1]:1),t[0]=0,t[1]=0,v=P([0,0])):v=P([t[0],t[1]]),d.paint.apply(this,arguments),U(this.svg,{style:v,width:p[0]||1,height:p[1]||1})}},{renderer:d}};X.extend(b,f.jsPlumbUIComponent,{cleanup:function(_){_||this.typeId==null?(this.canvas&&(this.canvas._jsPlumb=null),this.svg&&(this.svg._jsPlumb=null),this.bgCanvas&&(this.bgCanvas._jsPlumb=null),this.canvas&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.bgCanvas&&this.bgCanvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.svg=null,this.canvas=null,this.path=null,this.group=null,this._jsPlumb=null):(this.canvas&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.bgCanvas&&this.bgCanvas.parentNode&&this.bgCanvas.parentNode.removeChild(this.bgCanvas))},reattach:function(_){var k=_.getContainer();this.canvas&&this.canvas.parentNode==null&&k.appendChild(this.canvas),this.bgCanvas&&this.bgCanvas.parentNode==null&&k.appendChild(this.bgCanvas)},setVisible:function(_){this.canvas&&(this.canvas.style.display=_?"block":"none")}}),f.ConnectorRenderers.svg=function(_){var k=this,d=b.apply(this,[{cssClass:_._jsPlumb.connectorClass,originalArgs:arguments,pointerEventsSpec:"none",_jsPlumb:_._jsPlumb}]);d.renderer.paint=function(S,R,B){var Y=k.getSegments(),i="",o=[0,0];if(B.xmin<0&&(o[0]=-B.xmin),B.ymin<0&&(o[1]=-B.ymin),Y.length>0){i=k.getPathData();var t={d:i,transform:"translate("+o[0]+","+o[1]+")","pointer-events":_["pointer-events"]||"visibleStroke"},p=null,v=[k.x,k.y,k.w,k.h];if(S.outlineStroke){var F=S.outlineWidth||1,L=S.strokeWidth+2*F;p=f.extend({},S),delete p.gradient,p.stroke=S.outlineStroke,p.strokeWidth=L,k.bgPath==null?(k.bgPath=N("path",t),f.addClass(k.bgPath,f.connectorOutlineClass),a(k.svg,k.bgPath,0)):U(k.bgPath,t),c(k.svg,k.bgPath,p,v,k)}k.path==null?(k.path=N("path",t),a(k.svg,k.path,S.outlineStroke?1:0)):U(k.path,t),c(k.svg,k.path,S,v,k)}}},X.extend(f.ConnectorRenderers.svg,b);var C=f.SvgEndpoint=function(_){var k=b.apply(this,[{cssClass:_._jsPlumb.endpointClass,originalArgs:arguments,pointerEventsSpec:"all",useDivWrapper:!0,_jsPlumb:_._jsPlumb}]);k.renderer.paint=(function(d){var S=f.extend({},d);S.outlineStroke&&(S.stroke=S.outlineStroke),this.node==null?(this.node=this.makeNode(S),this.svg.appendChild(this.node)):this.updateNode!=null&&this.updateNode(this.node),c(this.svg,this.node,S,[this.x,this.y,this.w,this.h],this),P(this.node,[this.x,this.y])}).bind(this)};X.extend(C,b),f.Endpoints.svg.Dot=function(){f.Endpoints.Dot.apply(this,arguments),C.apply(this,arguments),this.makeNode=function(_){return N("circle",{cx:this.w/2,cy:this.h/2,r:this.radius})},this.updateNode=function(_){U(_,{cx:this.w/2,cy:this.h/2,r:this.radius})}},X.extend(f.Endpoints.svg.Dot,[f.Endpoints.Dot,C]),f.Endpoints.svg.Rectangle=function(){f.Endpoints.Rectangle.apply(this,arguments),C.apply(this,arguments),this.makeNode=function(_){return N("rect",{width:this.w,height:this.h})},this.updateNode=function(_){U(_,{width:this.w,height:this.h})}},X.extend(f.Endpoints.svg.Rectangle,[f.Endpoints.Rectangle,C]),f.Endpoints.svg.Image=f.Endpoints.Image,f.Endpoints.svg.Blank=f.Endpoints.Blank,f.Overlays.svg.Label=f.Overlays.Label,f.Overlays.svg.Custom=f.Overlays.Custom;var u=function(_,k){_.apply(this,k),f.jsPlumbUIComponent.apply(this,k),this.isAppendedAtTopLevel=!1,this.path=null,this.paint=function(S,R){if(S.component.svg&&R){this.path==null&&(this.path=N("path",{"pointer-events":"all"}),S.component.svg.appendChild(this.path),this.elementCreated&&this.elementCreated(this.path,S.component),this.canvas=S.component.svg);var B=k&&k.length===1&&k[0].cssClass||"",Y=[0,0];R.xmin<0&&(Y[0]=-R.xmin),R.ymin<0&&(Y[1]=-R.ymin),U(this.path,{d:d(S.d),class:B,stroke:S.stroke?S.stroke:null,fill:S.fill?S.fill:null,transform:"translate("+Y[0]+","+Y[1]+")"})}};var d=function(S){return isNaN(S.cxy.x)||isNaN(S.cxy.y)?"":"M"+S.hxy.x+","+S.hxy.y+" L"+S.tail[0].x+","+S.tail[0].y+" L"+S.cxy.x+","+S.cxy.y+" L"+S.tail[1].x+","+S.tail[1].y+" L"+S.hxy.x+","+S.hxy.y};this.transfer=function(S){S.canvas&&this.path&&this.path.parentNode&&(this.path.parentNode.removeChild(this.path),S.canvas.appendChild(this.path))}},A={cleanup:function(_){this.path!=null&&(_?this._jsPlumb.instance.removeElement(this.path):this.path.parentNode&&this.path.parentNode.removeChild(this.path))},reattach:function(_,k){this.path&&k.canvas&&k.canvas.appendChild(this.path)},setVisible:function(_){this.path!=null&&(this.path.style.display=_?"block":"none")}};X.extend(u,[f.jsPlumbUIComponent,f.Overlays.AbstractOverlay]),f.Overlays.svg.Arrow=function(){u.apply(this,[f.Overlays.Arrow,arguments])},X.extend(f.Overlays.svg.Arrow,[f.Overlays.Arrow,u],A),f.Overlays.svg.PlainArrow=function(){u.apply(this,[f.Overlays.PlainArrow,arguments])},X.extend(f.Overlays.svg.PlainArrow,[f.Overlays.PlainArrow,u],A),f.Overlays.svg.Diamond=function(){u.apply(this,[f.Overlays.Diamond,arguments])},X.extend(f.Overlays.svg.Diamond,[f.Overlays.Diamond,u],A),f.Overlays.svg.GuideLines=function(){var _=null,k=this,d,S;f.Overlays.GuideLines.apply(this,arguments),this.paint=function(B,Y){_==null&&(_=N("path"),B.connector.svg.appendChild(_),k.attachListeners(_,B.connector),k.attachListeners(_,k),d=N("path"),B.connector.svg.appendChild(d),k.attachListeners(d,B.connector),k.attachListeners(d,k),S=N("path"),B.connector.svg.appendChild(S),k.attachListeners(S,B.connector),k.attachListeners(S,k));var i=[0,0];Y.xmin<0&&(i[0]=-Y.xmin),Y.ymin<0&&(i[1]=-Y.ymin),U(_,{d:R(B.head,B.tail),stroke:"red",fill:null,transform:"translate("+i[0]+","+i[1]+")"}),U(d,{d:R(B.tailLine[0],B.tailLine[1]),stroke:"blue",fill:null,transform:"translate("+i[0]+","+i[1]+")"}),U(S,{d:R(B.headLine[0],B.headLine[1]),stroke:"green",fill:null,transform:"translate("+i[0]+","+i[1]+")"})};var R=function(B,Y){return"M "+B.x+","+B.y+" L"+Y.x+","+Y.y}},X.extend(f.Overlays.svg.GuideLines,f.Overlays.GuideLines)}).call(typeof window<"u"?window:jt),(function(){var z=this,f=z.jsPlumb,X=z.jsPlumbUtil,Q=z.Katavorio,Z=z.Biltong,tt=function(n){var c=n._mottle;return c||(c=n._mottle=new z.Mottle),c},h=function(n,c){c=c||"main";var a="_katavorio_"+c,b=n[a],C=n.getEventManager();return b||(b=new Q({bind:C.on,unbind:C.off,getSize:f.getSize,getConstrainingRectangle:function(u){return[u.parentNode.scrollWidth,u.parentNode.scrollHeight]},getPosition:function(u,A){var _=n.getOffset(u,A,u._katavorioDrag?u.offsetParent:null);return[_.left,_.top]},setPosition:function(u,A){u.style.left=A[0]+"px",u.style.top=A[1]+"px"},addClass:f.addClass,removeClass:f.removeClass,intersects:Z.intersects,indexOf:function(u,A){return u.indexOf(A)},scope:n.getDefaultScope(),css:{noSelect:n.dragSelectClass,droppable:"jtk-droppable",draggable:"jtk-draggable",drag:"jtk-drag",selected:"jtk-drag-selected",active:"jtk-drag-active",hover:"jtk-drag-hover",ghostProxy:"jtk-ghost-proxy"}}),b.setZoom(n.getZoom()),n[a]=b,n.bind("zoom",b.setZoom)),b},O=function(n){var c=n.el._jsPlumbDragOptions,a=!0;return c.canDrag&&(a=c.canDrag()),a&&(this.setHoverSuspended(!0),this.select({source:n.el}).addClass(this.elementDraggingClass+" "+this.sourceElementDraggingClass,!0),this.select({target:n.el}).addClass(this.elementDraggingClass+" "+this.targetElementDraggingClass,!0),this.setConnectionBeingDragged(!0)),a},l=function(n){var c=this.getUIPosition(arguments,this.getZoom());if(c!=null){var a=n.el._jsPlumbDragOptions;this.draw(n.el,c,null,!0),a._dragging&&this.addClass(n.el,"jtk-dragged"),a._dragging=!0}},s=function(n){for(var c=n.selection,a,b=(function(u){var A;u[1]!=null&&(a=this.getUIPosition([{el:u[2].el,pos:[u[1].left,u[1].top]}]),A=this.draw(u[2].el,a)),u[0]._jsPlumbDragOptions!=null&&delete u[0]._jsPlumbDragOptions._dragging,this.removeClass(u[0],"jtk-dragged"),this.select({source:u[2].el}).removeClass(this.elementDraggingClass+" "+this.sourceElementDraggingClass,!0),this.select({target:u[2].el}).removeClass(this.elementDraggingClass+" "+this.targetElementDraggingClass,!0),n.e._drawResult=n.e._drawResult||{c:[],e:[],a:[]},Array.prototype.push.apply(n.e._drawResult.c,A.c),Array.prototype.push.apply(n.e._drawResult.e,A.e),Array.prototype.push.apply(n.e._drawResult.a,A.a),this.getDragManager().dragEnded(u[2].el)}).bind(this),C=0;C<c.length;C++)b(c[C]);this.setHoverSuspended(!1),this.setConnectionBeingDragged(!1)},y=function(n,c){var a=function(b){if(c[b]!=null)if(X.isString(c[b])){var C=c[b].match(/-=/)?-1:1,u=c[b].substring(2);return n[b]+C*u}else return c[b];else return n[b]};return[a("left"),a("top")]},D=function(n,c){if(c==null)return[0,0];var a=j(c),b=e(a,0);return[b[n+"X"],b[n+"Y"]]},M=D.bind(this,"page"),E=D.bind(this,"screen"),g=D.bind(this,"client"),e=function(n,c){return n.item?n.item(c):n[c]},j=function(n){return n.touches&&n.touches.length>0?n.touches:n.changedTouches&&n.changedTouches.length>0?n.changedTouches:n.targetTouches&&n.targetTouches.length>0?n.targetTouches:[n]},I=function(n){var c={},a=[],b={},C={},u={};this.register=function(A){var _=n.getId(A),k;c[_]||(c[_]=A,a.push(A),b[_]={});var d=function(S){if(S){for(var R=0;R<S.childNodes.length;R++)if(S.childNodes[R].nodeType!==3&&S.childNodes[R].nodeType!==8){var B=jsPlumb.getElement(S.childNodes[R]),Y=n.getId(S.childNodes[R],null,!0);if(Y&&C[Y]&&C[Y]>0){k||(k=n.getOffset(A));var i=n.getOffset(B);b[_][Y]={id:Y,offset:{left:i.left-k.left,top:i.top-k.top}},u[Y]=_}d(S.childNodes[R])}}};d(A)},this.updateOffsets=function(A,_){if(A!=null){_=_||{};var k=jsPlumb.getElement(A),d=n.getId(k),S=b[d],R;if(S){for(var B in S)if(S.hasOwnProperty(B)){var Y=jsPlumb.getElement(B),i=_[B]||n.getOffset(Y);if(Y.offsetParent==null&&b[d][B]!=null)continue;R||(R=n.getOffset(k)),b[d][B]={id:B,offset:{left:i.left-R.left,top:i.top-R.top}},u[B]=d}}}},this.endpointAdded=function(A,_){_=_||n.getId(A);var k=document.body,d=A.parentNode;for(C[_]=C[_]?C[_]+1:1;d!=null&&d!==k;){var S=n.getId(d,null,!0);if(S&&c[S]){var R=n.getOffset(d);if(b[S][_]==null){var B=n.getOffset(A);b[S][_]={id:_,offset:{left:B.left-R.left,top:B.top-R.top}},u[_]=S}break}d=d.parentNode}},this.endpointDeleted=function(A){if(C[A.elementId]&&(C[A.elementId]--,C[A.elementId]<=0))for(var _ in b)b.hasOwnProperty(_)&&b[_]&&(delete b[_][A.elementId],delete u[A.elementId])},this.changeId=function(A,_){b[_]=b[A],b[A]={},u[_]=u[A],u[A]=null},this.getElementsForDraggable=function(A){return b[A]},this.elementRemoved=function(A){var _=u[A];_&&(b[_]&&delete b[_][A],delete u[A])},this.reset=function(){c={},a=[],b={},C={}},this.dragEnded=function(A){if(A.offsetParent!=null){var _=n.getId(A),k=u[_];k&&this.updateOffsets(k)}},this.setParent=function(A,_,k,d,S){var R=u[_];b[d]||(b[d]={});var B=n.getOffset(k),Y=S||n.getOffset(A);R&&b[R]&&delete b[R][_],b[d][_]={id:_,offset:{left:Y.left-B.left,top:Y.top-B.top}},u[_]=d},this.clearParent=function(A,_){var k=u[_];k&&(delete b[k][_],delete u[_])},this.revalidateParent=function(A,_,k){var d=u[_];if(d){var S={};S[_]=k,this.updateOffsets(d,S),n.revalidate(d)}},this.getDragAncestor=function(A){var _=jsPlumb.getElement(A),k=n.getId(_),d=u[k];return d?jsPlumb.getElement(d):null}},U=function(n,c,a){c=X.fastTrim(c),typeof n.className.baseVal<"u"?n.className.baseVal=c:n.className=c;try{var b=n.classList;if(b!=null){for(;b.length>0;)b.remove(b.item(0));for(var C=0;C<a.length;C++)a[C]&&b.add(a[C])}}catch(u){X.log("JSPLUMB: cannot set class list",u)}},N=function(n){return typeof n.className.baseVal>"u"?n.className:n.className.baseVal},P=function(n,c,a){c=c==null?[]:X.isArray(c)?c:c.split(/\s+/),a=a==null?[]:X.isArray(a)?a:a.split(/\s+/);var b=N(n),C=b.split(/\s+/),u=function(A,_){for(var k=0;k<_.length;k++)if(A)C.indexOf(_[k])===-1&&C.push(_[k]);else{var d=C.indexOf(_[k]);d!==-1&&C.splice(d,1)}};u(!0,c),u(!1,a),U(n,C.join(" "),C)};z.jsPlumb.extend(z.jsPlumbInstance.prototype,{headless:!1,pageLocation:M,screenLocation:E,clientLocation:g,getDragManager:function(){return this.dragManager==null&&(this.dragManager=new I(this)),this.dragManager},recalculateOffsets:function(n){this.getDragManager().updateOffsets(n)},createElement:function(n,c,a,b){return this.createElementNS(null,n,c,a,b)},createElementNS:function(n,c,a,b,C){var u=n==null?document.createElement(c):document.createElementNS(n,c),A;a=a||{};for(A in a)u.style[A]=a[A];b&&(u.className=b),C=C||{};for(A in C)u.setAttribute(A,""+C[A]);return u},getAttribute:function(n,c){return n.getAttribute!=null?n.getAttribute(c):null},setAttribute:function(n,c,a){n.setAttribute!=null&&n.setAttribute(c,a)},setAttributes:function(n,c){for(var a in c)c.hasOwnProperty(a)&&n.setAttribute(a,c[a])},appendToRoot:function(n){document.body.appendChild(n)},getRenderModes:function(){return["svg"]},getClass:N,addClass:function(n,c){jsPlumb.each(n,function(a){P(a,c)})},hasClass:function(n,c){return n=jsPlumb.getElement(n),n.classList?n.classList.contains(c):N(n).indexOf(c)!==-1},removeClass:function(n,c){jsPlumb.each(n,function(a){P(a,null,c)})},toggleClass:function(n,c){jsPlumb.hasClass(n,c)?jsPlumb.removeClass(n,c):jsPlumb.addClass(n,c)},updateClasses:function(n,c,a){jsPlumb.each(n,function(b){P(b,c,a)})},setClass:function(n,c){c!=null&&jsPlumb.each(n,function(a){U(a,c,c.split(/\s+/))})},setPosition:function(n,c){n.style.left=c.left+"px",n.style.top=c.top+"px"},getPosition:function(n){var c=function(a){var b=n.style[a];return b?b.substring(0,b.length-2):0};return{left:c("left"),top:c("top")}},getStyle:function(n,c){return typeof window.getComputedStyle<"u"?getComputedStyle(n,null).getPropertyValue(c):n.currentStyle[c]},getSelector:function(n,c){var a=null;return arguments.length===1?a=n.nodeType!=null?n:document.querySelectorAll(n):a=n.querySelectorAll(c),a},getOffset:function(n,c,a){n=jsPlumb.getElement(n),a=a||this.getContainer();for(var b={left:n.offsetLeft,top:n.offsetTop},C=c||a!=null&&n!==a&&n.offsetParent!==a?n.offsetParent:null,u=(function(k){k!=null&&k!==document.body&&(k.scrollTop>0||k.scrollLeft>0)&&(b.left-=k.scrollLeft,b.top-=k.scrollTop)}).bind(this);C!=null;)b.left+=C.offsetLeft,b.top+=C.offsetTop,u(C),C=c?C.offsetParent:C.offsetParent===a?null:C.offsetParent;if(a!=null&&!c&&(a.scrollTop>0||a.scrollLeft>0)){var A=n.offsetParent!=null?this.getStyle(n.offsetParent,"position"):"static",_=this.getStyle(n,"position");_!=="absolute"&&_!=="fixed"&&A!=="absolute"&&A!=="fixed"&&(b.left-=a.scrollLeft,b.top-=a.scrollTop)}return b},getPositionOnElement:function(n,c,a){var b=typeof c.getBoundingClientRect<"u"?c.getBoundingClientRect():{left:0,top:0,width:0,height:0},C=document.body,u=document.documentElement,A=window.pageYOffset||u.scrollTop||C.scrollTop,_=window.pageXOffset||u.scrollLeft||C.scrollLeft,k=u.clientTop||C.clientTop||0,d=u.clientLeft||C.clientLeft||0,S=0,R=0,B=b.top+A-k+S*a,Y=b.left+_-d+R*a,i=jsPlumb.pageLocation(n),o=b.width||c.offsetWidth*a,t=b.height||c.offsetHeight*a,p=(i[0]-Y)/o,v=(i[1]-B)/t;return[p,v]},getAbsolutePosition:function(n){var c=function(a){var b=n.style[a];if(b)return parseFloat(b.substring(0,b.length-2))};return[c("left"),c("top")]},setAbsolutePosition:function(n,c,a,b){a?this.animate(n,{left:"+="+(c[0]-a[0]),top:"+="+(c[1]-a[1])},b):(n.style.left=c[0]+"px",n.style.top=c[1]+"px")},getSize:function(n){return[n.offsetWidth,n.offsetHeight]},getWidth:function(n){return n.offsetWidth},getHeight:function(n){return n.offsetHeight},getRenderMode:function(){return"svg"},draggable:function(n,c){var a;return n=X.isArray(n)||n.length!=null&&!X.isString(n)?n:[n],Array.prototype.slice.call(n).forEach((function(b){a=this.info(b),a.el&&this._initDraggableIfNecessary(a.el,!0,c,a.id,!0)}).bind(this)),this},snapToGrid:function(n,c,a){var b=[],C=(function(_){var k=this.info(_);if(k.el!=null&&k.el._katavorioDrag){var d=k.el._katavorioDrag.snap(c,a);this.revalidate(k.el),b.push([k.el,d])}}).bind(this);if(arguments.length===1||arguments.length===3)C(n,c,a);else{var u=this.getManagedElements();for(var A in u)C(A,arguments[0],arguments[1])}return b},initDraggable:function(n,c,a){h(this,a).draggable(n,c),n._jsPlumbDragOptions=c},destroyDraggable:function(n,c){h(this,c).destroyDraggable(n),n._jsPlumbDragOptions=null,n._jsPlumbRelatedElement=null},unbindDraggable:function(n,c,a,b){h(this,b).destroyDraggable(n,c,a)},setDraggable:function(n,c){return jsPlumb.each(n,(function(a){this.isDragSupported(a)&&(this._draggableStates[this.getAttribute(a,"id")]=c,this.setElementDraggable(a,c))}).bind(this))},_draggableStates:{},toggleDraggable:function(n){var c;return jsPlumb.each(n,(function(a){var b=this.getAttribute(a,"id");return c=this._draggableStates[b]==null?!1:this._draggableStates[b],c=!c,this._draggableStates[b]=c,this.setDraggable(a,c),c}).bind(this)),c},_initDraggableIfNecessary:function(n,c,a,b,C){if(!jsPlumb.headless){var u=c??!1;if(u&&jsPlumb.isDragSupported(n,this)){var A=a||this.Defaults.DragOptions;if(A=jsPlumb.extend({},A),jsPlumb.isAlreadyDraggable(n,this))a.force&&this.initDraggable(n,A);else{var _=jsPlumb.dragEvents.drag,k=jsPlumb.dragEvents.stop,d=jsPlumb.dragEvents.start;this.manage(b,n),A[d]=X.wrap(A[d],O.bind(this)),A[_]=X.wrap(A[_],l.bind(this)),A[k]=X.wrap(A[k],s.bind(this));var S=this.getId(n);this._draggableStates[S]=!0;var R=this._draggableStates[S];A.disabled=R==null?!1:!R,this.initDraggable(n,A),this.getDragManager().register(n),C&&this.fire("elementDraggable",{el:n,options:A})}}}},animationSupported:!0,getElement:function(n){return n==null?null:(n=typeof n=="string"?n:n.tagName==null&&n.length!=null&&n.enctype==null?n[0]:n,typeof n=="string"?document.getElementById(n):n)},removeElement:function(n){h(this).elementRemoved(n),this.getEventManager().remove(n)},doAnimate:function(n,c,a){a=a||{};var b=this.getOffset(n),C=y(b,c),u=C[0]-b.left,A=C[1]-b.top,_=a.duration||250,k=15,d=_/k,S=k/_*u,R=k/_*A,B=0,Y=setInterval(function(){f.setPosition(n,{left:b.left+S*(B+1),top:b.top+R*(B+1)}),a.step!=null&&a.step(B,Math.ceil(d)),B++,B>=d&&(window.clearInterval(Y),a.complete!=null&&a.complete())},k)},destroyDroppable:function(n,c){h(this,c).destroyDroppable(n)},unbindDroppable:function(n,c,a,b){h(this,b).destroyDroppable(n,c,a)},droppable:function(n,c){n=X.isArray(n)||n.length!=null&&!X.isString(n)?n:[n];var a;return c=c||{},c.allowLoopback=!1,Array.prototype.slice.call(n).forEach((function(b){a=this.info(b),a.el&&this.initDroppable(a.el,c)}).bind(this)),this},initDroppable:function(n,c,a){h(this,a).droppable(n,c)},isAlreadyDraggable:function(n){return n._katavorioDrag!=null},isDragSupported:function(n,c){return!0},isDropSupported:function(n,c){return!0},isElementDraggable:function(n){return n=f.getElement(n),n._katavorioDrag&&n._katavorioDrag.isEnabled()},getDragObject:function(n){return n[0].drag.getDragElement()},getDragScope:function(n){return n._katavorioDrag&&n._katavorioDrag.scopes.join(" ")||""},getDropEvent:function(n){return n[0].e},getUIPosition:function(n,c){var a=n[0].el;if(a.offsetParent==null)return null;var b=n[0].finalPos||n[0].pos,C={left:b[0],top:b[1]};if(a._katavorioDrag&&a.offsetParent!==this.getContainer()){var u=this.getOffset(a.offsetParent);C.left+=u.left,C.top+=u.top}return C},setDragFilter:function(n,c,a){n._katavorioDrag&&n._katavorioDrag.setFilter(c,a)},setElementDraggable:function(n,c){n=f.getElement(n),n._katavorioDrag&&n._katavorioDrag.setEnabled(c)},setDragScope:function(n,c){n._katavorioDrag&&n._katavorioDrag.k.setDragScope(n,c)},setDropScope:function(n,c){n._katavorioDrop&&n._katavorioDrop.length>0&&n._katavorioDrop[0].k.setDropScope(n,c)},addToPosse:function(n,c){var a=Array.prototype.slice.call(arguments,1),b=h(this);f.each(n,function(C){C=[f.getElement(C)],C.push.apply(C,a),b.addToPosse.apply(b,C)})},setPosse:function(n,c){var a=Array.prototype.slice.call(arguments,1),b=h(this);f.each(n,function(C){C=[f.getElement(C)],C.push.apply(C,a),b.setPosse.apply(b,C)})},removeFromPosse:function(n,c){var a=Array.prototype.slice.call(arguments,1),b=h(this);f.each(n,function(C){C=[f.getElement(C)],C.push.apply(C,a),b.removeFromPosse.apply(b,C)})},removeFromAllPosses:function(n){var c=h(this);f.each(n,function(a){c.removeFromAllPosses(f.getElement(a))})},setPosseState:function(n,c,a){var b=h(this);f.each(n,function(C){b.setPosseState(f.getElement(C),c,a)})},dragEvents:{start:"start",stop:"stop",drag:"drag",step:"step",over:"over",out:"out",drop:"drop",complete:"complete",beforeStart:"beforeStart"},animEvents:{step:"step",complete:"complete"},stopDrag:function(n){n._katavorioDrag&&n._katavorioDrag.abort()},addToDragSelection:function(n){var c=this.getElement(n);c!=null&&(c._isJsPlumbGroup||c._jsPlumbGroup==null)&&h(this).select(n)},removeFromDragSelection:function(n){h(this).deselect(n)},getDragSelection:function(){return h(this).getSelection()},clearDragSelection:function(){h(this).deselectAll()},trigger:function(n,c,a,b){this.getEventManager().trigger(n,c,a,b)},doReset:function(){for(var n in this)n.indexOf("_katavorio_")===0&&this[n].reset()},getEventManager:function(){return tt(this)},on:function(n,c,a){return this.getEventManager().on.apply(this,arguments),this},off:function(n,c,a){return this.getEventManager().off.apply(this,arguments),this}});var w=function(n){var c=function(){/complete|loaded|interactive/.test(document.readyState)&&typeof document.body<"u"&&document.body!=null?n():setTimeout(c,9)};c()};w(f.init)}).call(typeof window<"u"?window:jt)})(xe);let ve;const Ne=new Uint8Array(16);function Ge(){if(!ve&&(ve=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ve))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ve(Ne)}const Ft=[];for(let ot=0;ot<256;++ot)Ft.push((ot+256).toString(16).slice(1));function Re(ot,z=0){return Ft[ot[z+0]]+Ft[ot[z+1]]+Ft[ot[z+2]]+Ft[ot[z+3]]+"-"+Ft[ot[z+4]]+Ft[ot[z+5]]+"-"+Ft[ot[z+6]]+Ft[ot[z+7]]+"-"+Ft[ot[z+8]]+Ft[ot[z+9]]+"-"+Ft[ot[z+10]]+Ft[ot[z+11]]+Ft[ot[z+12]]+Ft[ot[z+13]]+Ft[ot[z+14]]+Ft[ot[z+15]]}const Ue=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Ee={randomUUID:Ue};function Jt(ot,z,f){if(Ee.randomUUID&&!z&&!ot)return Ee.randomUUID();ot=ot||{};const X=ot.random||(ot.rng||Ge)();if(X[6]=X[6]&15|64,X[8]=X[8]&63|128,z){f=f||0;for(let Q=0;Q<16;++Q)z[f+Q]=X[Q];return z}return Re(X)}let Kt=[];const He={DragOptions:{cursor:"pointer",zIndex:2e3},EndpointStyle:{fill:"transparent",stroke:"#1565C0",radius:4,strokeWidth:1},ReattachConnections:!1},Se={endpoint:"Dot",anchor:["Left","Right"],overlays:[["Arrow",{width:12,length:12,location:1}]],connector:["Flowchart"],paintStyle:{stroke:"red",strokeWidth:2},endpointStyle:{fill:"orange",strokeWidth:4,outlineStroke:"orange",outlineWidth:1,radius:4,stroke:"pink"},hoverPaintStyle:{outlineStroke:"orange"}},De={endpoint:"Dot",anchor:["Left","Right"],overlays:[["Arrow",{width:12,length:12,location:1}]],connector:["Flowchart"],paintStyle:{stroke:"red",strokeWidth:2},endpointStyle:{fill:"transparent",strokeWidth:2,outlineStroke:"red",outlineWidth:1,radius:4,stroke:"pink"},hoverPaintStyle:{outlineStroke:"#67baf9",strokeWidth:2},connectorHoverStyle:{strokeWidth:2}},Be=()=>{const[ot,z]=Lt.useState(null),[f,X]=Lt.useState([]),[Q,Z]=Lt.useState([]),[tt,h]=Lt.useState([]),[O,l]=Lt.useState(!1),[s,y]=Lt.useState(0),[D,M]=Lt.useState(0),E=n=>{const c={...n,id:Jt(),topId:Jt(),bottomId:Jt()};Kt.push(c),X([c])},g=Lt.useCallback(n=>{const c={...n,id:Jt(),topId:Jt(),bottomId:Jt()};Kt.push(c),Z([c])},[ot]),e=Lt.useCallback(n=>{const c={...n,id:Jt(),topId:Jt(),bottomId:Jt()};Kt.push(c),h([c])},[ot]),[j,I]=ke(()=>({accept:"box",collect:n=>({isOver:n.isOver(),canDrop:n.canDrop(),draggingColor:n.getItemType()}),drop:(n,c)=>{const b=document.querySelector("#diagramContainer").getBoundingClientRect(),C=c.getSourceClientOffset(),u=Math.round(C.x-b.x),A=Math.round(C.y-b.y);switch(n.dropType){case"treeRoot":E({...n,left:u,top:A});break;case"treeList":g({...n,left:u,top:A});break;case"treeNode":e({...n,left:u,top:A});break}return{}}}));Lt.useEffect(()=>{const n=xe.jsPlumb.getInstance(He);z(n)},[]),Lt.useEffect(()=>{ot==null||ot.deleteEveryEndpoint()},[ot]),Lt.useEffect(()=>{ot==null||ot.batch(function(){for(let n=0;n<f.length;n++){const c=f[n];ot==null||ot.addEndpoint(c.id,{anchor:"Bottom",isSource:!0,maxConnections:-1,uuid:c.bottomId},De),ot==null||ot.draggable(c.id)}})},[f]),Lt.useEffect(()=>{ot==null||ot.batch(function(){for(let n=0;n<Q.length;n++){const c=Q[n];ot==null||ot.addEndpoint(c.id,{anchor:"Top",isTarget:!0,maxConnections:-1,uuid:c.topId},Se),ot==null||ot.addEndpoint(c.id,{anchor:"Bottom",isSource:!0,maxConnections:-1,uuid:c.bottomId},De),ot==null||ot.draggable(c.id)}})},[Q]),Lt.useEffect(()=>{ot==null||ot.bind("beforeDrop",function(n){const c=ot==null?void 0:ot.getAllConnections();if(c.length>0){let a=0;if(c.forEach(b=>{b.targetId===n.targetId&&b.sourceId===n.sourceId&&a++}),a>0)return!1}return n.sourceId!==n.targetId}),ot==null||ot.bind("click",function(n,c){}),ot==null||ot.bind("endpointClick",function(n,c){}),ot==null||ot.bind("contextmenu",function(n,c){})},[ot]),Lt.useEffect(()=>{ot==null||ot.batch(function(){for(let n=0;n<tt.length;n++){const c=tt[n];ot==null||ot.addEndpoint(c.id,{anchor:"Top",isTarget:!0,maxConnections:-1,uuid:c.topId},Se),ot==null||ot.draggable(c.id)}})},[tt]),Lt.useCallback(()=>{const n=ot==null?void 0:ot.getAllConnections(),c=[],a=[];return n.forEach(C=>{c.push({id:C.id,sourceId:C.sourceId,targetId:C.targetId,topId:C.target.getAttribute("data-topId"),bottomId:C.source.getAttribute("data-bottomId")})}),document.querySelectorAll(".drag").forEach(C=>{const u=Kt.findIndex(_=>_.id===C.id),A=Object.assign(Kt[u],{left:C.style.left,top:C.style.top});a.push(A)}),{connects:c,mainArr:a}},[ot]);const U=Lt.useCallback(n=>{const c=n.target.getAttribute("id");Kt=Kt.filter((b,C)=>b.id!==c),ot==null||ot.remove(c)},[ot]),N=n=>{n.preventDefault(),n.stopPropagation()},P=n=>{n.preventDefault(),n.stopPropagation();const a=document.querySelector("#diagramContainer").getBoundingClientRect(),b=n.clientX,C=n.clientY;l(!0),y(b-a.x),M(C-a.y)},w=()=>{l(!1)};return Tt.jsx(Tt.Fragment,{children:Tt.jsx("div",{id:"diagramContainer",ref:I,className:ee.container,children:Tt.jsxs("div",{children:[Kt==null?void 0:Kt.map(n=>Tt.jsx("div",{children:Tt.jsxs("div",{id:n.id,"data-topId":n.topId,"data-bottomId":n.bottomId,"data-dropName":n.dropName,"data-dropType":n.dropType,onContextMenu:P,className:`drag ${ee.item}`,style:{left:n.left,top:n.top},children:[n.dropName,Tt.jsx("div",{id:n.id,className:ee.deletes,onClick:U,children:"-"})]})},n.id)),O?Tt.jsx("div",{className:ee["right-menu"],style:{top:D,left:s},children:Tt.jsx(me,{onClick:w,onContextMenu:N,defaultSelectedKeys:["1"],defaultOpenKeys:["sub1"],mode:"inline",children:Tt.jsx(me.ItemGroup,{title:"操作",children:Tt.jsx(me.Item,{children:"查看"},"t3")})})}):null]})})})},Ye=Lt.memo(function(){return Tt.jsxs("div",{className:ee.content,children:[Tt.jsxs("div",{className:ee["source-box"],children:[Tt.jsx(ye,{dropName:"选项1",dropType:"treeRoot"}),Tt.jsx(ye,{dropName:"选项2",dropType:"treeList"}),Tt.jsx(ye,{dropName:"选项3",dropType:"treeNode"})]}),Tt.jsx("div",{className:ee.targetBox,children:Tt.jsx(Be,{})})]})});function qe(){return Tt.jsx(Tt.Fragment,{children:Tt.jsx(Te,{backend:je,children:Tt.jsx(Ye,{})})})}export{qe as default};
