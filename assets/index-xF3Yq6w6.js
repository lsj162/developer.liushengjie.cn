var P=Object.defineProperty;var b=(s,e,t)=>e in s?P(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var d=(s,e,t)=>(b(s,typeof e!="symbol"?e+"":e,t),t);import{j as S,r as c,R as T,l as r}from"./index-7bz3Y237.js";var w={exports:{}},E="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",C=E,R=C;function x(){}function y(){}y.resetWarningCache=x;var j=function(){function s(l,o,n,a,h,m){if(m!==R){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}s.isRequired=s;function e(){return s}var t={array:s,bigint:s,bool:s,func:s,number:s,object:s,string:s,symbol:s,any:s,arrayOf:e,element:s,elementType:s,instanceOf:e,node:s,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:y,resetWarningCache:x};return t.PropTypes=t,t};w.exports=j();var O=w.exports;const i=S(O);class f extends c.Component{constructor(e){super(e),this.scrollListener=this.scrollListener.bind(this),this.eventListenerOptions=this.eventListenerOptions.bind(this),this.mousewheelListener=this.mousewheelListener.bind(this)}componentDidMount(){this.pageLoaded=this.props.pageStart,this.options=this.eventListenerOptions(),this.attachScrollListener()}componentDidUpdate(){if(this.props.isReverse&&this.loadMore){const e=this.getParentElement(this.scrollComponent);e.scrollTop=e.scrollHeight-this.beforeScrollHeight+this.beforeScrollTop,this.loadMore=!1}this.attachScrollListener()}componentWillUnmount(){this.detachScrollListener(),this.detachMousewheelListener()}isPassiveSupported(){let e=!1;const t={get passive(){e=!0}};try{document.addEventListener("test",null,t),document.removeEventListener("test",null,t)}catch{}return e}eventListenerOptions(){let e=this.props.useCapture;return this.isPassiveSupported()?e={useCapture:this.props.useCapture,passive:!0}:e={passive:!1},e}setDefaultLoader(e){this.defaultLoader=e}detachMousewheelListener(){let e=window;this.props.useWindow===!1&&(e=this.scrollComponent.parentNode),e.removeEventListener("mousewheel",this.mousewheelListener,this.options?this.options:this.props.useCapture)}detachScrollListener(){let e=window;this.props.useWindow===!1&&(e=this.getParentElement(this.scrollComponent)),e.removeEventListener("scroll",this.scrollListener,this.options?this.options:this.props.useCapture),e.removeEventListener("resize",this.scrollListener,this.options?this.options:this.props.useCapture)}getParentElement(e){const t=this.props.getScrollParent&&this.props.getScrollParent();return t??(e&&e.parentNode)}filterProps(e){return e}attachScrollListener(){const e=this.getParentElement(this.scrollComponent);if(!this.props.hasMore||!e)return;let t=window;this.props.useWindow===!1&&(t=e),t.addEventListener("mousewheel",this.mousewheelListener,this.options?this.options:this.props.useCapture),t.addEventListener("scroll",this.scrollListener,this.options?this.options:this.props.useCapture),t.addEventListener("resize",this.scrollListener,this.options?this.options:this.props.useCapture),this.props.initialLoad&&this.scrollListener()}mousewheelListener(e){e.deltaY===1&&!this.isPassiveSupported()&&e.preventDefault()}scrollListener(){const e=this.scrollComponent,t=window,l=this.getParentElement(e);let o;if(this.props.useWindow){const n=document.documentElement||document.body.parentNode||document.body,a=t.pageYOffset!==void 0?t.pageYOffset:n.scrollTop;this.props.isReverse?o=a:o=this.calculateOffset(e,a)}else this.props.isReverse?o=l.scrollTop:o=e.scrollHeight-l.scrollTop-l.clientHeight;o<Number(this.props.threshold)&&e&&e.offsetParent!==null&&(this.detachScrollListener(),this.beforeScrollHeight=l.scrollHeight,this.beforeScrollTop=l.scrollTop,typeof this.props.loadMore=="function"&&(this.props.loadMore(this.pageLoaded+=1),this.loadMore=!0))}calculateOffset(e,t){return e?this.calculateTopPosition(e)+(e.offsetHeight-t-window.innerHeight):0}calculateTopPosition(e){return e?e.offsetTop+this.calculateTopPosition(e.offsetParent):0}render(){const e=this.filterProps(this.props),{children:t,element:l,hasMore:o,initialLoad:n,isReverse:a,loader:h,loadMore:m,pageStart:u,ref:v,threshold:M,useCapture:N,useWindow:W,getScrollParent:D,...g}=e;g.ref=L=>{this.scrollComponent=L,v&&v(L)};const p=[t];return o&&(h?a?p.unshift(h):p.push(h):this.defaultLoader&&(a?p.unshift(this.defaultLoader):p.push(this.defaultLoader))),T.createElement(l,g,p)}}d(f,"propTypes",{children:i.node.isRequired,element:i.node,hasMore:i.bool,initialLoad:i.bool,isReverse:i.bool,loader:i.node,loadMore:i.func.isRequired,pageStart:i.number,ref:i.func,getScrollParent:i.func,threshold:i.number,useCapture:i.bool,useWindow:i.bool}),d(f,"defaultProps",{element:"div",hasMore:!1,initialLoad:!0,pageStart:0,ref:null,threshold:250,useWindow:!0,isReverse:!1,useCapture:!1,loader:null,getScrollParent:null});function F(){const[s,e]=c.useState([]);c.useEffect(()=>{t()},[]);const t=c.useCallback(()=>{const o=Array.from({length:20});console.log("ðŸš€ ~ file: index.tsx:14 ~ loadData ~ data:",o),setTimeout(()=>{e(s.concat(o))},2e3)},[s]),l=o=>{console.log("ðŸš€ ~ :",o),t()};return r.jsx(r.Fragment,{children:r.jsxs("div",{className:"fixed top-0 right-0  flex h-full w-96 flex-col bg-[#fff] shadow-lg ",children:[r.jsxs("div",{className:"  top-0 right-0 flex w-full justify-between px-6 py-4",children:[r.jsx("h1",{children:"å…¨éƒ¨è¯„è®º"}),r.jsx("div",{children:"x"})]}),r.jsx("div",{className:"relative box-border h-full w-full px-6",children:r.jsx("div",{className:"absolute top-0 left-0 h-full w-full overflow-y-auto px-6",children:r.jsx("div",{className:"absolute top-0 left-0 h-full w-full overflow-y-auto px-6 text-xs text-[rgb(24,24,36,.6)]",children:r.jsx(f,{pageStart:0,loadMore:l,hasMore:!0,loader:r.jsx("div",{className:"loader",children:"Loading ..."},0),useWindow:!1,children:s.map((o,n)=>r.jsxs("div",{style:{height:"100px"},children:["div - #",n]},n))})})})}),r.jsx("div",{className:"w-full px-6 py-4   ",children:r.jsx("input",{className:"bg-slate-100 w-full rounded-full p-4 outline-none",type:"text",placeholder:"ç•™ä¸‹ä½ çš„ç²¾å½©è¯„è®º"})})]})})}export{F as default};
