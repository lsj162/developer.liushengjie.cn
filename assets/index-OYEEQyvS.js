import{r as x,j as d,a as U}from"./index-7R1ce2wo.js";import{C as N,b as q,c as O,D as Q,d as V,e as w,K as X,P as Y}from"./core.esm-OlSLYOj2.js";import{a as W,u as Z,S as tt,v as et,s as nt}from"./sortable.esm-MhVnGIKR.js";import{c as rt}from"./index-pB0cyT1Q.js";const ot=/iPad|iPhone|iPod/.test(navigator.platform);function st(t,n){return Math.round(t/n)}function it(t,n,e,o,s){const i=t.findIndex(({id:b})=>b===e),l=t.findIndex(({id:b})=>b===n),c=t[l],u=W(t,l,i),a=u[i-1],g=u[i+1],_=st(o,s),S=c.depth+_,f=at({previousItem:a}),p=ct({nextItem:g});let h=S;return S>=f?h=f:S<p&&(h=p),{depth:h,maxDepth:f,minDepth:p,parentId:C()};function C(){var v;return h===0||!a?null:h===a.depth?a.parentId:h>a.depth?a.id:((v=u.slice(0,i).reverse().find(P=>P.depth===h))==null?void 0:v.parentId)??null}}function at({previousItem:t}){return t?t.depth+1:0}function ct({nextItem:t}){return t?t.depth:0}function R(t,n=null,e=0){return t.reduce((o,s,i)=>[...o,{...s,parentId:n,depth:e,index:i},...R(s.children,s.id,e+1)],[])}function z(t){return R(t)}function dt(t){const n={id:"root",children:[]},e={[n.id]:n},o=t.map(s=>({...s,children:[]}));for(const s of o){const{id:i,children:l}=s,c=s.parentId??n.id,u=e[c]??lt(o,c);e[i]={id:i,children:l},u.children.push(s)}return n.children}function lt(t,n){return t.find(({id:e})=>e===n)}function K(t,n){for(const e of t){const{id:o,children:s}=e;if(o===n)return e;if(s.length){const i=K(s,n);if(i)return i}}}function L(t,n=0){return t.reduce((e,{children:o})=>o.length?L(o,e+1):e+1,n)}function ut(t,n){const e=K(t,n);return e?L(e.children):0}function ft(t,n){const e=[...n];return t.filter(o=>o.parentId&&e.includes(o.parentId)?(o.children.length&&e.push(o.id),!1):!0)}const pt="_Wrapper_1t912_1",ht="_clone_1t912_7",mt="_TreeItem_1t912_14",gt="_ghost_1t912_23",It="_indicator_1t912_24",xt="_Text_1t912_83",_t="_Count_1t912_91",St="_disableInteraction_1t912_107",yt="_disableSelection_1t912_111",bt="_Collapse_1t912_119",Dt="_collapsed_1t912_124",vt="_Action_1t912_129",I={Wrapper:pt,clone:ht,TreeItem:mt,ghost:gt,indicator:It,Text:xt,Count:_t,disableInteraction:St,disableSelection:yt,Collapse:bt,collapsed:Dt,Action:vt},H=x.forwardRef(({id:t,indentationWidth:n,depth:e,disableSelection:o,clone:s,ghost:i,indicator:l,disableInteraction:c,style:u,wrapperRef:a,handleProps:g,..._},S)=>d.jsx("li",{ref:a,className:rt(I.Wrapper,s&&I.clone,i&&I.ghost,l&&I.indicator,o&&I.disableSelection,c&&I.disableInteraction),style:{"--spacing":`${n*e}px`},..._,children:d.jsxs("div",{className:I.TreeItem,ref:S,style:u,children:[d.jsx("button",{cursor:"grab","data-cypress":"draggable-handle",...g,className:I.Action,children:d.jsx("svg",{viewBox:"0 0 20 20",width:"12",children:d.jsx("path",{d:"M7 2a2 2 0 1 0 .001 4.001A2 2 0 0 0 7 2zm0 6a2 2 0 1 0 .001 4.001A2 2 0 0 0 7 8zm0 6a2 2 0 1 0 .001 4.001A2 2 0 0 0 7 14zm6-8a2 2 0 1 0-.001-4.001A2 2 0 0 0 13 6zm0 2a2 2 0 1 0 .001 4.001A2 2 0 0 0 13 8zm0 6a2 2 0 1 0 .001 4.001A2 2 0 0 0 13 14z"})})}),d.jsx("span",{className:I.Text,children:t})]})}));H.displayName="TreeItem";function E({id:t,depth:n,...e}){const{attributes:o,listeners:s,setNodeRef:i,setDroppableNodeRef:l,transform:c,transition:u,isDragging:a,isSorting:g}=Z({id:t}),_={transform:N.Translate.toString(c),transition:u};return d.jsx(H,{ref:i,wrapperRef:l,style:_,depth:n,ghost:a,disableSelection:ot,disableInteraction:g,handleProps:{...o,...s},id:t,...e})}const Ct=[{id:"Home",children:[]},{id:"Collections",children:[{id:"Spring",children:[]},{id:"Summer",children:[]},{id:"Fall",children:[]},{id:"Winter",children:[]}]},{id:"About Us",children:[]},{id:"My Account",children:[{id:"Addresses",children:[]},{id:"Order History",children:[]}]}],Pt={keyframes({transform:t}){return[{opacity:1,transform:N.Transform.toString(t.initial)},{opacity:0,transform:N.Transform.toString({...t.final,x:t.final.x+5,y:t.final.y+5})}]},easing:"ease-out",sideEffects({active:t}){t.node.animate([{opacity:0},{opacity:1}],{duration:w.duration,easing:w.easing})}},Tt=({transform:t})=>({...t,y:t.y-25});function Ot(){const[t,n]=x.useState(null),[e,o]=x.useState(()=>Ct),[s,i]=x.useState(0),[l,c]=x.useState(null),[u,a]=x.useState(null);console.info("ðŸš€ ~ Page ~ currentPosition:",u);const g=50,_=!0,S=q(O(Y),O(X,{coordinateGetter:nt})),f=x.useMemo(()=>{const r=z(e),m=r.reduce((D,{children:T,collapsed:y,id:A})=>y&&T.length?[...D,A]:D,[]);return ft(r,t?[t,...m]:m)},[t,e]),p=t&&l?it(f,t,l,s,g):null,h=t?f.find(({id:r})=>r===t):null;function C({active:{id:r}}){n(r),c(r);const m=f.find(({id:D})=>D===r);m&&a({parentId:m.parentId,overId:r}),document.body.style.setProperty("cursor","grabbing")}const b=x.useMemo(()=>f.map(({id:r})=>r),[f]);function v(){c(null),n(null),i(0),a(null),document.body.style.setProperty("cursor","")}function P({delta:r}){i(r.x)}function J({over:r}){c((r==null?void 0:r.id)??null)}function $({active:r,over:m}){if(v(),p&&m){const{depth:D,parentId:T}=p,y=JSON.parse(JSON.stringify(z(e))),A=y.findIndex(({id:M})=>M===m.id),j=y.findIndex(({id:M})=>M===r.id),B=y[j];y[j]={...B,depth:D,parentId:T};const F=W(y,j,A),G=dt(F);o(G)}}function k(){v()}return d.jsxs(Q,{sensors:S,onDragStart:C,onDragMove:P,onDragOver:J,onDragEnd:$,onDragCancel:k,children:[d.jsx(tt,{items:b,strategy:et,children:f.map(({id:r,depth:m})=>d.jsx(E,{id:r,value:r,depth:r===t&&p?p==null?void 0:p.depth:m,indentationWidth:g,indicator:_},r))}),U.createPortal(d.jsx(V,{dropAnimation:Pt,modifiers:[Tt],children:t&&h?d.jsx(E,{id:t,depth:h.depth,clone:!0,childCount:ut(e,t)+1,value:t.toString(),indentationWidth:g}):null}),document.body)]})}export{Ot as default};
